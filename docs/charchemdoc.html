<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <script src="charchem2.js"></script>
  <script src="charchemdoc.js"></script>
  <link rel="stylesheet" type="text/css" href="charchem.css" />
  <link rel="stylesheet" type="text/css" href="charchemdoc.css" />
</head>
<body>
  <page id="home">
    <h1>
      <span lang="ru">Документация по системе CharChem 2.0</span>
      <span lang="en">CharChem 2.0 documentation</span>
    </h1>
    <ul class="contents" data-owner="home"></ul>
    <h2>
      <span lang="ru">Как читать данный документ</span>
      <span lang="en">How to read this document</span>
    </h2>
    <p lang="ru">
      Рекомендуется полностью прочесть раздел "<a href="?p=rules">Описание химических формул</a>". 
      При этом не стоит пытаться сразу всё понять и запомнить.
      Достаточно в общих чертах представлять основные возможности CharChem.
    </p>
    <p lang="en">
      It is recommended to read the entire section "<a href="?p=rules">Description of chemical formulas</a>".
      However, you should not try to understand and remember everything at once.
      It is enough to have a general idea of the main features of CharChem.      
    </p>
    <p lang="ru">
      Затем Вы можете использовать раздел <a href="?p=templates">Подсказки</a> чтобы быстро находить решения для тех ситуаций, 
      которые могут возникнуть в процессе кодирования формул.
    </p>
    <p lang="en">
      You can then use the <a href="?p=templates">Hints</a> section to quickly find solutions to situations that may arise while coding formulas.
    </p>
    <p lang="ru">
      <a href="?p=ref">Справочник</a> не предназначен для чтения. 
      К нему стоит обращаться по мере необходимости для получения подробной информации по тем или иным аспектам системы CharChem.
    </p>
    <p lang="en">
      The <a href="?p=ref">Reference</a> is not intended to be read.
      It should be consulted as needed to obtain detailed information on various aspects of the CharChem system.      
    </p>
    <p lang="ru">Автор документа: PeterWin. Версия от 2024-12-01</p>
    <p lang="en">Author of the document: PeterWin. Version from 2024-12-01</p>
  </page>  

  <page id="rules" data-owner="home">
    <h1>
      <span lang="ru">Описание химических формул</span>
      <span lang="en">Description of chemical formulas</span>
    </h1>
    <p>
      <span lang="ru">Для описания химических формул в CharChem используются текстовые строки.
      В следующей таблице представлены примеры.</span>
      <span lang="en">
        CharChem uses text strings to describe chemical formulas. The following table provides examples.
      </span>
    </p>
    <div class="two-col-table">
      <header>
        <span lang="ru">Текстовое описание</span>
        <span lang="en">Text description</span>
      </header>
      <header>
        <span lang="ru">Полученная формула</span>
        <span lang="en">Result formula</span>
      </header>
      <code class="chem-code">CuSO4*5H2O</code>
      <div class="echem-formula">CuSO4*5H2O</div>
      <code class="chem-code">2H^+ + SO4^2- &lt;=&gt; H^+ + HSO4^-</code>
      <div class="echem-formula">2H^+ + SO4^2- &lt;=&gt; H^+ + HSO4^-</div>
      <code class="chem-code">CH3-CH2-CH&lt;|CH3&gt;-OH</code>
      <div class="echem-formula">CH3-CH2-CH&lt;|CH3&gt;-OH</div>
      <code class="chem-code">H3C/\&lt;|CH3&gt;/OH</code>
      <div class="echem-formula">H3C/\&lt;|CH3&gt;/OH</div>
      <code class="chem-code">`/O`\&lt;`/~HO&gt;`|&lt;`\wHO&gt;/&lt;`|wOH&gt;\&lt;/dOH&gt;|\wCH3</code>
      <div class="echem-formula">`/O`\&lt;`/~HO&gt;`|&lt;`\wHO&gt;/&lt;`|wOH&gt;\&lt;/dOH&gt;|\wCH3</div>
      <code class="chem-code">CH2OH|_(x-1,y1)&lt;|HO&gt;_(x1,y1,W+)&lt;`|OH&gt;_(x1.4)&lt;|OH&gt;_(x1,y-1,W-)&lt;`|OH&gt;_(x-1,y-1)O_#2</code>
      <div class="echem-formula">CH2OH|_(x-1,y1)&lt;|HO&gt;_(x1,y1,W+)&lt;`|OH&gt;_(x1.4)&lt;|OH&gt;_(x1,y-1,W-)&lt;`|OH&gt;_(x-1,y-1)O_#2</div>
    </div>
    <p lang="ru">
      Здесь можно видеть, что сложность описания зависит от сложности формулы. 
      Хотя здесь представлен далеко не все возможности, которые можно использовать при помощи системы CharChem.
    </p>
    <p lang="en">
      Here you can see that the complexity of the description depends on the complexity of the formula.
      Although this does not present all the possibilities that can be used with the CharChem system.
    </p>
    <p lang="ru">
      Для описания химических формул рекомендуется использовать <a href="http://charchem.org/ru/test" target="_blank">тестовый стенд</a>.
      Там можно сразу видеть результат. А если появится какая-то ошибка, то об этом будет соответствующее сообщение.
    </p>
    <p lang="en">
      To describe chemical formulas, it is recommended to use the <a href="http://charchem.org/en/test" target="_blank">test stand</a>.
      There you can immediately see the result. And if any error occurs, there will be a corresponding message about it.      
    </p>
    <p lang="ru">В данном разделе расматриваются правила, с помощью которых выполняеются текстовые описания формул CharChem</p>
    <p lang="en">This section discusses the rules by which textual descriptions of CharChem formulas are performed.</p>
    <ul class="contents" data-owner="rules"></ul>
  </page>

  <page id="rules-formula-composition" data-owner="rules">
    <h1>
      <span lang="ru">Из чего состоит химическая формула CharChem</span>
      <span lang="en">Components of CharChem chemical formula</span>
    </h1>
    <p lang="ru">
      В общем случае формула состоит из нескольких <a data-ref="agent">реагентов</a>, 
      которые могут быть разделены <a data-ref="op">операциями</a>.
    </p>
    <p lang="en">
      In general, a formula consists of several <a data-ref="agent">reagents</a> 
      that can be separated by <a data-ref="op">operations</a>.
    </p>
    <p lang="ru">Например, в следуюшей формуле три реагента и две операции (они обозначены красным).</p>
    <p lang="en">For example, in the following formula there are three reagents and two operations (they are marked in red).</p>
    <div class="echem-formula">2H2$color(red) + $color()O2$color(red) -&gt; $color()2H2O</div>
    <p lang="ru">
      Следующая формула состоит из одного реагента и не имеет операций. 
      Но реагент состоит из трёх <a data-ref="node">узлов</a>. 
      В то время как в предыдущей формуле у каждого из реагентов по одному узлу.
    </p>
    <p lang="en">
      The following formula consists of one reagent and has no operations.
      But the reagent consists of three <a data-ref="node">nodes</a>.
      While in the previous formula each of the reagents has one node.
    </p>
    <div class="echem-formula">CH3-CH2-OH</div>
    <p lang="ru">
      Узлы обычно соединяются <a data-ref="bond">химическими связями</a>. 
      И хотя в реальности каждый атом водорода тут имеет ковалентную связь с соответствующим атомом, но в формуле явно указаны только две. 
      Поэтому здесь получается три узла. Но если то же самое вещество записать в виде другой формулы 
      <span class="echem-formula">CH3CH2OH</span> - то в ней всего один узел, т.к. отсутствуют разделители.
      То есть, узел - это понятие никак не связано с химическими свойствами. Оно нужно только для графического представления.
    </p>
    <p lang="en">
      The nodes are usually connected by <a data-ref="bond">chemical bonds</a>.
      And although in reality each hydrogen atom here has a covalent bond with the corresponding atom, only two bonds are clearly indicated in the formula.
      Therefore, there are three nodes here. But if the same substance is written as another formula 
      <span class="echem-formula">CH3CH2OH</span>, then there is only one node, because there are no separators.
    </p>
    <p lang="ru">
      В следуюшей формуле (слева) показан один реагент, у которого есть 7 химических связей. 
      (Имеются в виду те связи, которые явно изображены на формуле)
    </p>
    <p lang="en">
      The following formula (left) shows one reagent that has 7 chemical bonds. 
      (These are the bonds that are clearly shown in the formula.)      
    </p>
    <div class="two-col-table">
      <div class="echem-formula">||`/`\\`|//\/CH2OH</div>
      <div class="echem-formula small-comment">
        ||@:n(t,a,d:0.4)&lt;_(A&a,N0,L&d)$itemColor1(blue)&quot;&amp;t&quot;&gt;@(1,30)`/@n(2,90)`\\@n(3,150)`|@n(4,-150)//@n(5,-90)\@n(6,-89,0.6)/CH2OH@n(7,-90,0.6)
      </div>
    </div>
    <p lang="ru">
      Можно подумать, что у него только один узел (<span class="echem-formula">CH2OH</span>). 
      Но по правилам <a data-ref="skeletal-formula">скелетных формул</a>, каждый угол соответствует атому углерода.
      Поэтому здесь 7 узлов, которые обозначены справа. 
      Такие узлы (кроме 7) в системе CharChem называются <a data-ref="auto-node">автоузлами</a>.
    </p>
    <p lang="en">
      You might think that it has only one node (<span class="echem-formula">CH2OH</span>). 
      But according to the rules of <a data-ref="skeletal-formula">skeletal formulas</a>, each corner corresponds to a carbon atom. 
      Therefore, there are 7 nodes, which are indicated on the right. 
      Such nodes (except 7) are called <a data-ref="auto-node">autonodes</a> in the CharChem system.
    </p>
  </page>

  <page id="rules-common" data-owner="rules">
    <h1><span lang="ru">Общие правила</span><span lang="en">General rules</span></h1>
    <p lang="ru">
      При описании формул важно соблюдать регистр. Потому что например CO - это угарный газ, а Co - кобальт.
    </p>
    <p lang="en">
      When describing formulas, it is important to observe the register. Because, for example, CO is carbon monoxide, and Co is cobalt.      
    </p>
    <p lang="ru">
      Пробелы можно вставлять только в определённых местах. 
      Например, пробелом <b>необходимо</b> отделять реагент от операции.
      Но там где разрешено (или требуется) один пробел, можно вставлять и несколько пробелов. 
      И даже можно использовать переход на следующую строку.
    </p>
    <p lang="ru"><a href="?p=ref-space">Полный список правил, связанных с пробелом</a></p>
    <p lang="en">
      Spaces can only be inserted in certain places. 
      For example, a space <b>must</b> separate a reagent from an operation. 
      But where one space is allowed (or required), multiple spaces can be inserted. 
      And you can even use a line break.
    </p>
    <p lang="en">
      <a href="?p=ref-space">Complete list of space related rules</a>
    </p>
  </page>

  <page id="rules-node" data-owner="rules">
    <h1>
      <span lang="ru">Описание узлов</span>
      <span lang="en">Description of nodes</span>
    </h1>
    <p lang="ru">Прежде чем переходить к сложным формулам, желательно разобраться с простыми. 
      Давайте рассмотрим такие формулы, где реагенты состоят из одного <a data-ref="node">узла</a>.
      К ним относятся классические рациональные формулы, 
      такие как <span class="echem-formula">H2SO4</span> и т.п.
    </p>
    <p lang="en">
      Before moving on to complex formulas, it is advisable to understand simple ones. 
      Let's consider such formulas, where the reactants consist of one <a data-ref="node">node</a>. 
      These include classical rational formulas, such as <span class="echem-formula">H2SO4</span>, etc.
    </p>
    <ul class="contents" data-owner="rules-node"></ul>
  </page>

  <page id="rules-node-item" data-owner="rules-node">
    <h1>
      <span lang="ru">Элементы узлов</span>
      <span lang="en">Node items</span>
    </h1>
    <p lang="ru">
      Каждый <a data-ref="node">узел</a> состоит из одного или нескольких <a data-ref="node-item">элементов узлов</a>. 
      Ими обычно являются атомы химических элементов, но есть и другие варианты.
    </p>
    <p lang="en">
      Each <a data-ref="node">node</a> consists of one or more <a data-ref="node-item">node items</a>. 
      These are usually atoms of chemical elements, but there are other options.
    </p>
    <table style="max-width: 95vw;">
      <tr>
        <th><span lang="ru">Элемент узла</span><span lang="en">Node item</span></th>
        <th><span lang="ru">Назначение</span><span lang="en">Purpose</span></th>
        <th><span lang="ru">Примеры</span><span lang="en">Examples</span></th>
      </tr>
      <tr>
        <td><span lang="ru">Атом</span><span lang="en">Atom</span></td>
        <td>
          <span lang="ru">То есть, символ любого элемента из периодической системы.</span>
          <span lang="en">That is, the symbol of any element from the periodic table.</span>
        </td>
        <td>
          <div class="two-col-table">
            <code class="chem-code">Li2SO4</code>
            <div class="echem-formula">Li2SO4</div>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <span lang="ru">Специальные изотопы</span>
          <span lang="en">Special isotopes</span>
        </td>
        <td>
          <span lang="ru">Их всего два: <code>D</code> &mdash; Дейтерий и <code>T</code> &mdash; Тритий.</span>
          <span lang="en">There are only two of them: <code>D</code> &mdash; Deuterium and <code>T</code> &mdash; Tritium.</span>
        </td>
        <td>
          <div class="two-col-table nowrap-childs">
            <code class="chem-code"><em>D</em> + <em>T</em> -&gt; {n} + $M(4)He</code>
            <div class="echem-formula">$itemColor(var(--select-color))D + T$itemColor() -&gt; {n} + $M(4)He</div>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <span lang="ru">Абстрактный элемент</span>
          <span lang="en">Abstract element</span>
        </td>
        <td>
          <span lang="ru">
          Иногда бывает нужно использовать не определённый химический элемент, а обозначение функциональной группы.
          Для этого в фигурных скобках можно указать нужное обозначение.<br />
          Если в формуле появляется хотя бы один абстрактный элемент, то вся формула считается 
          <a data-ref="abs-formula">абстрактной</a>. 
          Функциональность таких формул снижается. Например, для них нельзя вычислить массу.
          </span>
          <span lang="en">
            Sometimes it is necessary to use not a specific chemical element, but a designation of a functional group. 
            For this purpose, the required designation can be specified in curly brackets.<br /> 
            If at least one abstract element appears in a formula, the entire formula is considered <a data-ref="abs-formula">abstract</a>. 
            The functionality of such formulas is reduced. For example, mass cannot be calculated for them.            
          </span>
        </td>
        <td>
          <div class="two-col-table">
            <code class="chem-code"><em>{M}</em>2SO4</code>
            <div class="echem-formula">$itemColor1(var(--select-color)){M}2SO4</div>
            <code class="chem-code"><em>{R^1}</em>-O-<em>{R^2}</em></code>
            <div class="echem-formula">$itemColor1(var(--select-color)){R^1}-O-$itemColor1(var(--select-color)){R^2}</div>
          </div>
        </td>
      </tr>
      <tr>
        <td><span lang="ru">Радикал</span><span lang="en">Radical</span></td>
        <td>
          <span lang="ru">
          Описание радикала выглядит точно так же, как абстрактный элемент - аббревиатура в фигурных скобках.
          Разница в том, что только определённые аббревиатуры воспринимаются как радикалы. 
          Их список есть в <a href="?p=ref-radical">справочнике</a>.<br />
          Основное отличие радикала от абстрактного элемента - формула с радикалом не становится абстрактной. 
          Для неё правильно считается атомная масса.
        </span>
        <span lang="en">
          The description of a radical looks exactly the same as an abstract element - an abbreviation in curly brackets. 
          The difference is that only certain abbreviations are perceived as radicals. 
          Their list is in the <a href="?p=ref-radical">reference</a>.<br /> 
          The main difference between a radical and an abstract element is that a formula with a radical does not become abstract. 
          The atomic mass is calculated correctly for it.
        </span>
        </td>
        <td>
          <div class="two-col-table">
            <code class="chem-code"><em>Et</em>OH = C2H5OH</code>
            <div class="echem-formula">$itemColor1(var(--select-color))EtOH = C2H5OH</div>
            <code class="chem-code"><em>Me2</em>O = CH3OCH3</code>
            <div class="echem-formula">$itemColor1(var(--select-color))Me2O = CH3OCH3</div>
          </div>
        </td>
      </tr>
      <tr>
        <td><span lang="ru">Комментарий</span><span lang="en">Comment</span></td>
        <td>
          <span lang="ru">
            Бывает необходимость снабдить какие-то части формулы комментариями. Комменарий обозначается двойными кавычками.
            <br />В отличие от абстрактных элементов, комментарий не делает формулу абстрактной.
          </span>
          <span lang="en">
            Sometimes it is necessary to provide some parts of a formula with comments. A comment is indicated by double quotes.<br />
            Unlike abstract elements, a comment does not make a formula abstract.
          </span>
        </td>
        <td>
          <div class="two-col-table">
            <code class="chem-code">{M}2SO4<em>&quot;, M=Li,Na,K&quot;</em></code>
            <div class="echem-formula">{M}2SO4&quot;, M=Li,Na,K&quot;</div>
            <code class="chem-code">GeH4 + 2H2O -> <br />GeO2<em>"|v"</em> + 4H2<em>"|^"</em></code>
            <div class="echem-formula">GeH4 + 2H2O -> GeO2"|v" + 4H2"|^"</div>
          </div>
        </td>
      </tr>
      <tr>
        <td><span lang="ru">Запятая</span><span lang="en">Comma</span></td>
        <td>
          <span lang="ru">
            Используется для формул минералов с непостоянным составом. 
            Превращает формулу в <a data-ref="abs-formula">абстрактную</a>
          </span>
          <span lang="en">
            The comma is used for formulas of minerals with variable composition. 
            It turns the formula into an <a data-ref="abs-formula">abstract</a> one.
          </span>
        </td>.
        <td>
          <div class="two-col-table">
            <code class="chem-code">(Fe,Mn)WO4</code>
            <div class="echem-formula">(Fe,Mn)WO4</div>
            <code class="chem-code">Ca(Mg,Fe)[CO3]2</code>
            <div class="echem-formula">Ca(Mg,Fe)[CO3]2</div>
          </div>
        </td>
      </tr>
    </table>
  </page>

  <page id="rules-node-item-props" data-owner="rules-node">
    <h1>
      <span lang="ru">Возможности элементов узлов</span>
      <span lang="en">Features of node items</span>
    </h1>
    <p></p>
    <h2>
      <span lang="ru">Числовой коэффициент</span>
      <span lang="en">Numerical coefficient</span>
    </h2>
    <p lang="ru">Самый типичный случай - целое число после элемента.</p>
    <p lang="en">The most typical case is an integer after the element.</p>
    <div class="two-col-table" style="display: inline-grid;">
      <code class="chem-code">{R}2SO4</code>
      <div class="echem-formula">{R}2SO4</div>
    </div>
    <h2>
      <span lang="ru">Абстрактный коэффициент</span>
      <span lang="en">Abstract coefficient</span>
    </h2>
    <p lang="ru">Записывается сразу после элемента в одинарных кавычках.</p>
    <p lang="en">The abstract coefficient is written immediately after the element in single quotes.</p>
    <p lang="ru">Так же может употребляться для эмпирических формул минералов.</p>
    <p lang="en">It can also be used for empirical formulas of minerals.</p>
    <div class="two-col-table" style="display: inline-grid;">
      <code class="chem-code">C'n'H'2n+2'</code>
      <div class="echem-formula">C'n'H'2n+2'</div>
      <code class="chem-code">Fe(OH)'3-x'O'x/2'</code>
      <div class="echem-formula">Fe(OH)'3-x'O'x/2'</div>
      <code class="chem-code">(Na'0,88'Ca'0,1'K'0,02')[(Si'1,95'Al'0,05')'2,0'O6]</code>
      <div class="echem-formula">(Na'0,88'Ca'0,1'K'0,02')[(Si'1,95'Al'0,05')'2,0'O6]</div>
    </div>
    <p lang="ru">
      Если в формуле встречается <a data-ref="abs-coeff">абстрактный коэффициент</a>, 
      то вся формула считается <a data-ref="abs-formula">абстрактной</a>.
    </p>
    <p lang="en">
      If an <a data-ref="abs-coeff">abstract coefficient</a> is found in a formula, 
      the entire formula is considered <a data-ref="abs-formula">abstract</a>.
    </p>
    <h2><span lang="ru">Степень окисления</span><span lang="en">Oxidation state</span></h2>
    <p lang="ru">Записывается как заряд сразу после элемента в круглых скобках. 
      (<a href="?p=ref-charge">Способы описания</a> зарядов перечислены в справочнике)
      Если у элемента есть коэффициент, то записывать их можно в любом порядке.
    </p>
    <p lang="en">
      The oxidation state is written as a charge immediately after the element in parentheses. 
      (<a href="?p=ref-charge">The methods of describing charges</a> are listed in the reference) 
      If the element has a coefficient, then they can be written in any order.
    </p>
    <div class="two-col-table" style="display: inline-grid;">
      <code class="chem-code">K(+1)Mn(+7)O4(-2)</code>
      <div class="echem-formula">K(+1)Mn(+7)O4(-2)</div>
      <code class="chem-code">(N(-3)H4(+1))2S(+6)O4(-2)</code>
      <div class="echem-formula">(N(-3)H4(+1))2S(+6)O4(-2)</div>
      <code class="chem-code">KFe(iii)[Fe(ii)(CN)6]</code>
      <div class="echem-formula">KFe(iii)[Fe(ii)(CN)6]</div>
    </div>
    <h2>
      <span lang="ru">Атомная масса изотопа</span>
      <span lang="en">Atomic mass of isotope</span>
    </h2>
    <p lang="ru">
      Записывается в виде функции <a href="?p=ref-func-M">$M(<i>m</i>)</a>. Функции обсуждаются в следующем разделе
    </p>
    <p lang="en">
      The atomic mass of an isotope is written as a function <a href="?p=ref-func-M">$M(m)</a>. 
      The functions are discussed in the next section.
    </p>
    <div class="two-col-table" style="display: inline-grid;">
      <code class="chem-code">$M(4)He</code>
      <div class="echem-formula">$M(4)He</div>
      <code class="chem-code">$M(235)U</code>
      <div class="echem-formula">$M(235)U</div>
    </div>
    <h2>
      <span lang="ru">Атомный номер и масса изотопа</span>
      <span lang="en">Atomic number and mass of the isotope</span>
    </h2>
    <p lang="ru">
      Также известно как <a href="https://en.wikipedia.org/wiki/Isotope#Notation" target="_blank">AZE-нотация</a>. 
      Записывается функцией <a href="?p=ref-func-nM">$nM(<i>m</i>[,<i>n</i>])</a>.
    </p>
    <p lang="en">
      Also known as <a href="https://en.wikipedia.org/wiki/Isotope#Notation" target="_blank">AZE notation</a>. 
      It written with the function <a href="?p=ref-func-nM">$nM(m[,n])</a>.
    </p>
    <div class="two-col-table" style="display: inline-grid;">
      <code class="chem-code">$nM(232)Th + $nM(1,0){n} -&gt; $nM(233)Th </code>
      <div class="echem-formula">$nM(232)Th + $nM(1,0){n} -&gt; $nM(233)Th </div>
    </div>
    <h2>
      <span lang="ru">Структуры Льюиса</span>
      <span lang="en">Lewis structures</span>
    </h2>
    <p lang="ru">Описываются функцией <a href="?p=ref-func-dots">$dots()</a></p>
    <p lang="en"><a href="https://en.wikipedia.org/wiki/Lewis_structure" target="_blank">Lewis structures</a> 
      are described by the <a href="?p=ref-func-dots">$dots()</a> function.
    </p>
    <div class="two-col-table" style="display: inline-grid;">
      <code class="chem-code">H$dots(!)OH</code>
      <div class="echem-formula">H$dots(!)OH</div>
      <code class="chem-code">H-$dots(TB)O-H</code>
      <div class="echem-formula">H-$dots(TB)O-H</div>
    </div>
  </page>

  <page id="rules-func" data-owner="rules-node">
    <h1>
      <span lang="ru">Функции CharChem</span>
      <span lang="en">CharChem functions</span>
    </h1>
    <p lang="ru">
      Так как у химических формул может быть довольно много всяких возможностей, 
      то не для всех получается придумать какие-то особые синтаксические конструкции.
      Поэтому для таких возможностей, которые нужны не слишком часто, есть универсальная конструкция, 
      которая называется "функция". (Термин заимствован не из математики, а из языков программирования.)
    </p>
    <p lang="en">
      Since chemical formulas can have quite a lot of different features, 
      it is not possible to come up with some special syntactic constructions for all of them. 
      Therefore, for such featutes that are not needed too often, there is a universal construction called a "function". 
      (The term is borrowed not from mathematics, but from programming languages.)
    </p>
    <p lang="ru">
      Функция всегда начинается со знака доллара, затем идёт название, затем параметры в скобках.
      Параметры перечисляются через запятую, без пробелов.
      Скобки указываются обязательно, даже если параметров нет.
    </p>
    <p lang="en">
      A function always starts with a dollar sign, then the name, then the parameters in brackets. 
      The parameters are listed separated by commas, without spaces. 
      Brackets are required, even if there are no parameters.
    </p>
    <p>
      <span lang="ru">В общем виде описание выглядит так:</span>
      <span lang="en">In general, the description looks like this:</span>
      <code>$<i>name</i>(<i>params</i>)</code>
    </p>
    <p lang="ru"><a href="?p=ref-func">Полный список функций</a> есть в справочнике.</p>
    <p lang="en"><a href="?p=ref-func">The full list of functions</a> is in the reference.</p>
    <p lang="ru">
      Функция всегда ставится перед тем объектом, к которому она должна применяться.
      Есть функции, которые действуют только на ближайший объект. 
      А есть такие, которые действуют на все следующие подходящие объекты. 
      Это называется <i>областью действия</i>, которая для каждой функции указана в описании.
    </p>
    <p lang="en">
      A function is always placed before the object it is to be applied to. 
      There are functions that act only on the closest object. 
      And there are those that act on all subsequent suitable objects. 
      This is called the <i>scope</i>, which is specified in the description for each function.
    </p>
    <p lang="ru">
      В предыдущем разделе мы уже видели несколько функций, который действуют на <a data-ref="node-item">элементы узлов</a>.
      Кратко рассмотрим их ещё раз.
    </p>
    <p lang="en">
      In the previous section we have already seen several functions that act on <a data-ref="node-item">node items</a>. 
      Let's briefly review them again.
    </p>
    <table>
      <tr>
        <td><a href="?p=ref-func-M"><span lang="ru">Масса изотопа</span><span lang="en">Isotope mass</span></a></td>
        <td><code class="chem-code">$M(235)U</code></td>
        <td><div class="echem-formula">$M(235)U</div></td>
      </tr>
      <tr>
        <td><a href="?p=ref-func-nM">
          <span lang="ru">Масса и атомный номер</span>
          <span lang="en">Mass and atomic number</span>
        </a></td>
        <td><code class="chem-code">$nM(238)U + $nM(1,0){n} -> $nM(239)U</code></td>
        <td><div class="echem-formula">$nM(238)U + $nM(1,0){n} -> $nM(239)U</div></td>
      </tr>
      <tr>
        <td><a href="?p=ref-func-dots">
          <span lang="ru">Структуры Льюиса</span>
          <span lang="en">Lewis structures</span>
        </a></td>
        <td><code class="chem-code">H-$dots(TB)O-H</code></td>
        <td><div class="echem-formula">H-$dots(TB)O-H</div></td>
      </tr>
    </table>
    <p lang="ru">
      А в следующем разделе представлены <a href="?p=rules-color">цветовые функции</a>.
    </p>
    <p lang="en">
      And the next section presents the <a href="?p=rules-color">color functions</a>.
    </p>
  </page>

  <page id="rules-color" data-owner="rules-node">
    <h1>
      <span lang="ru">Цветовые функции</span>
      <span lang="en">Color functions</span>
    </h1>
    <p lang="ru">В CharChem существует возможность выделять цветами отдельные части формул. Для этого есть несколько функций.</p>
    <p lang="en">CharChem has the ability to highlight individual parts of formulas with colors. There are several functions for this.</p>
    <table>
      <tr>
        <th><span lang="ru">Название</span><span lang="en">Name</span></th>
        <th><span lang="ru">Краткое описание</span><span lang="en">Brief description</span></th>
        <th><span lang="ru">Область действия</span><span lang="en">Scope</span></th>
      </tr>
      <tr>
        <td><a href="?p=ref-func-color">color</a></td>
        <td>
          <span lang="ru">Цвет всех частей формулы, которые следуют за функцией</span>
          <span lang="en">The color of all parts of the formula that follow the function</span>
        </td>
        <td>
          <span lang="ru">До конца формулы. Или до следующей функции $color()</span>
          <span lang="en">Until the end of the formula. Or until the next $color() function.</span>
        </td>
      </tr>
      <tr>
        <td><a href="?p=ref-func-itemColor">itemColor</a></td>
        <td>
          <span lang="ru">Цвет <a data-ref="node-item">элементов узлов</a>, которые следуют за функцией.</span>
          <span lang="en">The color of the <a data-ref="node-item">node items</a> that follow the function.</span>
        </td>
        <td>
          <span lang="ru">До конца формулы. Или до следующей функции $itemColor()</span>
          <span lang="en">Until the end of the formula. Or until the next $itemColor() function.</span>
        </td>
      </tr>
      <tr>
        <td><a href="?p=ref-func-itemColor1">itemColor1</a></td>
        <td>
          <span lang="ru">Цвет следующего <a data-ref="node-item">элемента узла</a>.</span>
          <span lang="en">The color of the next <a data-ref="node-item">node item</a>.</span>
        </td>
        <td>
          <span lang="ru">Только один следующий элемент узла.</span>
          <span lang="en">Only one next node item.</span>
        </td>
      </tr>
      <tr>
        <td><a href="?p=ref-func-atomColor">atomColor</a></td>
        <td>
          <span lang="ru">Цвет атомов, которые следуют за функцией.</span>
          <span lang="en">The color of the atoms that follow the function.</span>
        </td>
        <td>
          <span lang="ru">До конца формулы. Или до следующей функции $atomColor()</span>
          <span lang="en">Until the end of the formula. Or until the next $atomColor() function.</span>
        </td>
      </tr>
      <tr>
        <td><a href="?p=ref-func-atomColor1">atomColor1</a></td>
        <td>
          <span lang="ru">Цвет следующего атома.</span>
          <span lang="en">The color of the next atom.</span>
        </td>
        <td>
          <span lang="ru">Только один следующий атом.</span>
          <span lang="en">Only one next atom.</span>
        </td>
      </tr>
    </table>
    <p lang="ru">Правила <a href="?p=ref-color">описания цветов</a> есть в справочнике</p>
    <p lang="en">The rules for <a href="?p=ref-color">describing colors</a> are in the reference.</p>
    <p lang="ru">
      Самая простая из цветовых функций - color. Всё что за ней следует - окрашивается в указанный цвет.
      А чтобы поменять цвет - надо в нужном месте включить новую функцию color.
    </p>
    <p lang="en">
      The simplest of the color functions is $color. Everything that follows it is painted in the specified color. 
      And to change the color, you need to turn on the new $color function in the right place.
    </p>
    <div class="two-col-table">
      <code class="chem-code">$color(green)2H2 + $color(red)O2 = $color(blue)2H2O</code>
      <div class="echem-formula">$color(green)2H2 + $color(red)O2 = $color(blue)2H2O</div>
    </div>
    <p lang="ru">
      Но в данном примере не очень хорошо выглядит то, что плюс окрашен в зелёный цвет, а равенство - в красный.
      Чтобы вернуть цвет по-умолчанию, используется та же функция, но без параметра: <code>$color()</code>.
    </p>
    <p lang="en">
      But in this example it doesn't look very good that the plus is colored green and the equality is colored red. 
      To return the default color, the same function is used, but without the parameter: <code>$color()</code>.
    </p>
    <div class="two-col-table">
      <code class="chem-code">$color(green)2H2$color() + $color(red)O2$color() = $color(blue)2H2O$color()</code>
      <div class="echem-formula">$color(green)2H2$color() + $color(red)O2$color() = $color(blue)2H2O$color()</div>
    </div>
    <p lang="ru">
      Хотелось бы отметить, почему рекомендуется вызывать именно <code>$color()</code>, 
      а не, например, <code>$color(black)</code>.
    </p>
    <p lang="en">
      I would like to note why it is recommended to call <code>$color()</code>, 
      and not, for example, <code>$color(black)</code>.
    </p>
    <p lang="ru">Дело в том, что внешний вид формул обычно должен соответствовать дизайну того документа, где они используются.
      В следующем примере демонстрируется тёмная тема. Цвет по-умолчанию там белый.
      Именно конструкция <code>$color()</code> восстанавливает тот цвет, который используется по-умолчанию.
    </p>
    <p lang="en">
      The point is that the appearance of formulas should usually match the design of the document where they are used. 
      The following example demonstrates a dark theme. The default color there is white. 
      It is the <code>$color()</code> construct that restores the color that is used by default.
    </p>
    
    <div class="two-col-table">
      <code class="chem-code">2H2 + $color(lightgreen)O2$color() = $color(aqua)2H2O$color()</code>
      <div class="dark-theme">
        <div class="echem-formula">2H2 + $color(lightgreen)O2$color() = $color(aqua)2H2O$color()</div>
      </div>
    </div>
    <h2>
      <span lang="ru">Цвет элементов узла</span>
      <span lang="en">Color of node items</span>
    </h2>
    <p lang="ru">Это функции <code>$itemColor()</code> и <code>$itemColor1()</code>, которые отличаются лишь областью действия.</p>
    <p lang="en">
      These are the <code>$itemColor()</code> and <code>$itemColor1()</code> functions, which differ only in their scope.
    </p>
    <p lang="ru">Они влияют на цвет элементов узлов, включая коэффициент и другие <a href="?p=rules-node-item-props">возможности</a>, ранее перечисленные в одном из разделов.
      Но не влияют на то, что к узлам не относится - химические связи, операции, скобки и т.п.
      А так же не влияют на заряд узла, т.к. он не является элементом узла.
    </p>
    <p lang="en">
      They affect the color of the node items, including the coefficient and other <a href="?p=rules-node-item-props">features</a> 
      previously listed in one of the sections. 
      But they do not affect what does not apply to nodes - chemical bonds, operations, brackets, etc. 
      And they also do not affect the charge of the node, since it is not a node item.
    </p>
    <div class="two-col-table">
      <code class="chem-code">$itemColor(blue)Ca(OH)2 &lt;=&gt; Ca^2+ + 2OH^-</code>
      <div class="echem-formula">$itemColor(blue)Ca(OH)2 &lt;=&gt; Ca^2+ + 2OH^-</div>
      <code class="chem-code">[Pt$itemColor(blue)(NH3)4$itemColor()](NO3)2</code>
      <div class="echem-formula">[Pt$itemColor(blue)(NH3)4$itemColor()](NO3)2</div>
      <code class="chem-code">K2(+1)$itemColor1(magenta)Cr(+6)2O(-2)7</code>
      <div class="echem-formula">K2(+1)$itemColor1(magenta)Cr(+6)2O(-2)7</div>
    </div>
    <p lang="ru">
      Как видно, <code>$itemColor()</code> без параметров прекращает действие ранее указанного цвета.
      Так же как и <code>$color()</code>.
    </p>
    <p lang="en">
      As you can see, <code>$itemColor()</code> without parameters cancels the previously shown color. 
      Same as <code>$color()</code>.
    </p>
    <h2><span lang="ru">Цвет атомов</span><span lang="en">Color of atoms</span></h2>
    <p lang="ru">Это функции <code>$atomColor()</code> и <code>$atomColor1()</code>, которые отличаются лишь областью действия.</p>
    <p lang="en">These are the <code>$atomColor()</code> and <code>$atomColor1()</code> functions, which differ only in their scope.</p>
    <p lang="ru">
      Они влияют только на атомы. То есть, на такие элементы узла, которые представлены символами химических элементов из 
      периодической системы: H, He, Li и т.д.</p>
    <p lang="en">
      They affect only atoms. That is, such node items that are represented by symbols of chemical elements from 
      the periodic table: H, He, Li, etc.
    </p>
    <div class="two-col-table">
      <code class="chem-code">$atomColor(blue)Ca(OH)2 &lt;=&gt; Ca^2+ + 2OH^-</code>
      <div class="echem-formula">$atomColor(blue)Ca(OH)2 &lt;=&gt; Ca^2+ + 2OH^-</div>
      <code class="chem-code">[Pt$atomColor(blue)(NH3)4$atomColor()](NO3)2</code>
      <div class="echem-formula">[Pt$atomColor(blue)(NH3)4$atomColor()](NO3)2</div>
      <code class="chem-code">K2(+1)$atomColor1(magenta)Cr(+6)2O(-2)7</code>
      <div class="echem-formula">K2(+1)$atomColor1(magenta)Cr(+6)2O(-2)7</div>
    </div>
  </page>

  <page id="rules-node-charge" data-owner="rules-node">
    <h1>
      <span lang="ru">Заряд узла</span>
      <span lang="en">Node charge</span>
    </h1>
    <p lang="ru">Типичная ситуация, где требуется заряд узла - формулы анионов и катионов.</p>
    <p lang="en">A typical situation where a node charge is required is the formulas of anions and cations.</p>
    <div class="two-col-table">
      <code class="chem-code">3H^+ + PO4^3- &lt;=&gt; 2H^+ + HPO4^2-</code>
      <div class="echem-formula">3H^+ + PO4^3- &lt;=&gt; 2H^+ + HPO4^2-</div>
    </div>
    <p lang="ru">
      Заряд узла начинается со знака <code>^</code> после описания узла. 
      В некоторых языках программирования так обозначается возведение в степень. 
      Да и сам вид такого значка как бы говорит о том, что следующие символы должны располагаться выше.
    </p>
    <p lang="en">
      The node charge starts with the <code>^</code> sign after the node description. 
      In some programming languages, this is how raising to a power is denoted. 
      And the very appearance of such a symbol seems to indicate that the following symbols should be located above.
    </p>
    <p lang="ru">Существует несколько способов <a href="?p=ref-charge">описания заряда</a>, которые перечислены в справочнике.</p>
    <p lang="en">There are several ways to <a href="?p=ref-charge">describe charge</a>, which are listed in the reference.</p>
    <h2>
      <span lang="ru">Изменение положения заряда</span>
      <span lang="en">Changing the position of the charge</span>
    </h2>
    <p lang="ru">Иногда бывают ситуации, когда нужно вывести заряд не справа, а слева. 
      Для этого достаточно поставить символ <code>`</code> 
      <a href="?p=ref-grave">(обратный апостроф)</a> перед знаком <code>^</code>.
    </p>
    <p lang="en">
      Sometimes there are situations when you need to output the charge not from the right, but from the left. 
      To do this, simply put the symbol <code>`</code> <a href="?p=ref-grave">(backtick)</a> before the <code>^</code> sign.
    </p>
    <div class="two-col-table" style="display: inline-grid;">
      <code class="chem-code">Mg`^+2</code>
      <div class="echem-formula">Mg`^+2</div>
    </div>
    <p lang="ru">Существует и боле сложный вариант при помощи функции <a href="?p=ref-func-pos"><code>$pos</code></a>.
      Но он бывает нужен довольно редко.
    </p>
    <p lang="en">
      There is a more complex option using the <a href="?p=ref-func-pos"><code>$pos</code></a> function. 
      But it is rarely needed.
    </p>
  </page>

  <page id="rules-text" data-owner="rules-node">
    <h1>
      <span lang="ru">Текстовые возможности</span>
      <span lang="en">Text features</span>
    </h1>
    <p lang="ru">
      Текстовые возможности применимы к таким элементам узла как комментарии и <a data-ref="abs-item">абстрактные элементы</a>. 
      А так же к <a data-ref="op">операциям</a>.
    </p>
    <p lang="en">
      Text capabilities apply to node items such as comments and <a data-ref="abs-item">abstract elements</a>, 
      as well as to <a data-ref="op">operations</a>.
    </p>
    <p lang="ru">CharChem не предназначен для вывода сложных текстов. Предполагается, что комментарии будут короткие и без какого-то сложного форматирования</p>
    <p lang="en">CharChem is not intended for displaying complex texts. Comments are expected to be short and without any complex formatting.</p>
    <h2>
      <span lang="ru">Специальные символы</span>
      <span lang="en">Special characters</span>
    </h2>
    <p lang="ru">Есть несколько "магических" сочетаний для часто используемых специальных символов</p>
    <p lang="en">There are several "magic" combinations for commonly used special characters.</p>
    <table>
      <tr>
        <th><span lang="ru">Описание</span><span lang="en">Description</span></th>
        <th><span lang="ru">Исходное обозначение</span><span lang="en">Original designation</span></th>
        <th><span lang="ru">Выводимый результат</span><span lang="en">Output result</span></th>
      </tr>
      <tr>
        <td><span lang="ru">Градус</span><span lang="en">Degree</span></td><td><code>^o</code></td><td>°</td>
      </tr>
      <tr>
        <td><span lang="ru">Стрелка вверх</span><span lang="en">Up arrow</span></td>
        <td><code>|^</code> <span lang="ru">или</span><span lang="en">or</span> <code>ArrowUp</code></td>
        <td>↑</td>
      </tr>
      <tr>
        <td><span lang="ru">Стрелка вниз</span><span lang="en">Down arrow</span></td>
        <td><code>|v</code> <span lang="ru">или</span><span lang="en">or</span> <code>ArrowDown</code></td>
        <td>↓</td></tr>
    </table>
    <p lang="ru">Примеры</p>
    <p lang="en">Examples</p>
    <div class="two-col-table" style="display: inline-grid;">
      <code class="chem-code">GeS2 + 2H2O &quot;100°C&quot;--&gt; GeO2&quot;|v&quot; + 2H2S&quot;|^&quot;</code>
      <div class="echem-formula">GeS2 + 2H2O &quot;100°C&quot;--&gt; GeO2&quot;|v&quot; + 2H2S&quot;|^&quot;</div>
    </div>
    <h2>
      <span lang="ru">Греческие буквы</span>
      <span lang="en">Greek letters</span>
    </h2>
    <p lang="ru">В комментариях и в <a data-ref="abs-item">абстрактных элементах</a> можно использовать греческие буквы. 
      Для этого нужно ввести название буквы в квадратных скобках.</p>
    <p lang="en">
      Greek letters can be used in comments and <a data-ref="abs-item">abstract items</a> by entering the letter name in square brackets.
    </p>
    <p lang="ru">Полный список <a href="?p=ref-greek">греческих букв</a> есть в справочнике.</p>
    <p lang="en">A complete list of <a href="?p=ref-greek">Greek letters</a> is available in the reference.</p>
    <div class="two-col-table" style="display: inline-grid;">
      <code class="chem-code">$nM(27)Al + {[gamma]} -&gt; $nM(27)Al"*"</code>
      <div class="echem-formula">$nM(27)Al + {[gamma]} -&gt; $nM(27)Al"*"</div>
      <code class="chem-code">C + H2O "[Delta]"-> CO + H2</code>
      <div class="echem-formula">C + H2O "[Delta]"-> CO + H2</div>
    </div>
    <h2>
      <span lang="ru">Надстрочные и подстрочные символы</span>
      <span lang="en">Superscript and subscript characters</span>
    </h2>
    <p lang="ru">
      Надстрочный символ следует после <code>^</code>, подстрочный - после <code>_</code>.
      Если нужно не один, а несколько символов, то они заключаются в фигурные скобки.
    </p>
    <p lang="en">
      The superscript symbol comes after <code>^</code>, the subscript symbol comes after <code>_</code>. 
      If you need more than one symbol, they are enclosed in curly brackets.
    </p>
    <div class="two-col-table" style="display: inline-grid;">
      <code class="chem-code">{R^A} {R^ABC} {R^{ABC}}</code>
      <div class="echem-formula">{R^A} {R^ABC} {R^{ABC}}</div>
      <code class="chem-code">{R_A} {R_ABC} {R_{ABC}}</code>
      <div class="echem-formula">{R_A} {R_ABC} {R_{ABC}}</div>
    </div>
    <h2>
      <span lang="ru">Цвет текста</span>
      <span lang="en">Text color</span>
    </h2>
    <p lang="ru">
      Обсуждавщиеся ранее <a href="?p=rules-color">цветовые функции</a> могут указывать цвет только для всего текстового элемента.<br />
      Но если нужно менять цвета внутри текста, то нужно использовать конструкцию <code>{\color{<i>код-цвета</i>}текст}</code>.<br />
      Возможные <a href="?p=ref-color">коды цветов</a> перечислены в справочнике.
    </p>
    <p lang="en">
      The <a href="?p=rules-color">color functions</a> discussed earlier can only specify a color for the entire text element.<br />
      But if you need to change colors within the text, you need to use the <code>{\color{<i>color-code</i>}text}</code> construct.<br />
      Possible <a href="?p=ref-color">color codes</a> are listed in the reference.
    </p>
    <div class="two-col-table" style="display: inline-grid;">
      <code class="chem-code">-"AB{\color{red}CD}EF"</code>
      <div class="echem-formula">-"AB{\color{red}CD}EF"</div>
    </div>
    <p lang="ru">Можно использовать <code>\color{<i>код-цвета</i>}</code>, если нужно указать цвет для всего оставшегося текста.</p>
    <p lang="en">You can use <code>\color{<i>color-code</i>}</code> if you want to specify a color for all remaining text.</p>
    <div class="two-col-table" style="display: inline-grid;">
      <code class="chem-code">-"AB\color{red}CDEF"</code>
      <div class="echem-formula">-"AB\color{red}CDEF"</div>
    </div>
    <p lang="ru"><b>PS.</b> Синтаксис для цвета и надстрочных/подстрочных символов заимствован из достаточно известной системы 
      <a href="https://ru.wikipedia.org/wiki/TeX" target="_blank">TeX</a></p>
    <p lang="en">
      <b>P.S.</b> The syntax for color and superscript/subscript characters is borrowed from the well-known 
      <a href="https://en.wikipedia.org/wiki/TeX" target="_blank">TeX</a> system.
    </p>
    <h2>
      <span lang="ru">Локализованные фразы</span>
      <span lang="en">Localized phrases</span>
    </h2>
    <p lang="ru">Система CharChem предоставляет возможность использовать разные языки. Для этого существует словарь.
      Его можно пополнять программно. Но в нём уже есть ряд зарезервированных фраз.
    </p>
    <p lang="en">
      The CharChem system provides the ability to use different languages ​​using a special dictionary. 
      It can be replenished programmatically. But it already contains a number of reserved phrases.
    </p>
    <p lang="ru">Чтобы в тексте использовать фразу на текущем языке, нужно указать ключ фразы в 
      <a href="?p=ref-grave">обратных апострофах</a>.
    </p>
    <p lang="en">To use a phrase in the current language in the text, you must specify the phrase key in 
      <a href="?p=ref-grave">backticks</a>.</p>
    <p lang="ru">Следующие примеры демонстрируют вывод на языке пользователя названия химического элемента и агрегатные состояния реагентов</p>
    <p lang="en">The following examples demonstrate the output in the user's language of the name of a chemical element and the states of aggregation of reagents.</p>
    <div class="two-col-table" style="display: inline-grid;">
      <code class="chem-code">H-Br$color(gray)|h"`Br`"</code>
      <div class="echem-formula">H-Br$color(gray)|h"`Br`"</div>
      <code class="chem-code">2Na"`(s)`" + Cl2"`(g)`"</code>
      <div class="echem-formula">2Na"`(s)`" + Cl2"`(g)`"</div>
    </div>
  </page>

  <page id="rules-hydrates" data-owner="rules">
    <h1>
      <span lang="ru">Гидраты, сольваты и аддукты</span>
      <span lang="en">Hydrates, solvates and adducts</span>
    </h1>
    <p lang="ru">Записываются при помощи знака <code>*</code>, без пробелов</p>
    <p lang="en">They are written using the <code>*</code> sign, without spaces.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">CuSO4*5H2O</code>
      <div class="echem-formula">CuSO4*5H2O</div>
      <code class="chem-code">LiCl*4CH3OH</code>
      <div class="echem-formula">LiCl*4CH3OH</div>
      <code class="chem-code">K2O*Al2O3*'x'SiO2*'у'H2O</code>
      <div class="echem-formula">K2O*Al2O3*'x'SiO2*'у'H2O</div>
    </div>
    <h2>
      <span lang="ru">Первый коэффициент</span>
      <span lang="en">First coefficient</span>
    </h2>
    <p lang="ru">Коэффициент перед реагентом всегда относится ко всему реагенту.</p>
    <p lang="en">The coefficient in front of a reagent always refers to the entire reagent.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">2KMnO4 + 10KCl + 8H2SO4 = 5Cl2 + 2MnSO4 + 6K2SO4 + 8H2O</code>
      <div class="echem-formula">2KMnO4 + 10KCl + 8H2SO4 = 5Cl2 + 2MnSO4 + 6K2SO4 + 8H2O</div>
    </div>
    <p lang="ru">Поэтому, если нужен коэффициент для первого сегмента, то нужно брать реагент в скобки.</p>
    <p lang="en">Therefore, if you need a coefficient for the first segment, you need to put the reagent in brackets.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">[2Ca(OH)2*3Mg(OH)2]</code>
      <div class="echem-formula">[2Ca(OH)2*3Mg(OH)2]</div>
    </div>
    <p lang="ru">В таком виде 2 относится только к Ca(OH)<sub>2</sub>. А без скобок это был бы коэффициент всего реагента.</p>
    <p lang="en">In this form, 2 refers only to Ca(OH)<sub>2</sub>. Without the brackets, it would be the coefficient of the entire reagent.</p>
  </page>

  <page id="rules-ops" data-owner="rules">
    <h1>
      <span lang="ru">Химические операции</span>
      <span lang="en">Chemical operations</span>
    </h1>
    <p lang="ru"><a href="?p=ref-ops">Полный список операций</a> представлен в справочнике.</p>
    <p lang="en">A complete <a href="?p=ref-ops">list of operations</a> is presented in the reference.</p>
    <p lang="ru">Операции принято использовать для разделения реагентов в химических реакциях.</p>
    <p lang="en">Operations are commonly used to separate reagents in chemical reactions.</p>
    <p lang="ru">Перед кодом операции и сразу после него без пробела в кавычках можно указать подписи. 
      Для этих подписей действуют те же <a href="?p=rules-text">текстовые возможности</a>, 
      которые рассматривались в предыдущем разделе.</p>
    <p lang="en">
      Before and immediately after the operation code, without a space, you can specify text labels in quotation marks. 
      The same <a href="?p=rules-text">text features</a> that were discussed in the previous section apply to these labels.
    </p>
    <div class="two-col-table">
      <code class="chem-code">
        C + 2S &quot;t^oC&quot;--&gt; CS2
      </code>
      <div class="echem-formula">
        C + 2S &quot;t^oC&quot;--&gt; CS2
      </div>
      <code class="chem-code">
        CCl3CO2H &quot;Na(Hg)&quot;--&gt;&quot;H_3O^+&quot; CH3CO2H
      </code>
      <div class="echem-formula">
        CCl3CO2H &quot;Na(Hg)&quot;--&gt;&quot;H_3O^+&quot; CH3CO2H
      </div>
      <code class="chem-code">
        $C()H/`|$C()O|\NH2 &quot;\color{red}160-120 ^oC&quot;--|&gt;&quot;\color{blue}71%&quot; $C()`|$C()N//\|_qNH_q_qqN_q|`/`\\
      </code>
      <div class="echem-formula">
        $C()H/`|$C()O|\NH2 &quot;\color{red}160-120 ^oC&quot;--|&gt;&quot;\color{blue}71%&quot; $C()`|$C()N//\|_qNH_q_qqN_q|`/`\\
      </div>
    </div>
  </page>

  <!-- Химические связи -->
  <page id="rules-bonds" data-owner="rules">
    <h1>
      <span lang="ru">Химические связи</span>
      <span lang="en">Chemical bonds</span>
    </h1>
    <p lang="ru">Мы уже рассмотрели относительно простые возможности CharChem. Пора переходить к более серьёзным формулам.</p>
    <p lang="en">We have already looked at the relatively simple capabilities of CharChem. It is time to move on to more serious formulas.</p>
    <p lang="ru">Существует довольно много всяких способов для описания химических связей.</p>
    <p lang="ru">There are quite a few different ways to describe chemical bonds.</p>
    <ul class="contents" data-owner="rules-bonds"></ul>
  </page> 

  <page id="rules-bonds-short" data-owner="rules-bonds">
    <h1>
      <span lang="ru">Краткие описания химических связей</span>
      <span lang="en">Short descriptions of chemical bonds</span>
    </h1>
    <p lang="ru">Начнём с самого простого способа описания химических связей.</p>
    <p lang="en">Let's start with the simplest way to describe chemical bonds.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">CH3-CH2-OH</code>
      <div class="echem-formula">CH3-CH2-OH</div>
    </div>
    <p lang="ru">Здесь одинарные ковалентные связи между атомами углерода и кислорода указаны при помощи знака "минус".</p>
    <p lang="en">Here, single covalent bonds between carbon and oxygen atoms are indicated by a "minus" sign.</p>
    <p lang="ru">Тот же принцип можно использовать для двойных и тройных связей:</p>
    <p lang="en">The same principle can be used for double and triple bonds:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">H2C=CH-CH3</code>
      <div class="echem-formula">H2C=CH-CH3</div>
      <code class="chem-code">HC%C-CH3</code>
      <div class="echem-formula">HC%C-CH3</div>
    </div>
    <p lang="ru">Здесь знак "равно" используется для двойных связей. А вот для тройных - знак процента.</p>
    <p lang="en">Here the "equal" sign is used for double bonds. But for triple bonds - the percent sign.</p>
    <p lang="ru">Последовательность узлов, соединённых химическими связями будем называть <i>цепочками</i>.</p>
    <p lang="en">A sequence of nodes connected by chemical bonds will be called a <i>chains</i>.</p>
    <p lang="ru">Теперь перейдём от горизонтальных цепочек к вертикальным.</p>
    <p lang="en">Now let's move from horizontal chains to vertical ones.</p>
    <div class="two-col-table inline-grid" style="grid-template-columns: auto auto auto;">
      <code class="chem-code">CH3|CH2|OH</code>
      <code class="chem-code">CH2||CH|CH3</code>
      <code class="chem-code">CH|||C|CH3</code>
      <div class="echem-formula">CH3|CH2|OH</div>
      <div class="echem-formula">CH2||CH|CH3</div>
      <div class="echem-formula">CH|||C|CH3</div>
    </div>
    <p lang="ru">Для этого понадобилось заменить минус на вертикальную черту, знак "равно" - на две вертикальные черты, а процент - на три.</p>
    <p lang="en">To do this, it was necessary to replace the minus with a vertical bar, the "equal" sign with two vertical bars, and the percentage with three.</p>
    <p lang="ru">Следующий шаг - замена вертикальной черты на наклонную. Точнее символы "слэш" или "обратный слэш".</p>
    <p lang="en">The next step is to replace the vertical bar with a slash. More precisely, the "slash" or "backslash" symbols.</p>
    <div class="two-col-table inline-grid" style="grid-template-columns: auto auto auto;">
      <code class="chem-code">H3C\O\CCl3</code>
      <code class="chem-code">H2C\\N\CH3</code>
      <code class="chem-code">HC\\\C\CH3</code>
      <div class="echem-formula">H3C\O\CCl3</div>
      <div class="echem-formula">H2C\\N\CH3</div>
      <div class="echem-formula">HC\\\C\CH3</div>
      <code class="chem-code">H3C/O/CCl3</code>
      <code class="chem-code">H2C//N/CH3</code>
      <code class="chem-code">HC///C/CH3</code>
      <div class="echem-formula">H3C/O/CCl3</div>
      <div class="echem-formula">H2C//N/CH3</div>
      <div class="echem-formula">HC///C/CH3</div>
    </div>
    <p>
      <span lang="ru">Таким образом, мы можем использовать следующие символы для описания химических связей:</span>
      <span lang="en">Thus, we can use the following symbols to describe chemical bonds:</span>
      <code>- = % | \ /</code></p>
    <p lang="ru">Такие описания в CharChem называются <a data-ref="bond-short">краткими связями</a>.</p>
    <p lang="en">Such descriptions are called <a data-ref="bond-short">short bonds</a> in CharChem.</p>
    <p lang="ru">Но пока мы можем строить цепочки только в 4 направления. Этого недостаточно для структурных формул.</p>
    <p lang="en">But for now we can only build chains in 4 directions. This is not enough for structural formulas.</p>
    <p lang="ru">Однако, достаточно добавить перед описанием символ <a href="?p=ref-grave">обратного апострофа</a>, чтобы поменять направление на противоположное.</p>
    <p lang="en">However, it is enough to add a <a href="?p=ref-grave">backtick</a> before the description to change the direction to the opposite.</p>
    <div class="two-col-table inline-grid" style="grid-template-columns: auto auto auto;">
      <code class="chem-code">CH3`\O`\Cl3C</code>
      <code class="chem-code">CH2`\\N`\H3C</code>
      <code class="chem-code">CH`\\\C`\H3C</code>
      <div class="echem-formula">CH3`\O`\Cl3C</div>
      <div class="echem-formula">CH2`\\N`\H3C</div>
      <div class="echem-formula">CH`\\\C`\H3C</div>
      <code class="chem-code">CH3`/O`/Cl3C</code>
      <code class="chem-code">CH2`//N`/H3C</code>
      <code class="chem-code">CH`///C`/H3C</code>
      <div class="echem-formula">CH3`/O`/Cl3C</div>
      <div class="echem-formula">CH2`//N`/H3C</div>
      <div class="echem-formula">CH`///C`/H3C</div>
    </div>
    <p lang="ru">Обратите внимание, что связи рисуются в обратном направлении, но описания узлов всегда идут слева направо.
      Поэтому в них иногда приходится переставлять местами элементы, чтобы формула выглядела лучше.
    </p>
    <p lang="en">
      Note that the bonds are drawn in the opposite direction, but the node items always go from left to right. 
      So sometimes you have to rearrange the items to make the formula look better.
    </p>
    <p lang="ru">Теперь мы можем строить цепочки, используя 8 направлений.</p>
    <p lang="en">Now we can build chains using 8 directions.</p>
    <div class="two-col-table inline-grid">
      <div class="two-col-table inline-grid" style="grid-template-columns: auto auto auto;">
        <code>{A}`\{B}</code>
        <code>{A}`|{B}</code>
        <code>{A}/{B}</code>
        <code>{A}`-{B}</code>
        <div></div>
        <code>{A}-{B}</code>
        <code>{A}`/{B}</code>
        <code>{A}|{B}</code>
        <code>{A}\{B}</code>
      </div>
      <div class="two-col-table inline-grid" style="grid-template-columns: auto auto auto;">
        <div class="echem-formula">{A}`\{B}</div>
        <div class="echem-formula">{A}`|{B}</div>
        <div class="echem-formula">{A}/{B}</div>
        <div class="echem-formula">{A}`-{B}</div>
        <div></div>
        <div class="echem-formula">{A}-{B}</div>
        <div class="echem-formula">{A}`/{B}</div>
        <div class="echem-formula">{A}|{B}</div>
        <div class="echem-formula">{A}\{B}</div>
      </div>
    </div>
    <h2>
      <span lang="ru">Скелетные формулы</span>
      <span lang="en">Skeletal formulas</span>
    </h2>
    <p lang="ru">Чтобы получить скелетные формулы, можно записывать подряд описания связей без узлов</p>
    <p lang="en">To obtain skeletal formulas, you can write down descriptions of chemical bonds in a row without nodes.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">\/\//</code>
      <div class="echem-formula">\/\//</div>
      <code class="chem-code">/\OH</code>
      <div class="echem-formula">/\OH</div>
    </div>
    <p lang="ru">И вот как выглядит описание формулы бензола</p>
    <p lang="en">And here is what the description of the benzene formula looks like:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">/\\|`//`\`||</code>
      <div class="echem-formula">/\\|`//`\`||</div>
    </div>
    <p lang="ru">Тут стоит отметить, что CharChem понимает, что последняя связь соединяется с первой.</p>
    <p lang="en">It is worth noting here that CharChem understands that the last chemical bond is connected to the first.</p>
    <p lang="ru">Благодаря этому возможен даже такой приём - повторная прорисовка связи поверх существующей. </p>
    <p lang="en">Thanks to this, even such a technique is possible - re-drawing a connection over an existing one.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">|<em>\</em>|`/`\`|/<em>\</em>/</code>
      <div class="echem-formula">|$color(var(--select-color))\$color()|`/`\`|/\/</div>
    </div>
    <p lang="ru">В этом случае две одинарных связи превращаются в одну двойную.</p>
    <p lang="en">In this case, two single bonds are converted into one double bond.</p>
  </page>

  <page id="rules-coords" data-owner="rules-bonds">
    <h1>
      <span lang="ru">Система координат и углы</span>
      <span lang="en">Coordinate system and angles</span>
    </h1>
    <p lang="ru">В предыдущем разделе мы познакомились с описанием химических связей. 
      Видно, что они являются просто геометрическими фигурами</p>
    <p lang="en">
      In the previous section we got acquainted with the description of chemical bonds. 
      It is clear that they are simply geometric figures.
    </p>
    <p lang="ru">Вообще, при составлении химических формул больше нужна геометрия, чем химия.</p>
    <p lang="en">In general, when composing chemical formulas, geometry is needed more than chemistry.</p>
    <p lang="ru">Поэтому стоит познакомиться с системой координат, которая используется в CharChem.</p>
    <p lang="en">Therefore, it is worth getting acquainted with the coordinate system used in CharChem.</p>
    <div class="echem-formula">
      $L(2)$color(gray)_(x%w:6,H)_(x-%w,y4,N0)_(x%w,H)_(x-%w,y2,N0)_(x%w,H)_(y-%w,H)_(x-2,y%w,N0)_(y-%w,H)_(x-4,y%w,N0)_(y-%w,H)_(x2,y-1,N0)$color(blue)_(y8,>)@:y(n)<_(x.35,y-.4,N0){&n}>@(y)_(y-1,N0)@y(2)_(y-2,N0)@y(1)_(y-2,N0)@y(0)_(y-2,N0)@y(-1)_(x-3,y2,N0)_(x8,>)@:x(n)<_(x.25,y-.4,N0){&n}>@(x)_(x-1,N0)@x(2)_(x-2,N0)@x(1)_(x-4,N0)@x(-1)$color(black)_(x2)_(A30,W2)_(A90)_(A150)_(A-150)_(A-90)_(A-30)
    </div>
    <p lang="ru">
      Здесь на систему координат наложена формула циклогексана <code>\|`/`\`|/</code>, которая представляет правильный шестиугольник.
    </p>
    <p lang="en">
      Here the formula of cyclohexane <code>\|`/`\`|/</code>, which represents a regular hexagon, is superimposed on the coordinate system.
    </p>
    <p lang="ru">Ось Y направлена вниз. Это может быть непривычно для математоков, но является типичным для машинной графики.</p>
    <p lang="en">The Y axis points downwards. This may be unusual for math majors, but is typical for computer graphics.</p>
    <p lang="ru">Для CharChem стандартными направлениями являются слева направо и сверху вниз.</p>
    <p lang="en">For CharChem, the default directions are left to right and top to bottom.</p>
    <p lang="ru">Начало координат всегда совпадает с первым узлом.</p>
    <p lang="en">The origin always coincides with the first node.</p>
    <p lang="ru">Ещё тут хорошо видно, что стандартная длина химической связи равна единице.</p>
    <p lang="en">It is also clearly visible here that the standard length of a chemical bond is equal to one.</p>
    <p lang="ru">Кроме того, угол между осью X и наклонной связью составляет 30°</p>
    <p lang="en">In addition, the angle between the X axis and the inclined bond is 30°</p>
    <p lang="ru">На следующем изображении можно видеть, что высота шрифта по-умолчанию равна 0.5</p>
    <p lang="en">In the following image you can see that the default font height is 0.5</p>
    <div class="echem-formula" style="font-size: 150%;">
      $color(black)O$color(silver)_(x-1,y-1,N0)_(x3,H)_(x-3,y1,N0)_(x3,H)_(x-3,y1,N0)_(x3,H)_(x-3,y1,N0)_(x3,H)_(x-2,y-2,N0)$color(black)|O--CH2`|CH2`--$color(silver)_(y-2,N0)_(y5,H)_(x1,N0)_(y-5,H)
    </div>
    <p lang="ru">Так как тут узлы содержат текст, то видимая длина химических связей становится короче. 
      Например, вертикальные связи между двумя атомами кислорода и между двумя двумя атомами углерода имеют длину 0.5.</p>
    <p lang="en">
      Since the nodes here contain text, the apparent length of chemical bonds becomes shorter.
      For example, vertical bonds between two oxygen atoms and between two carbon atoms have a length of 0.5.
    </p>
    <p lang="ru">Ширина текстовых узлов зависит от того, какие там используются символы. 
      Это создаёт некоторые трудности, которые мы рассмотрим далее.</p>
    <p lang="en">
      The width of text nodes depends on the characters used there.
      This creates some difficulties, which we will look at next.
    </p>
    <h2><span lang="ru">Углы</span><span lang="en">Angles</span></h2>
    <p lang="ru">На следующем изображении можно видеть какие углы используются для наиболее типичных формул, которые образуют шестиугольные ячейки.</p>
    <p lang="en">In the following image you can see which angles are used for the most typical formulas that form hexagonal cells.</p>
    <div class="echem-formula">
      $L(2)_(A0,&gt;)&quot;0^o&quot;; #1_(A30,&gt;)&quot;3&quot;&quot;0^o&quot;; #1_(A90,&gt;)&quot;90^o&quot;; #1_(A150,&gt;)&quot;15&quot;`&quot;0^o&quot;; #1_(A180,&gt;)&quot;18&quot;`&quot;0^o&quot;; #1_(A-150,&gt;)&quot;-15&quot;`&quot;0^o&quot;; #1_(A-90,&gt;)&quot;-90^o&quot;; #1_(A-30,&gt;)&quot;-3&quot;&quot;0^o&quot;
    </div>
  </page>

  <page id="rules-branch" data-owner="rules-bonds">
    <h1><span lang="ru">Ветвления</span><span lang="en">Branching</span></h1>
    <p lang="ru">Большинство структурных формул не являются простыми цепочками, а содержат ответвления.</p>
    <p lang="en">Most structural formulas are not simple chains but contain branches.</p>
    <p lang="ru">Иногда в литературе можно встретить вот такую формулу ацетона: </p>
    <p lang="en">Sometimes in literature you can find the following formula for acetone:</p>
      <div class="echem-formula">CH3-C(=O)-CH3</div>
    <p lang="ru">(Кстати, это описание формулы совпадает с получаемой формулой.) 
      Здесь скобками обозначено, что атом кислорода не является частью основной цепи.
    </p>
    <p lang="en">
      (By the way, this description of the formula coincides with the resulting formula.)
      Here, the brackets indicate that the oxygen atom is not part of the main chain.
    </p>
    <p lang="ru">Примерно тот же принцип положен в основу веток CharChem. Для этого используются угловые скобки 
      (то есть пара символов <code>&lt; &gt;</code> "меньше" и "больше").
    </p>
    <p lang="en">
      CharChem branches are based on roughly the same principle. 
      For this, angle brackets are used (i.e. a pair of <code>&lt; &gt;</code> "less than" and "greater than" symbols).
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">CH3-C&lt;||O&gt;-CH3</code>
      <div class="echem-formula">CH3-C&lt;||O&gt;-CH3</div>
    </div>
    <p lang="ru">Тут всего лишь произошла замена круглых скобок на угловые, а горизонтальная двойная связь в виде знака = 
      поменялась на вертикальную в виде ||</p>
    <p lang="en">
      Here, all that has happened is that the round brackets have been replaced with angle brackets, 
      and the horizontal double bond in the form of the <code>=</code> sign has been replaced with 
      a vertical one in the form of the <code>||</code> signs.
    </p>
    <p lang="ru">Другими словами, после знака <code>&gt;</code> нужно вернуться к соответствующему знаку <code>&lt;</code> 
      и продолжать цепочку от этого места.</p>
    <p lang="en">
      In other words, after the <code>&gt;</code> sign, you need to return to the corresponding <code>&lt;</code> sign 
      and continue the chain from this place.
    </p>
    <div class="echem-formula">
      CH3-C&quot;&lt;&quot;C:a&quot;||&quot;O_(h)&quot;&gt;&quot;-CH3; 
      #a_(x.3,y-.4,N0){}$color(magenta)_(x1.5,&gt;)_(x.2,N0)_m(y-1)_m(x-2)_(y1,&gt;)_(y0.8,N0)_m(y.8)_m(x2.4)_(y-1,&gt;)
    </div>
    <p lang="ru">Конечно же, ветка может состоять из нескольких узлов, которые образуют боковую цепь. 
      Например, вот так можно описать рацемическую формулу лизина:</p>
    <p lang="en">
      Of course, a branch can consist of several nodes that form a side chain. 
      For example, this is how the racemic formula of lysine can be described:
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">H2N-CH&lt;|CH2|CH2|CH2|CH2|NH2&gt;-COOH</code>
      <div class="echem-formula">H2N-CH&lt;|CH2|CH2|CH2|CH2|NH2&gt;-COOH</div>
    </div>
    <p lang="ru">Более того, можно делать ветки внутри ветки. Например, чтобы изобразить рацемическую формулу валина (2 варианта):</p>
    <p lang="en">Moreover, you can make branches within a branch. For example, to depict the racemic formula of valine (2 options):</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">H2N-CH&lt;|CH&lt;`-H3C&gt;-CH3&gt;-COOH</code>
      <div class="echem-formula">H2N-CH&lt;|CH&lt;`-H3C&gt;-CH3&gt;-COOH</div>
      <code class="chem-code">H2N\&lt;|&lt;`/&gt;\&gt;/COOH</code>
      <div class="echem-formula">H2N\&lt;|&lt;`/&gt;\&gt;/COOH</div>
    </div>
    <p lang="ru">Кроме того, из одного узла можно делать несколько веток. Например, такой вариант формулы D-фруктозы:</p>
    <p lang="en">In addition, several branches can be made from one node. For example, this variant of the D-fructose formula:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">CH2OH|C&lt;=O&gt;|C&lt;-H&gt;&lt;`-HO&gt;|C&lt;-OH&gt;&lt;`-H&gt;|C&lt;-OH&gt;&lt;`-H&gt;|CH2OH</code>
      <div class="echem-formula">CH2OH|C&lt;=O&gt;|C&lt;-H&gt;&lt;`-HO&gt;|C&lt;-OH&gt;&lt;`-H&gt;|C&lt;-OH&gt;&lt;`-H&gt;|CH2OH</div>
    </div>
    <p lang="ru">Рекомендуется выбирать в качестве ветки тот участок, который короче основной цепи. Но это не обязательно.</p>
    <p lang="en">It is recommended to choose as a branch the section that is shorter than the main chain. But this is not necessary.</p>
    <p lang="ru">
      Ещё одной важной особенностью является то, что ветка может сливаться с ранее созданными узлами. 
      Например, если надо изобразить цикл из двух колец, то ветки не нужны. 
      Вот пример, где начинаем цепь из точки А и завершаем в точке B.
    </p>
    <p lang="en">
      Another important feature is that a branch can merge with previously created nodes. 
      For example, if you need to depict a cycle of two rings, then branches are not needed. 
      Here is an example where we start the chain from point A and end at point B.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">{A}|{B}`/`\`|/\/\|`/`\</code>
      <div class="echem-formula">{A}|{B}`/`\`|/\/\|`/`\</div>
    </div>
    <p lang="ru">Но если нужно объединить три цикла, то уже потребуется ветвление.</p>
    <p lang="en">But if you need to combine three cycles, then branching will be required.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">{A}|{B}`/`\`|/\/\{D}|{C}<em>&lt;`/`\&gt;</em>\/`|`\`/</code>
      <div class="echem-formula">{A}|{B}`/`\`|/\/\{D}|{C}$color(var(--select-color))&lt;`/`\$color()&gt;\/`|`\`/</div>
    </div>
    <p lang="ru">Тут цепь начинается в точке А, заканчивается в точке D, но в процессе ветка замыкает средний цикл веткой из С в В</p>
    <p lang="en">Here the chain starts at point A, ends at point D, but in the process the branch closes the middle cycle with a branch from C to B</p>
    <h2>
      <span lang="ru">Альтернативный вариант ветвления</span>
      <span lang="en">Alternative branching option</span>
    </h2>
    <p lang="ru">Одной из главных целей CharChem является использование формул в HTML-документах. 
      Однако, там символы <code>&lt;</code> и <code>&gt;</code> являются служебными, т.к. используются для обозначения тегов.
      Если вставить такое описание формулы в HTML-документ, то это скорее всего приведёт к ошибке.
    </p>
    <p lang="en">
      One of the main purposes of CharChem is to use formulas in HTML documents. 
      However, the <code>&lt;</code> and <code>&gt;</code> symbols are special characters there, as they are used to denote tags. 
      If you insert such a formula description into an HTML document, it will most likely lead to an error.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">-&lt;/&gt;\</code>
      <div class="echem-formula">-&lt;/&gt;\</div>
    </div>
    <p>
      <span lang="ru">
        Чтобы не было ошибок, необходимо экранировать служебные символы. 
        Это значит что в HTML-документе это описание должно быть таким: 
      </span>
      <span lang="en">
        To avoid errors, special characters must be escaped. 
        This means that in an HTML document, this description should be as follows:
      </span>
      <br /><code>-<em>&amp;lt;</em>/<em>&amp;gt;</em>\</code>
    </p>
    <p lang="ru">Конечно, это сильно усложняет ввод формул, если это делается вручную.</p>
    <p lang="en">Of course, this makes entering formulas much more difficult if done manually.</p>
    <p lang="ru">Поэтому можно использовать альтернативную конструкцию ветвления при помощи <code>(*</code> и <code>*)</code></p>
    <p lang="en">Therefore, an alternative branching construct using <code>(*</code> and <code>*)</code> can be used.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">-(*/*)\</code>
      <div class="echem-formula">-(*/*)\</div>
    </div>
    <p lang="ru">То есть <code>(*</code> является точной заменой для <code>&lt;</code>, а <code>*)</code> - для <code>&gt;</code></p>
    <p lang="en">That is, <code>(*</code> is an exact replacement for <code>&lt;</code>, and <code>*)</code> is an exact replacement for <code>&gt;</code>.</p>
    <p lang="ru">
      Но это работает только для ветвлений. Есть и другие ситуации, где требуется использовать служебные символы. 
      Например, для <a data-owner="op">операций</a>: 
    </p>
    <p lang="en">
      But this only works for branches. There are other situations where you need to use service symbols. 
      For example, for <a data-ref="op">operations</a>:
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">H2O &lt;=&gt; H^+ + OH^-</code>
      <div class="echem-formula">H2O &lt;=&gt; H^+ + OH^-</div>
    </div>
    <p lang="ru">Здесь альтернативы нет. Только экранирование.</p>
    <p lang="en">There is no alternative here. Only escaping.</p>
    <p lang="ru">Поэтому рекомендуется набирать описания формул на 
      <a href="http://charchem.org/ru/test" target="_blank">тестовом стенде</a>.
      Там есть специальная возможность: <b>Коды для вставки в документ</b>.<br /> 
      Рекомендуется вставлять описания химических формул именно оттуда, т.к. там уже выполнено экранирование всех специальных символов.
    </p>
    <p lang="en">
      Therefore, it is recommended to type the formula descriptions on the 
      <a href="http://charchem.org/en/test" target="_blank">test stand</a>. 
      There is a special option there: <b>Codes for insertion into the document</b>.<br /> 
      It is recommended to insert the descriptions of chemical formulas from there, because all special characters are already escaped there.
    </p>
  </page>

  <page id="rules-refs" data-owner="rules-bonds">
    <h1>
      <span lang="ru">Нумерация узлов, соединение цепочек, ссылки и метки</span>
      <span lang="en">Node numbering, chain connection, links and labels</span>
    </h1>
    <p lang="ru">Иногда проще разделить сложную структуру на несколько более простых, а затем их соединить.</p>
    <p lang="en">Sometimes it is easier to divide a complex structure into several simpler ones and then connect them.</p>
    <p lang="ru">Например, формулу метана можно представить как пересечение двух цепей.</p>
    <p lang="en">For example, the formula for methane can be represented as the intersection of two chains.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">H-C-H; H|#C|H</code>
      <div class="echem-formula">H-C-H; H|#C|H</div>
    </div>
    <p lang="ru">Первая цепь из трёх узлов <code>H-C-H</code> заканчивается точкой с запятой. После неё можно добавить пробел или перенос строки.</p>
    <p lang="en">The first chain of three nodes <code>H-C-H</code> ends with a semicolon. After that, you can add a space or a line break.</p>
    <p lang="ru">Точка соединения цепей обозначена <code>#C</code>. Такая конструкция называется <i>ссылкой на узел</i>.</p>
    <p lang="en">The connection point of the chains is marked <code>#C</code>. This construction is called a <i>link to node</i>.</p>
    <p lang="ru">Ссылки всегда начинаются со знака решётки, а дальше могут быть разные варианты. 
      В данном случае используется символ углерода, т.к. такой узел уже есть в формуле.</p>
    <p lang="en">
      Links always start with a hash sign, and then there can be different options. 
      In this case, the carbon symbol is used, because such a node is already in the formula.
    </p>
    <p lang="ru">Это работает так: когда в цепи встречается ссылка, то происходит поиск узла среди ранее созданных.
      Затем текущая цепочка соединяется с найденным узлом.
    </p>
    <p lang="en">
      It works like this: when a link is encountered in a chain, a node is searched for among previously created ones. 
      Then the current chain is connected to the found node.
    </p>
    <p lang="ru">Ссылки можно делать только на те узлы, которые уже созданы. То есть, те, которые находятся в тексте описания слева от ссылки.</p>
    <p lang="en">Links can only be made to nodes that have already been created. That is, those that are in the description text to the left of the link.</p>
    <p lang="ru">Сама ссылка узлом не является. То есть, в предыдущем примере формула содержит только один атом углерода. А ссылка всего лишь сообщает, что к нему надо присоединить еще одну цепь.</p>
    <p lang="en">
      The link itself is not a node. That is, in the previous example, the formula contains only one carbon atom. 
      And the link only says that another chain should be attached to it.
    </p>
    <h2>
      <span lang="ru">Номера узлов</span>
      <span lang="en">Node numbers</span>
    </h2>
    <p lang="ru">Но давайте рассмотрим формулу этана, где потребуется три цепочки.</p>
    <p lang="en">But let's look at the formula for ethane, which requires three chains.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">H-C-C-H; H|#2|H; H|#3|H</code>
      <div class="echem-formula">H-C-C-H; H|#2|H; H|#3|H</div>
    </div>
    <p lang="ru">Здесь мы видим две ссылки: <code>#2</code> и <code>#3</code>. 
      Использовать для ссылки символ углерода тут уже нельзя, т.к. это два разных атома углерода.
      Поэтому используются номера узлов.
    </p>
    <p lang="en">
      Here we see two links: <code>#2</code> and <code>#3</code>. 
      It is no longer possible to use the carbon symbol for the link here, since these are two different carbon atoms. 
      Therefore, node numbers are used.
    </p>
    <p lang="ru">Узлы нумеруются в порядке их определения в формуле. Вот тут обозначены номера всех узлов для данной формулы:</p>
    <p lang="en">The nodes are numbered in the order they are defined in the formula. Here are the numbers of all the nodes for this formula:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code blue-sup">H<sup>1</sup>-C<sup>2</sup>-C<sup>3</sup>-H<sup>4</sup>; H<sup>5</sup>|#2|H<sup>6</sup>; H<sup>7</sup>|#3|H<sup>8</sup></code>
      <div class="echem-formula small-comment">
        $L(1.2)H@:n(n,y:-.45,x:0.35)&lt;$itemColor1(blue)_(x&x,y&y,N0)"&n"&gt;@(1)--C@n(2)--C:c2@n(3)--H@n(4); H@n(5)|#C|H@n(6); H@n(7)|#c2|H@n(8)
      </div>  
    </div>
    <h2>
      <span lang="ru">Относительные номера узлов</span>
      <span lang="en">Relative Node Numbers</span>
    </h2>
    <p lang="ru">В больших формулах может быть достаточно сложно считать узлы от начала. 
      Кроме того, номера могут поменяться в случае внесения каких-то изменений в формулу.</p>
    <p lang="en">
      In large formulas it can be quite difficult to count nodes from the beginning. 
      Also, the numbers can change if some changes are made to the formula.
    </p>
    <p lang="ru">Тогда можно использовать относительную нумерацию.</p>
    <p lang="en">Then you can use relative numbering.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">H-O-C-H; H|#-3|H</code>
      <div class="echem-formula">H-O-C-H; H|#-3|H</div>
      <code class="chem-code blue-sup">H-O-C<sup>-3</sup>-H<sup>-2</sup>; H<sup>-1</sup>|#-3|H</code>
      <div class="echem-formula small-comment">
        $L(1.2)H@:n(n,y:-.45,x:0.35)&lt;$itemColor1(blue)_(x&x,y&y,N0)"&n"&gt;@;--O--C@n(-3)--H@n(-2); H@n(-1)|#C|H
      </div>
    </div>
    <p lang="ru">Для относительной нумерации используются отрицательные числа. Они отсчитываются в обратную сторону от ссылки.</p>
    <p lang="en">Negative numbers are used for relative numbering. They are counted backwards from the reference.</p>
    <p lang="ru">Конечно, использование относительной нумерации может быть ещё сложнее, чем абсолютной. 
      Кроме того, чем дальше нужный узел от ссылки, тем меньше пользы от такого способа.</p>
    <p lang="en">
      Of course, using relative numbering can be even more difficult than using absolute numbering. 
      Also, the further the node you want is from the reference, the less useful this method is.
    </p>
    <h2>
      <span lang="ru">Метки узлов</span>
      <span lang="en">Node labels</span>
    </h2>
    <p lang="ru">Наиболее надёжным способом является использование <i>метки</i>.</p>
    <p lang="en">The most reliable way is to use a <i>label</i>.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">H-C:a-C:b-H; H|#a|H; H|#b|H</code>
      <div class="echem-formula">H-C:a-C:b-H; H|#a|H; H|#b|H</div>
    </div>
    <p lang="ru">
      Здесь нужные узлы снабжены метками <code>a</code> и <code>b</code>.
      Метка ставится после узла (без пробела). Она состоит из символа двоеточия и имени.
    </p>
    <p lang="en">
      Here the required nodes are provided with labels <code>a</code> and <code>b</code>. 
      The label is placed after the node (without a space). It consists of a colon symbol and a name.
    </p>
    <p lang="ru">Правила для имён меток:</p>
    <p lang="en">Rules for label names:</p>
    <ul>
      <li>
        <span lang="ru">имя может состоять только из латинских букв и цифр;</span>
        <span lang="en">the name can only consist of Latin letters and numbers;</span> 
      </li>
      <li>
        <span lang="ru">имя должно начинаться с буквы;</span>
        <span lang="en">the name must start with a letter;</span>
      </li>
      <li>
        <span lang="ru">имя не должно совпадать с символами химических элементов;</span>
        <span lang="en">the name must not match the symbols of chemical elements;</span>
      </li>
      <li>
        <span lang="ru">регистр имеет значение (т.е. abc, ABC, Abc - это разные имена).</span>
        <span lang="en">case matters (i.e. abc, ABC, Abc are different names).</span>
      </li>
    </ul>
    <p>
      <span lang="ru">Правильные имена:</span> 
      <span lang="en">Correct names:</span>
      <code>a</code>, <code>a1</code>, <code>A11</code>, <code>first</code>, <code>First</code>.
    </p>
    <p>
      <span lang="ru">Неправильные имена:</span>
      <span lang="en">Incorrect names:</span>
      <code>He</code> (<span lang="ru">химический элемент</span><span lang="en">chemical element</span>)
      <code>1a</code> (<span lang="ru">должно начинаться с буквы</span><span lang="en">must start with a letter</span>),
      <code>a1_1</code> (<span lang="ru">должно состоять только из букв и цифр</span><span lang="en">must consist of letters and numbers only</span>).
    </p>
    <p lang="ru">PS. На самом деле имя может совпадать с символом химического элемента. Строго говоря, ошибкой это не является. Но делать так не рекомендуется во избежание неопределённости.</p>
    <p lang="en">P.S. In fact, the name may coincide with the symbol of the chemical element. Strictly speaking, this is not an error. But it is not recommended to do so in order to avoid uncertainty.</p>
    <h2>
      <span lang="ru">Использование ссылок для циклов</span>
      <span lang="en">Using links for cycles</span>
    </h2>
    <p lang="ru">Ссылки можно использовать не только для того чтобы соединять разные цепочки. 
      Но с их помощью можно делать циклы для одной цепи.</p>
    <p lang="en">
      Links can be used not only to connect different chains, but also to make cycles for one chain.
    </p>
    <p lang="ru">Вот достаточно распространённая структура в виде пятиугольного цикла</p>
    <p lang="en">Here is a fairly common structure in the form of a pentagonal cycle</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">|\/`|`-</code>
      <div class="echem-formula">|\/`|`-</div>
    </div>
    <p lang="ru">Как видно, здесь цикл не замкнут. Но достаточно добавить ссылку на первый узел, и получится цикл.</p>
    <p lang="en">As you can see, the cycle is not closed here. But it is enough to add a link to the first node, and you will get a cycle.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">|\/`|`-#1</code>
      <div class="echem-formula">|\/`|`-#1</div>
    </div>
    <p lang="ru">Причём, в данном случае последняя связь будет связывать последний узел с первым, независимо от того как она описана.
      Потому что координаты узлов уже зафиксированы до того как начинается описание последней связи. 
      И она лишь соединяет их.
    </p>
    <p lang="en">
      Moreover, in this case the last bond will connect the last node with the first node, regardless of how the bond is described. 
      Because the coordinates of the nodes are already fixed before the description of the last bond begins. 
      And it only connects them.
    </p>
    <h2><a id="rules-break">
      <span lang="ru">Разрыв</span>
      <span lang="en">Break</span>
    </a></h2>
    <p lang="ru">Символ <code>#</code> и пробел (а так же перенос строки или табуляция) является отдельной конструкцией,
      которая позволяет разбить длинное описание с целью улучшения читабельности.
    </p>
    <p lang="en">
      The <code>#</code> symbol and a space (as well as a line break or tab) are a separate construct 
      that allows you to break up a long description to improve readability.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">\/# \/# \/</code>
      <div class="echem-formula">\/# \/# \/</div>
      <code class="chem-code">\/ \/ \/</code>
      <div class="echem-formula">\/ \/ \/</div>
    </div>
    <p lang="ru">Как видно, при наличии разрывов получено описание одного <a data-ref="agent">реагента</a>. 
      А если просто вставить пробелы, то это будет три разных реагента.</p>
    <p lang="en">
      As you can see, with the breaks, a description of one reagent is obtained. 
      But if you simply insert spaces, then these will be three different reagents.
    </p>
  </page>

  <page id="rules-bond-funcs" data-owner="rules-bonds">
    <h1>
      <span lang="ru">Функции для химических связей</span>
      <span lang="en">Functions for chemical bonds</span>
    </h1>
    <p lang="ru">Ранее мы уже рассматривали <a href="?p=rules-func">функции, которые применяются для узлов</a>. 
      Кроме того, полный <a href="?p=ref-func">список функций</a> есть в справочнике.</p>
    <p lang="en">
      We have already looked at the <a href="?p=rules-func">functions that apply to nodes</a>. 
      In addition, a full <a href="?p=ref-func">list of functions</a> is available in the reference.
    </p>
    <p lang="ru">Для лучшего понимания давайте более подробно изучим химическую связь, которая получается из описания <code>\</code>.</p>
    <p lang="en">For a better understanding, let's take a closer look at the chemical bond that results from the description <code>\</code>.</p>
    <div class="echem-formula" style="font-size: 200%;">
      _(y-.5,N0)$color(#999)_(y3,&gt;); 
      #1_(x-.5,N0)_(x5.5,&gt;);
      #1_(y2,N0,x-.5)_(x5.5,H);
      #1_(x2,y-.5,N0)_(y3,H)_(x2,N0)_(y-3,H);
      #1_(x3,N0):a;
      #1_(A30,L3,N0)_m(x.3)_m(y-1,x.3)_(&gt;)#a;
      #1$color(#007)@:n(v)&lt;_(A-45,L0.5,N0)&quot;&v&quot;&gt;@(0)_(x2,N0)@n(0.5)_(x2,N0)@n(1)_(x1,N0)@n(x)_(x-1.3,y.8,N0)&quot;30^o&quot;;
      #1_(y2,N0)@n(0.5)_(y0.7,N0)@n(y); 
      #1$color()_(A30,L4,w2)
    </div>
    <p lang="ru">В системе координат, которая используется для формул, у этой связи будут следующие свойства:</p>
    <p lang="en">In the coordinate system used for the formulas, this bond will have the following properties:</p>
    <ul>
      <li>
        <span lang="ru">Начало в точке с координатами</span>
        <span lang="en">Start at coordinates</span>
        (0, 0);
      </li>
      <li><span lang="ru">Длина равна 1</span><span lang="en">Length is 1</span>;</li>
      <li>
        <span lang="ru">Наклон к оси x</span>
        <span lang="en">Tilt to x-axis</span>
         = 30°;
      </li>
      <li>
        <span lang="ru">Конец в точке</span> 
        <span lang="en">End at point</span>
        (√<span style="border-top: thin solid black;">3</span>/2, 0.5).
      </li>
    </ul>
    <p lang="ru">Такие свойства хорошо подходят для конструирования шестиугольников.</p>
    <p lang="en">These properties are well suited for constructing hexagons.</p>
    <h2>
      <span lang="ru">Угол наклона</span>
      <span lang="en">Tilt angle</span>
    </h2>
    <p>
      <span lang="ru">Но давайте изобразим структурную формулу сульфата кальция</span>
      <span lang="en">But let's draw the structural formula of calcium sulfate</span>
      <span class="echem-formula">CaSO4</span>.
    </p>
    <p>
      <span lang="ru">Здесь намного лучше подходит угол наклона не 30°, а 45°. Для этого используем функцию</span>
      <span lang="en">Here, a tilt angle of 45° rather than 30° is much more suitable. For this, we use function</span>
      <a href="?p=ref-func-slope">$slope()</a>
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">$slope(45)Ca/O\S&lt;//O&gt;&lt;\\O&gt;`/O`\</code>
      <div class="echem-formula">$slope(45)Ca/O\S&lt;//O&gt;&lt;\\O&gt;`/O`\</div>
    </div>
    <p lang="ru">Действие функции <code>$slope</code> распространяется до конца формулы, либо до следующей такой функции.</p>
    <p lang="en">The scope of the <code>$slope</code> function extends to the end of the formula, or to the next such function.</p>
    <p lang="ru">Вот немного искусственный пример, где демонстрируется применение нескольких функций для изменения угла.</p>
    <p lang="en">Here's a slightly contrived example that demonstrates the use of multiple functions to change the angle.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">/\$slope(40)/\$slope(50)/\$slope(60)/\$slope()/\</code>
      <div class="echem-formula">/\$slope(40)/\$slope(50)/\$slope(60)/\$slope()/\</div>
    </div>
    <p lang="ru">Обратите внимание, что функция без параметра (с пустыми скобками) возвращает исходное значение наклона.</p>
    <p lang="en">Note that the function without a parameter (with empty parentheses) returns the original slope value.</p>
    <p lang="ru">Кроме того, использование <code>slope</code> с явно указанным углом запрещает автоматическое распознавание 
      <a href="?p=rules-hex">горизонтальных шестиугольников</a> (см. следующий раздел). 
      Поэтому <code>$slope(30)</code> и <code>$slope()</code> - не одно и то же.
    </p>
    <p lang="en">
      Also, using slope with an explicit angle disables automatic recognition of horizontal hexagons (see next section). 
      Therefore, $slope(30) and $slope() are not the same.
    </p>
    <h2>
      <span lang="ru">Длина связи</span>
      <span lang="en">Bond length</span>
    </h2>
    <p lang="ru">Длину связей можно менять при помощи функции <a href="?p=ref-func-L">$L()</a></p>
    <p lang="en">The length of chemical bonds can be changed using the <a href="?p=ref-func-L">$L()</a> function.</p>
    <p lang="ru">Для формулы сульфата кальция желательно удлиннить связи, т.к. стандартная длина ориентирована на узлы с одной буквой (C, H или S). 
      А для Ca выглядит слишком короткой.</p>
    <p lang="en">
      For the calcium sulfate formula, it is desirable to lengthen the bonds, 
      since the standard length is oriented towards nodes with one letter (C, H or S). And for Ca it looks too short.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">$L(1.3)$slope(45)Ca/O\S&lt;//O&gt;&lt;\\O&gt;`/O`\</code>
      <div class="echem-formula">$L(1.3)$slope(45)Ca/O\S&lt;//O&gt;&lt;\\O&gt;`/O`\</div>
    </div>
    <p lang="ru">Действие функции распространяется до конца формулы, либо до следующей функции. Пустые параметры означают возврат к значению по-умолчанию, которое равно 1.</p>
    <p lang="en">
      The function scope extends to the end of the formula or to the next function.<br />
      Empty parameters mean returning to the default value, which is 1.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">$L(2)|$L(3)-$L(2)`|$L()`-|`-`|`-</code>
      <div class="echem-formula">$L(2)|$L(3)-$L(2)`|$L()`-|`-`|`-</div>
    </div>
    <p lang="ru">Вот ещё пример, где используется тот факт, что расстояние между верхней и нижней точкой шестиугольника равно 2.</p>
    <p lang="en">Here's another example that uses the fact that the distance between the top and bottom points of a hexagon is 2.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">\|`/`\`|/$L(2)|</code>
      <div class="echem-formula">\|`/`\`|/$L(2)|</div>
    </div>
    <h2>
      <span lang="ru">Выравнивание двойных связей</span>
      <span lang="en">Alignment of double bonds</span>
    </h2>
    <p lang="ru">По-умолчанию при выводе двойных связей выполняется автоматическое выравнивание. Вот три примера, где цепь начинается от атома хлора.</p>
    <p lang="en">By default, automatic alignment is performed when deriving double bonds. Here are three examples where the chain starts from the chlorine atom.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">Cl\||`/ Cl\||\ Cl`/||\</code>
      <div class="echem-formula">Cl\||`/ Cl\||\ Cl`/||\</div>
    </div>
    <p lang="ru">В первом случае произошло выравнивание вправо, во втором - по центру, в третьем - влево. 
      Здесь лево и право определяются относительно направления связи в цепи.</p>
    <p lang="en">
      In the first case, alignment occurred to the right, in the second - to the center, in the third - to the left. 
      Here, left and right are defined relative to the direction of the bond in the chain.
    </p>
    <p lang="ru">Однако, есть способ явно указать, в какую сторону надо выравнивать двойные связи при помощи функции 
      <a href="?p=ref-func-dblAlign">$dblAlign()</a>.</p>
    <p lang="en">
      However, there is a way to explicitly specify which direction double bonds should be aligned using 
      the <a href="?p=ref-func-dblAlign">$dblAlign()</a> function.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">Cl$dblAlign(R)\||`/ Cl$dblAlign(M)\||`/ Cl$dblAlign(L)\||`/</code>
      <div class="echem-formula">Cl$dblAlign(R)\||`/ Cl$dblAlign(M)\||`/ Cl$dblAlign(L)\||`/</div>
    </div>
    <p lang="ru">Здесь <code>R</code> означает "право", <code>M</code> - "середина", <code>L</code> - "лево". 
      Можно использовать строчные буквы - <code>r</code>, <code>m</code> и <code>l</code>.</p>
    <p lang="en">
      Here <code>R</code> means "right", <code>M</code> means "middle", <code>L</code> means "left". 
      Lowercase letters can be used - <code>r</code>, <code>m</code> and <code>l</code>.
    </p>
    <p lang="ru">Функция так же, как и предыдущие, действует до конца формулы, либо до следующей функции. 
      А пустые параметры означают восстановление поведения по-умолчанию.</p>
    <p lang="en">
      The function, like the previous ones, has a scope until the end of the formula or until the next function. 
      And empty parameters mean restoring the default behavior.
    </p>
    <h2>
      <span lang="ru">Цвет связей</span>
      <span lang="en">Color of bonds</span>
    </h2>
    <p lang="ru">Единственным способом указать цвет связей является функция <a href="?p=ref-func-color">$color()</a></p>
    <p lang="en">The only way to specify the color of bonds is the <a href="?p=ref-func-color">$color()</a> function.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">\$color(red)||`/$color(green)`\\`|$color()//</code>
      <div class="echem-formula">\$color(red)||`/$color(green)`\\`|$color()//</div>
    </div>
  </page>

  <page id="rules-hex" data-owner="rules-bonds">
    <h1>
      <span lang="ru">Вертикальные и горизонтальные шестиугольники</span>
      <span lang="en">Vertical and horizontal hexagons</span>
    </h1>
    <p lang="ru">Есть два вида шестиугольников:</p>
    <p lang="en">There are two types of hexagons:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">\|`/`\`|/ = /-\`/`-`\</code>
      <div class="echem-formula">\|`/`\`|/ = /-\`/`-`\</div>
    </div>
    <p lang="ru">Левый называется <i>вертикальным</i>, а правый &mdash; <i>горизонтальным</i>.</p>
    <p lang="en">The left one is called <i>vertical</i> and the right one is called <i>horizontal</i>.</p>
    <p lang="ru">Разница в том, что наклонная связь, которая описывается символом <code>\</code> (обратный слэш), 
      в вертикальном шестиугольнике образует с осью X угол в 30°, а во втором - 60°.</p>
    <p lang="en">
      The difference is that the inclined bond, which is described by the symbol <code>\</code> (backslash), 
      forms an angle of 30° with the X-axis in the vertical hexagon, and 60° in the second.
    </p>
    <p lang="ru">Основным способом является вертикальный. 
      Но CharChem может определить по сочетанию определённых символов, что нужно использовать горизонтальный вариант.
      Например, здесь таким сочетанием является <code>/-</code>.
    </p>
    <p lang="en">
      The main way is vertical. But CharChem can determine by a combination of certain characters 
      that the horizontal variant should be used. For example, here such a combination is <code>/-</code>.
    </p>
    <p lang="ru">
      Однако, в некоторых случаях система может ошибаться. 
      Чаще всего это происходит, когда в одной формуле есть разные типы шестиугольников.
    </p>
    <p lang="en">
      However, in some cases the system may make mistakes. 
      This most often happens when there are different types of hexagons in one formula.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">/`\`-`/\-\$slope(30)`/|\/`|`\</code>
      <div class="echem-formula">/`\`-`/\-\$slope(30)`/|\/`|`\</div>
    </div>
    <p lang="ru">Здесь пришлось явно указать угол в 30° при помощи функции <a href="?p=ref-func-slope">slope</a>.
      Потому что сочетание <code>\`/</code> по-умолчанию относится к горизонтальному режиму.
    </p>
    <p lang="en">
      Here I had to explicitly specify the angle of 30° using the <a href="?p=ref-func-slope">slope</a> function. 
      Because the combination <code>\`/</code> by default refers to the horizontal mode.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">\`/</code>
      <div class="echem-formula">\`/</div>
    </div>
    <p lang="ru">Кроме функции <code>slope</code>, для решения подобных проблем можно использовать другие способы описания связей,
      которые обсуждаются в следующих разделах. Например, <a data-ref="uni">универсальные описания</a>.
      Потому что переключение в горизонтальный режим работает только для <a data-ref="bond-short">кратких описаний</a>.
    </p>
    <p lang="en">
      In addition to the slope function, other methods of describing chemical bonds, discussed in the following sections, 
      can be used to solve such problems. For example, <a data-ref="uni">universal descriptions</a>. 
      Because switching to horizontal mode only works for <a data-ref="bond-short">short descriptions</a>.
    </p>
    <p lang="ru">Другая распространённая ситуация - продолжение цепочек. Например: </p>
    <p lang="en">Another common situation is the continuation of chains. For example:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">`-`\/-\`/\C\\\N</code>
      <div class="echem-formula">`-`\/-\`/\C\\\N</div>
    </div>
    <p lang="ru">Здесь используется горизонтальный режим. 
      Но нитрильная группа к нему уже не отностися. Потому что сочетание <code>\</code> и <code>\\\</code>
      не отностится к тем, которые образуют горизонтальный режим.</p>
    <p lang="en">
      Here the horizontal mode is used. But the nitrile group does not belong to it. 
      Because the combination <code>\</code> and <code>\\\</code> does not belong to those that form the horizontal mode.
    </p>
    <p lang="ru">Для исправления ситуации можно указать <code>$slope(60)</code>, либо заменить описание тройной связи:</p>
    <p lang="en">To correct the situation, you can specify <code>$slope(60)</code>, 
      or replace the description of the triple bond:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">`-`\/-\`/\C_(a0,N3)N</code>
      <div class="echem-formula">`-`\/-\`/\C_(a0,N3)N</div>
    </div>
    <p lang="ru">Конструкция 
      <a href="?p=rules-uni-rel#relative-angle-0"><code>_(a0,N3)</code></a> 
      означает что химическая связь отклоняется от предыдущей на 0° и имеет кратность 3.</p>
    <p lang="en">
      The construction 
      <a href="?p=rules-uni-rel#relative-angle-0"><code>_(a0,N3)</code></a> 
      means that the chemical bond deviates from the previous one by 0° and has a multiplicity of 3.
    </p>
  </page>

  <page id="rules-suffixes" data-owner="rules-bonds">
    <h1>
      <span lang="ru">Суффиксы</span>
      <span lang="en">Suffixes</span>
    </h1>
    <p lang="ru">Суффиксы служат для придания связям дополнительных свойств.
      Полный список <a href="?p=ref-suffix">суффиксов</a> есть в справочнике.</p>
    <p lang="en">
      Suffixes serve to impart additional properties to chemical bonds. 
      The full list of <a href="?p=ref-suffix">suffixes</a> is in the reference book.
    </p>
    <p lang="ru">Суффикс записывается сразу после описания связи. Он включает только строчные буквы, т.к. прописные используются для химических элементов.</p>
    <p lang="en">The suffix is ​​written immediately after the description of the bond. It includes only lowercase letters, since uppercase letters are used for chemical elements.</p>
    <h2>
      <span lang="ru">Прозрачные связи</span>
      <span lang="en">Transparent bonds</span>
    </h2>
    <p>
      <span lang="ru">Бывают формулы солей, где есть ионные связи, которые явно не отображаются. Например,</span> 
      <span lang="en">There are salt formulas that contain ionic bonds that are not clearly displayed. For example,</span>
      <a href="https://pubchem.ncbi.nlm.nih.gov/compound/24958" target="_blank">
        <span lang="ru">Сульфит калия</span>
        <span lang="en">Potassium Sulfite</span>
      </a>
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">K^+/0O^-\S&lt;||O&gt;/O^-\0K^+</code>
      <div class="echem-formula">K^+/0O^-\S&lt;||O&gt;/O^-\0K^+</div>
    </div>
    <p lang="ru">Связи между калием и кислородом есть, но они не видны. Для этого к ним добавлена цифра <code>0</code>.
      То есть, можно считать что кратность связи равна нулю.
    </p>
    <p lang="en">
      There are bonds between potassium and oxygen, but they are not visible. 
      For this reason, the number <code>0</code> is added to them. That is, we can assume that the bond multiplicity is zero.
    </p>
    <p lang="ru">Кроме того, прозрачные связи могут быть использованы, чтобы "поднять карандаш" и переместить в другую точку.</p>
    <p lang="en">Additionally, transparent bonds can be used to "lift the pencil" and move it to another point.</p>
    <p lang="ru">Вот например, так можно описать формулу <a href="https://en.wikipedia.org/wiki/Formaldehyde" target="_blank">формальдегида</a> 
      без использования ветвлений:</p>
    <p lang="en">
      For example, this is how the formula of 
      <a href="https://en.wikipedia.org/wiki/Formaldehyde" target="_blank">formaldehyde</a> 
      can be described without using branches:
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">H/C`|O|\H</code>
      <div class="echem-formula">H/C`|O|\H</div>
    </div>
    <p lang="ru">Но тут двойная связь образовалась потому что мы сначала провели связь от углерода к кислороду, а потом вторую - обратно.</p>
    <p lang="en">But here a double bond was formed because we first made a bond from carbon to oxygen, and then a second one back.</p>
    <p lang="ru">Тот же принцип можно использовать для формулы аммиака:</p>
    <p lang="en">The same principle can be used for the formula for ammonia:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">H/N`|H|0\H</code>
      <div class="echem-formula">H/N`|H|0\H</div>
    </div>
    <p lang="ru">Но чтобы избежать появления двойной связи, здесь вторая связь - прозрачная.</p>
    <p lang="en">But to avoid the appearance of a double bond, the second bond here is transparent.</p>
    <h2>
      <span lang="ru">Хиральность</span>
      <span lang="en">Chirality</span>
    </h2>
    <p lang="ru">Иногда бывает необходимо отобразить особенности пространственного строения молекул. 
      Для этого вводятся такие понятия как центр хиральности, ось хиральности, плоскость хиральности и т.п.
      А химические связи имеют клиновидную форму. Закрашенные, если направлены из центра к наблюдателю. И пунктирные, если от наблюдателя. 
    </p>
    <p lang="en">
      Sometimes it is necessary to display the features of the spatial structure of molecules. 
      For this purpose, such concepts as the chirality center, chirality axis, chirality plane, etc. are introduced. 
      And chemical bonds have a wedge shape. Painted if directed from the center to the observer. 
      And dotted if from the observer.
    </p>
    <p lang="ru">Для закрашенных используется суффикс <code>w</code>, а для пунктирных - <code>d</code>. 
      Это если остриё клина в исходной точке связи.
      А если нужно чтобы остриё было в конечной точке, то <code>ww</code> и <code>dd</code> соответственно.
    </p>
    <p lang="en">
      For filled bonds, the suffix <code>w</code> is used, and for dotted figures, <code>d</code>. 
      Provided that the wedge tip is at the initial point of the bond. 
      And if you want the tip to be at the end point, then <code>ww</code> and <code>dd</code>, respectively.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">\w \ww \d \dd</code>
      <div class="echem-formula">\w \ww \d \dd</div>
    </div>
    <p lang="ru">Вот пример, где они применяются все вместе:</p>
    <p lang="en">Here's an example where they are all used together:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">\w-/ww`\d`-`/dd</code>
      <div class="echem-formula">\w-/ww`\d`-`/dd</div>
    </div>
    <h2>
      <span lang="ru">Рацемические соединения</span>
      <span lang="en">Racemic mixtures</span>
    </h2>
    <p lang="ru">Волнистые линии используются в тех случаях, когда нужно изобразить формулу рацемической смеси оптических изомеров.
      Для этого используется суффикс <code>~</code> (тильда).
    </p>
    <p lang="en">
      Wavy lines are used when it is necessary to depict the formula of a racemic mixture of optical isomers. 
      For this purpose, the suffix <code>~</code> (tilde) is used.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">HO/~\O/`|`\`/|</code>
      <div class="echem-formula">HO/~\O/`|`\`/|</div>
    </div>
    <p lang="ru">А для смеси цис- и транс-изомеров используется перекрещенная двойная связь. Для этого используется суффикс <code>x</code>.</p>
    <p lang="en">And for a mixture of cis- and trans-isomers, a crossed double bond is used. For this, the suffix <code>x</code> is used.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">Cl\=x/Cl</code>
      <div class="echem-formula">Cl\=x/Cl</div>
    </div>
    <h2>
      <span lang="ru">Водородная связь</span>
      <span lang="en">Hydrogen bond</span>
    </h2>
    <p lang="ru">Для водородных связей используется суффикс <code>h</code>.</p>
    <p lang="en">For hydrogen bonds, the suffix <code>h</code> is used.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">H/O\H/hN&lt;`|H&gt;&lt;/H&gt;\H</code>
      <div class="echem-formula">H/O\H/hN&lt;`|H&gt;&lt;/H&gt;\H</div>
    </div>
    <p lang="ru">Иногда это может быть полезно для отображения ионных связей. Например, для такой формулы 
      <a href="https://pubchem.ncbi.nlm.nih.gov/compound/24854" target="_blank">хлорида кальция</a>:
    </p>
    <p lang="en">
      Sometimes this can be useful for showing ionic bonds. For example, for this formula of 
      <a href="https://pubchem.ncbi.nlm.nih.gov/compound/24854" target="_blank">calcium chloride</a>.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">$L(2)Cl^-\hCa^++/hCl^-</code>
      <div class="echem-formula">$L(2)Cl^-\hCa^++/hCl^-</div>
    </div>
    <h2>
      <span lang="ru">Стрелки</span>
      <span lang="en">Arrows</span>
    </h2>
    <p>
      <span lang="ru">Суффиксы</span>
      <span lang="en">Suffixes</span>
      <code>v</code>, <code>vv</code> 
      <span lang="ru">и</span><span lang="en">and</span>
      <code>vvv</code>
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">\v \vv \vvv</code>
      <div class="echem-formula">\v \vv \vvv</div>
    </div>
    <h2>
      <span lang="ru">Выравнивание двойных связей</span>
      <span lang="en">Alignment of double bonds</span>
    </h2>
    <p lang="ru">Функция <a href="?p=ref-func-dblAlign">$dblAlign()</a> полезна для тех случаев, когда нужно указать правила для нескольких связей.
      А если нужно указать выравнивание только для одной связи, то лучше использовать суффиксы 
      <code>r</code> (вправо), <code>m</code> (по центру) и <code>l</code> (влево).
    </p>
    <p lang="en">
      The <a href="?p=ref-func-dblAlign">$dblAlign()</a> function is useful when you need to specify rules for several bonds. 
      And if you need to specify alignment for only one bond, it is better to use the suffixes 
      <code>r</code> (right), <code>m</code> (center), and <code>l</code> (left).
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">\||r`/ \||m`/ \||l`/</code>
      <div class="echem-formula">\||r`/ \||m`/ \||l`/</div>
    </div>
  </page>

  <page id="rules-node-center" data-owner="rules-bonds">
    <h1>
      <span lang="ru">Центры узлов</span>
      <span lang="en">Node centers</span>
    </h1>
    <p lang="ru">До сих пор мы рассматривали формулы, где использовались довольно простые <a data-ref="node">узлы</a></p>
    <p lang="en">So far we have looked at formulas that used fairly simple <a data-ref="node">nodes</a></p>
    <div class="echem-formula" style="font-size: 120%;">
      \O$color(#AAA)&lt;_(y-1,N0)_(y2,H)&gt;&lt;_(x-1,N0)_(x2,H)&gt;$color()/
    </div>
    <p lang="ru">Здесь центром узла является середина буквы <code>O</code>.</p>
    <p lang="en">Here the center of the node is the middle of the letter <code>O</code>.</p>
    <p lang="ru">Давайте посмотрим, как выглядит вертикальная связь, которая выходит из сложных узлов</p>
    <p lang="en">Let's take a look at what a vertical bond looks like when it comes out of complex nodes.</p>
    <table id="nodes-centers-tbl1" class="table td-center"></table>
    <script>
      window.addEventListener("load", function(){
        function drawTbl(t, f) {
          var r1=createElem("tr", t), r2=createElem("tr", t);
          f.forEach(function(code){
            createElem("code", createElem("td", r1), {text: code});
            ChemSys.draw(createElem("span", createElem("td", r2), {cls: "echem-formula"}), code);
          });
        }
        drawTbl(
          document.getElementById("nodes-centers-tbl1"), 
          ["H|", "HO|", "OH|", "HS|", "SH|", "HOOC|", "COOH|", "{i-Bu}|", "{i-Bu}CH2|", '"`He`"|', 'H"[Delta]"|', '"[Delta]"H|']
        );
        drawTbl(
          document.getElementById("nodes-centers-tbl2"), 
          ["H3C`O|", "`OCH3|", "HOOC`CH2|", "HO3`S|"]
        );
      })
    </script>
    <p lang="ru">Обратите внимание, что описание связи всегда стоит после узла. Но центр меняется, в зависимости от содержимого.</p>
    <p lang="en">Note that the bond description always comes after the node. But the center changes depending on the content.</p>
    <p lang="ru">Это происходит потому что в CharChem есть правила, по которым определяется приоритет центра узла.</p>
    <p lang="en">This happens because CharChem has rules that determine the priority of the node center.</p>
    <ol>
      <li><span lang="ru">Комментарий</span><span lang="en">Comment</span></li>
      <li><span lang="ru">Абстрактный элемент</span><span lang="en">Abstract item</span></li>
      <li><span lang="ru">Водород</span><span lang="en">Hydrogen</span></li>
      <li>
        <span lang="ru">Радикалы и все атомы, кроме H и C</span>
        <span lang="en">Radicals and all atoms except H and C</span>
      </li>
      <li><span lang="ru">Углерод</span><span lang="en">Carbon</span></li>
      <li>
        <span lang="ru">Элемент, явно указанный при помощи <a href="?p=ref-grave">обраного апострофа</a></span>
        <span lang="en">An element explicitly indicated by a <a href="?p=ref-grave">backtick symbol</a></span>
      </li>     
    </ol>
    <p lang="ru">Центром становится первый элемент узла с наивысшим приоритетом.</p>
    <p lang="en">The first node item with the highest priority becomes the center.</p>
    <p lang="ru">Например, у кислорода приоритет выше, чем у водорода. Поэтому в узле <code>HO</code> связь выходит из кислорода.
      А углерод имеет приоритеты выше, чем остальные элементы. Поэтому в узле <code>HOOC</code> центром является последний атом.
    </p>
    <p lang="en">
      For example, oxygen has a higher priority than hydrogen. 
      Therefore, in the <code>HO</code> node, the bond comes out of oxygen. 
      And carbon has higher priorities than other elements. 
      Therefore, in the <code>HOOC</code> node, the center is the last atom.
    </p>
    <p lang="ru">Отдельного пояснения требует 6 пункт. Он нужен для тех случаев, когда остальные правила не помогают.
      Примеры таких случаев показаны в следующей таблице:
    </p>
    <p lang="en">
      Point 6 requires a separate explanation. It is needed for those cases when the other rules do not help. 
      Examples of such cases are shown in the following table:
    </p>
    <table id="nodes-centers-tbl2" class="table td-center"></table>
  </page>
  
  <page id="rules-soft" data-owner="rules-bonds">
    <h1>
      <span lang="ru">Мягкие связи</span>
      <span lang="en">Soft bonds</span>
    </h1>
    <p lang="ru">Не зря химики любят говорить, что химия не является точной наукой. Это относится и к формулам. Посмотрите на следующий пример:</p>
    <p lang="en">
      It is not for nothing that chemists like to say that chemistry is not an exact science. This also applies to formulas. Look at the following example:
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">CH3-C&lt;||O&gt;-CH2-CH3</code>
      <div class="echem-formula">CH3-C&lt;||O&gt;-CH2-CH3</div>
    </div>
    <p lang="ru">Здесь можно видеть, что горизонтальные связи соединяют не центры узлов, а края. 
      Потому что если бы соединялись центры, то единичной длины связи было бы слишком мало.</p>
    <p lang="en">
      Here you can see that horizontal bonds connect not the centers of the nodes, but the edges. 
      Because if the centers were connected, then the unit length of the bond would be too small.
    </p>
    <p lang="ru">Такие связи называются <a data-ref="soft-bond">мягкие</a>.</p>
    <p lang="en">Such bonds are called <a data-ref="soft-bond">soft</a>.</p>
    <p lang="ru">Они создаются автоматически для описаний <code>-</code>, <code>=</code> и <code>%</code>,
      Если с обоих концов находятся не автоматические узлы.
    </p>
    <p lang="en">
      They are created automatically for <code>-</code>, <code>=</code> and <code>%</code> descriptions 
      if there are non-automatic nodes at both ends.
    </p>
    <table class="td-center">
      <tr>
        <td><code class="chem-code">|-</code></td>
        <td><code class="chem-code">|-Br</code></td>
        <td><code class="chem-code">|O-</code></td>
        <td><code class="chem-code">|O-Br</code></td>
      </tr>
      <tr>
        <td><div class="echem-formula">|-</div></td>
        <td><div class="echem-formula">|-Br</div></td>
        <td><div class="echem-formula">|O-</div></td>
        <td><div class="echem-formula">|O$color(var(--select-color))-$color()Br</div></td>
      </tr>
      <tr>
        <td><span lang="ru">обычная</span><span lang="en">ordinary</span></td>
        <td><span lang="ru">обычная</span><span lang="en">ordinary</span></td>
        <td><span lang="ru">обычная</span><span lang="en">ordinary</span></td>
        <td style="color:var(--select-color)"><span lang="ru">мягкая</span><span lang="en">soft</span></td>
      </tr>
    </table>
    <p lang="ru">С одной стороны, они очень полезные. Но они могут создать и некоторые проблемы.</p>
    <p lang="en">On the one hand, they are very useful. But they can also create some problems.</p>
    <p lang="ru">Дело в том, что обычные связи образуют набор в одной системе координат. 
      А мягкие связи делят цепь на подцепи, в каждой из которой своя система координат.</p>
    <p lang="en">
      The point is that ordinary bonds form a set in one coordinate system. 
      And soft bonds divide the chain into subchains, each of which has its own coordinate system.
    </p>
    <p lang="ru">Здесь подцепи выделены разными цветами:</p>
    <p lang="en">Here the subchains are highlighted with different flowers:</p>
    <div class="echem-formula">$color(blue)`/`-`\/-\-CH2$color()-$color(green)C&lt;`|H3C&gt;&lt;|O|CH2$color()-$color(red)COOH&gt;$color()-$color(magenta)N^+&lt;\\O&gt;/O^-</div>
    <p lang="ru">Возможность автоматически соединить несколько связей в один цикл существует только внутри подцепи. 
      Если захотие соединить узлы из разных подцепей, то придётся пользоваться <a href="?p=rules-refs">ссылками</a>.
      Например, тут:
    </p>
    <p lang="en">
      The ability to automatically connect several bonds into one cycle exists only within a subchain. 
      If you want to connect nodes from different subchains, you will have to use <a href="?p=rules-refs">links</a>. 
      For example, here:
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">HC=CH\CH`//CH`-HC`\\HC/#1</code>
      <div class="echem-formula">HC=CH\CH`//CH`-HC`\\HC/#1</div>
    </div>
    <p lang="ru">Причём, здесь нам вообще-то не нужны мягкие связи. Они не помогают, а мешают.</p>
    <p lang="en">Moreover, we don't really need soft connections here. They don't help, they hinder.</p>
    <p lang="ru">Есть способ отказаться от использования мягких связей - это использовать удвоенные символы 
      <code>--</code>, <code>==</code> и <code>%%</code>:</p>
    <p lang="en">
      There is a way to avoid using soft links - this is to use doubled symbols 
      <code>--</code>, <code>==</code> and <code>%%</code>:
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">HC==CH\CH`//CH`--HC`\\HC/</code>
      <div class="echem-formula">HC==CH\CH`//CH`--HC`\\HC/</div>
    </div>
    <p lang="ru">Причина всех этих сложностей состоит в том, что из одного описания можно получить различные по виду формулы, если использовать разные шрифты.
      Связывание мягких связей происходит в момент отрисовки, когда известны все стили.
      В то время как остальные связи фиксируют координаты узлов независимо от графических параметров. Поэтому из них можно строить циклы.
    </p>
    <p lang="en">
      The reason for all these difficulties is that from one description one can obtain different formulas by using different fonts. 
      The binding of soft bonds occurs at the moment of drawing, when all styles are known. 
      While other bonds fix the coordinates of nodes regardless of graphic parameters. 
      Therefore, cycles can be built from them.
    </p>
    <div class="two-col-table inline-grid" style="grid-template-columns: auto auto auto;">
      <code class="chem-code">H2C-{Radical}-NH|CH2`-O_#1</code>
      <div class="echem-formula" style="font-size: 120%; font-family: 'DejaVu Sans Mono', sans-serif; font-stretch: extra-expanded;">H2C-{Radical}-NH|CH2`-O_#1</div>
      <div class="echem-formula" style="font-size: 120%; font-family: 'Gill Sans MT Condensed', monospace; font-stretch: extra-condensed;">H2C-{Radical}-NH|CH2`-O_#1</div>
    </div>
    <p lang="ru">В <a href="http://charchem.org/ru/subst-ref" target="_blank">справочнике веществ</a> CharChem мягкие связи составляют 3.2%</p>
    <p lang="en">In the CharChem <a href="http://charchem.org/en/subst-ref" target="_blank">Substances reference</a>, 
      soft bonds account for 3.2%</p>
  </page>
  
  <page id="rules-poly" data-owner="rules-bonds">
    <h1>
      <span lang="ru">Полигональные связи</span>
      <span lang="en">Polygonal bonds</span>
    </h1>
    <div style="display: flex; flex-direction: row; align-items: center; gap: 1rem">
      <div class="echem-formula">-_p3_p3</div>
      <div class="echem-formula">-_q4_q4_q4</div>
      <div class="echem-formula">-_p_p_p_p</div>
      <div class="echem-formula">-_p6_p6_p6_p6_p6</div>
      <div class="echem-formula">-_p7_p7_p7_p7_p7_p7</div>
      <div class="echem-formula">-_p8_p8_p8_p8_p8_p8_p8</div>
      <div class="echem-formula">-_p9_p9_p9_p9_p9_p9_p9_p9</div>
    </div>
    <p lang="ru">Это правильные многоугольники (полигоны). А ещё это формулы циклических углеводородов.</p>
    <p lang="en">These are regular polygons. And these are also formulas of cyclic hydrocarbons.</p>
    <p lang="ru">При помощи <a href="?p=rules-bonds-short">кратких связей</a> мы можем построить шестиугольник или квадрат,
      но вот с пятиугольником так не получится.
    </p>
    <p lang="en">
      Using <a href="?p=rules-bonds-short">short bonds</a> we can construct a hexagon or a square, 
      but this won't work with a pentagon.
    </p>
    <p lang="ru">Для этих целей в CharChem есть специальная конструкция - <i>полигональная связь</i>.</p>
    <p lang="en">For these purposes, CharChem has a special construction - a <i>polygonal bond</i>.</p>
    <p lang="ru">Полигональные связи всегда должны быть пристыкованы к какой-то предыдущей связи, 
      чтобы отклониться от неё на определённый угол и образовать новую сторону полигона.</p>
    <p lang="en">
      Polygonal bonds must always be attached to some previous bond in order to deviate from it by a certain angle 
      and form a new side of the polygon.
    </p>
    <p lang="ru">Вот несколько примеров:</p>
    <p lang="en">Here are some examples:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">-_p3_p3</code>
      <div class="echem-formula">-_p3_p3</div>
      <code class="chem-code">|_q3_q3</code>
      <div class="echem-formula">|_q3_q3</div>
      <code class="chem-code">-_p_p_p_p</code>
      <div class="echem-formula">-_p_p_p_p</div>
      <code class="chem-code">|_qq_qNH_q_qq</code>
      <div class="echem-formula">|_qq_qNH_q_qq</div>
    </div>
    <p lang="ru">Правила такие:</p>
    <p lang="en">The rules are as follows:</p>
    <table>
      <tr>
        <td>
          <span lang="ru">Полигональные связи начинаются с <code>_p</code> или <code>_q</code>. 
          Для поворота по часовой (p) или против часовой (q) стрелки.</span>
          <span lang="en">
            Polygonal connections start with <code>_p</code> or <code>_q</code>. 
            For clockwise (p) or counterclockwise (q) rotation.
          </span>
        </td>
        <td><code class="chem-code">-_p -_q</code></td>
        <td><div class="echem-formula">-_p -_q</div></td>
      </tr>
      <tr>
        <td>
          <span lang="ru">
            Двойные связи делаются при помощи повтора буквы.<br />
            С тройными так не получится. Если нужна тройная, то используйте 
            <a href="?p=rules-uni-P">универсальную связь</a>.
          </span>
          <span lang="en">
            Double bonds are made by repeating a letter.<br />
            This won't work with triple bonds. If you need a triple bond, use a 
            <a href="?p=rules-uni-P">universal bond</a>.
          </span>
        </td>
        <td><code class="chem-code">-_pp -_qq</code></td>
        <td><div class="echem-formula">-_pp -_qq</div></td>
      </tr>
      <tr>
        <td>
          <span lang="ru">
            Число означает, сколько углов (сторон) должно быть у полигона. Например, для треугольника - 3.<br />
            А если число не указано, то по-умолчанию считается 5.
          </span>
          <span lang="en">
            The number indicates how many angles (sides) the polygon should have. For example, for a triangle - 3.<br />
            And if the number is not specified, then 5 is considered by default.
          </span>
        </td>
        <td><code class="chem-code">-_p3 -_p4 -_p5 -_p -_p6 -_p7</code></td>
        <td><div class="echem-formula">-_p3 -_p4 -_p5 -_p -_p6 -_p7</div></td>
      </tr>
      <tr>
        <td>
          <span lang="ru">Ветки не влияют на работу полигональных связей.</span>
          <span lang="en">Branches do not affect the operation of polygonal bonds.</span>
        </td>
        <td><code class="chem-code">|_q_q&lt;=O&gt;_q_q</code></td>
        <td><div class="echem-formula">|_q_q&lt;=O&gt;_q_q</div></td>
      </tr>
      <tr>
        <td>
          <span lang="ru">
            <b>Важно!</b> Длина полигональной связи соответствует длине той связи, к которой она пристыкована.<br />
            Иначе не получится замкнуть цикл. Поэтому на них не действует функция <a href="?p=ref-func-L">$L()</a>
          </span>
          <span lang="en">
            <b>Important!</b> The length of a polygonal bond corresponds to the length of the bond to which it is attached.<br />
            Otherwise, it will not be possible to close the cycle. Therefore, the <a href="?p=ref-func-L">$L()</a> function does not work on them.
          </span>
        </td>
        <td><code class="chem-code">$L(1.5)/$L()&lt;`||O&gt;_p6</code></td>
        <td><div class="echem-formula">$L(1.5)/$L()&lt;`||O&gt;_p6</div></td>
      </tr>
      <tr>
        <td>
          <span lang="ru">
            Для полигональных связей работают <a href="?p=ref-suffix">суффиксы</a>, 
            как и для <a href="?p=rules-suffixes">кратких связей</a>
          </span>
          <span lang="en">
            For polygonal bonds, <a href="?p=ref-suffix">suffixes</a> work 
            in the same way as for <a href="?p=rules-suffixes">short bonds</a>.
          </span>
        </td>
        <td><code class="chem-code">-_p_pwO_pww_p</code></td>
        <td><div class="echem-formula">-_p_pwO_pww_p</div></td>
      </tr>
    </table>
    <p lang="ru">
      Стоит отметить, что полигональные связи используют относительные коррдинаты. 
      В то время как краткие используют абсолютные координаты.
      Это значит, что одинаковое описание полигона может выглядеть по-разному, в зависимости от первой связи.
    </p>
    <p lang="en">
      It is worth noting that polygonal bonds use relative coordinates. 
      While short ones use absolute coordinates. This means that the same description of a polygon may look different, 
      depending on the first bond.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">|_p_p_p_p -_p_p_p_p `|_p_p_p_p `-_p_p_p_p</code>
      <div class="echem-formula">|_p_p_p_p -_p_p_p_p `|_p_p_p_p `-_p_p_p_p</div>
    </div>
    <p lang="ru">
      Существует два основных способа для соединения нескольких циклов.
      Первый способ - использование веток.
    </p>
    <p lang="en">
      There are two main ways to connect multiple loops. 
      The first way is to use branches.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">|<em>&lt;_q_q_q_q&gt;</em>_p7_p7_p7_p7_p7_p7</code>
      <div class="echem-formula">|$color(var(--select-color))&lt;_q_q_q_q$color()&gt;_p7_p7_p7_p7_p7_p7</div>
    </div>
    <p lang="ru">
      Здесь пятиугольник и семиугольник используют первую вертикальную связь. Но пятиугольник находится в ветке.
    </p>
    <p lang="en">
      Here the pentagon and heptagon use the first vertical link. But the pentagon is in a branch.
    </p>
    <p lang="ru">Второй способ - повторный проход по уже существующей связи.</p>
    <p lang="en">The second method is to re-pass through an existing bond.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code"><em>|</em>_q_q_q_q<em>|0</em>_p7_p7_p7_p7_p7_p7</code>
      <div class="echem-formula">$color(var(--select-color))|$color()_q_q_q_q|0_p7_p7_p7_p7_p7_p7</div>
    </div>
    <p lang="ru">Суффикс <code>0</code> здесь использован, чтобы не появилась двойная связь при повторном проходе.</p>
    <p lang="en">The suffix <code>0</code> is used here to avoid a double bond when re-passing.</p>
    <p lang="ru">
      Иногда полигональные связи могут быть полезны даже в тех случаях, когда полигоны не нужны.
      Например, вот <a href="https://pubchem.ncbi.nlm.nih.gov/compound/14020" target="_blank">3,3-диэтилпентан</a>:
    </p>
    <p lang="en">
      Sometimes polygonal bonds can be useful even in cases where polygons are not needed. 
      For example, here is <a href="https://pubchem.ncbi.nlm.nih.gov/compound/14020" target="_blank">3,3-diethylpentane</a>:
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">\/&lt;_p4_p6&gt;&lt;_q4_p6&gt;/\</code>
      <div class="echem-formula">\/&lt;_p4_p6&gt;&lt;_q4_p6&gt;/\</div>
    </div>
    <p lang="ru">В <a href="http://charchem.org/ru/subst-ref" target="_blank">справочнике веществ</a> CharChem полигональные связи составляют 12.6%</p>
    <p lang="en">In the CharChem <a href="http://charchem.org/en/subst-ref" target="_blank">Substances reference</a>, polygonal bonds account for 12.6%</p>
  </page>

  <page id="rules-uni" data-owner="rules-bonds">
    <h1>
      <span lang="ru">Универсальные связи</span>
      <span lang="en">Universal bonds</span>
    </h1>
    <p lang="ru"><a data-ref="bond-short">Краткие</a> и <a data-ref="poly">полигональные</a> связи предназначены для решения узкоспециальных задач.
      А универсальные связи (как следует из их названия) служат для решения 
      всех возможных задач по описанию связей между двумя <a data-ref="node">узлами</a>.
      Обратной стороной такой мощности является более сложное описание.
    </p>
    <p lang="en">
      <a data-ref="bond-short">Short</a> and <a data-ref="poly">polygonal</a> chemical bonds are intended 
      to solve highly specialized problems. 
      And universal bonds (as their name suggests) serve to solve all possible problems of describing bonds 
      between two <a data-ref="node">nodes</a>. 
      The downside of such power is a more complex description.
    </p>
    <p lang="ru">Доля универсальных связей в <a href="http://charchem.org/ru/subst-ref" target="_blank">справочнике веществ</a> CharChem составляет менее 10%.
      Потому что они используются там, где не получается использовать краткие или полигональные связи.
    </p>
    <p lang="en">
      The share of universal bonds in the CharChem <a href="http://charchem.org/ru/subst-ref" target="_blank">substances reference</a> directory is less than 10%. 
      Because they are used where it is not possible to use short or polygonal bonds.
    </p>
    <p lang="ru">Универсальные связи в общем виде выглядят так: <code>_(<i>параметры</i>)</code>. 
      Параметры перечисляются через запятую, без пробелов. Каждый параметр начинается с определённой буквы.
      Например:
    </p>
    <p lang="en">
      Generally, universal links look like this: <code>_(<i>parameters</i>)</code>. 
      Parameters are listed separated by commas, without spaces. Each parameter begins with a specific letter. 
      For example:
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">_(x2,y1,H,>)</code>
      <div class="echem-formula">_(x2,y1,H,>)</div>
    </div>
    <p lang="ru">
      <a href="?p=ref-uni">Полный список параметров</a> есть в справочнике.
      Как видно, они больше напоминают команды какого-то графического формата.
    </p>
    <p lang="en">
      The <a href="?p=ref-uni">full list of parameters</a> is in the reference. 
      As you can see, they are more like commands of some graphic format.
    </p>
    <p lang="ru">Если нет ни одного параметра, то можно обойтись без скобок. 
      То есть, в самом простом случае универсальная связь состоит из одного знака подчёркивания.
      Но такие связи могут быть использованы только для соединения по ссылке двух <a data-ref="node">узлов</a>, 
      у которых уже зафиксированы координаты.
    </p>
    <p lang="en">
      If there are no parameters, then the brackets are not required. 
      That is, in the simplest case, a universal bond consists of a single underscore. 
      But such bonds can only be used to connect two <a data-ref="node">nodes</a> 
      by reference that already have fixed coordinates.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">|\/`|<em>_#1</em></code>
      <div class="echem-formula">|\/`|$color(var(--select-color))_#1</div>
    </div>
    <p lang="ru">Здесь связь <code>_</code> служит для соединения последнего узла с первым. 
      Однако, чтобы получить больше пользы от универсальных связей, нужно использовать параметры.</p>
    <p lang="en">
      Here the chemical bond <code>_</code> serves to connect the last node to the first. 
      However, to get more benefit from universal bonds, you need to use parameters.
    </p>
    <p lang="ru">Параметры всегда начинаются с определённой буквы, которая определяет назначение параметра. 
      А далее без пробела следует значение параметра.
      Регистр имеет значение: <code>A</code> и <code>a</code> - разные параметры.
    </p>
    <p lang="en">
      Parameters always start with a specific letter that defines the purpose of the parameter. 
      Then, without a space, comes the value of the parameter. 
      The register matters: <code>A</code> and <code>a</code> are different parameters.
    </p>
    <p lang="ru">Например, <code>_(x1.5)</code> или <code>_(x-1)</code> означает, что координата x конца связи перемещается на 1.5 или на -1 относительно начала.</p>
    <p lang="en">For example, <code>_(x1.5)</code> or <code>_(x-1)</code> means that the x-coordinate of the end of the link is moved by 1.5 or -1 relative to the beginning.</p>
    <p lang="ru">Часть параметров нужны для того чтобы указывать координаты следующего узла относительно предыдущего. 
      Но есть параметры, которые определяют другие свойства связи.
    </p>
    <p lang="en">
      Some parameters are needed to indicate the coordinates of the next node relative to the previous one. 
      But there are parameters that determine other properties of the bond.
    </p>
    <ul class="contents" data-owner="rules-uni"></ul>
  </page>
  <page id="rules-uni-xy" data-owner="rules-uni">
    <h1>
      <span lang="ru">Параметры x и y</span>
      <span lang="en">Parameters x and y</span>
    </h1>
    <p lang="ru">
      При помощи параметров <code>x</code> и <code>y</code> можно указать координаты следующего 
      <a data-ref="node">узла</a> относительно предыдущего. 
    </p>
    <p lang="en">
      Using the <code>x</code> and <code>y</code> parameters, you can specify the coordinates 
      of the next <a data-ref="node">node</a> relative to the previous one.
    </p>
    <p lang="ru">
      В следующем примере мы видим связь <code>_(x1,y1)</code>. Координаты первого узла всегда (0, 0). 
      Поэтому координаты второго будут (1, 1). А третьего - (2, 0), т.к. связь <code>_(x1,y-1)</code> 
      увеличивает <code>x</code> и уменьшает <code>y</code>.
    </p>
    <p lang="en">
      In the following example we see the chemical bond <code>_(x1,y1)</code>. 
      The coordinates of the first node are always (0, 0). Therefore, the coordinates of the second will be (1, 1). 
      And the third - (2, 0), since the bond <code>_(x1,y-1)</code> increases <code>x</code> and decreases <code>y</code>.
    </p>
    <p lang="ru">Последняя связь <code>_(x-2)</code> возвращается в первый узел. То есть, <code>x</code> уменьшается на 2, 
      а y остаётся без изменений равным 0. Получаем координаты (0, 0).
    </p>
    <p lang="en">
      Последняя связь <code>_(x-2)</code> возвращается в первый узел. То есть, <code>x</code> уменьшается на 2, 
      а <code>y</code> остаётся без изменений равным 0. Получаем координаты (0, 0).
    </p>
    <div class="two-col-table inline-grid" style="grid-template-columns: 1fr 1fr 1fr; align-items: start;">
      <code class="chem-code">_(x1,y1)_(x1,y-1)_(x-2)</code>
      <div class="echem-formula">_(x1,y1)_(x1,y-1)_(x-2)</div>
      <div class="echem-formula small-comment" style="font-size: 140%;">
        {}&lt;_(x1,y1,W2)_(x1,y-1)_(x-2)&gt;&lt;$color(silver)_(y-.5,x1,N0,W1)_(y2,H)_(y-2,x1,N0)_(y2,H)_(x.5,y-.5,N0)_(x-3,H)&gt;&lt;$color(brown)_(y-.5,N0)_(y2,&gt;)@:t(t,y:-0.4)&lt;_(x.25,y&y,N0)&quot;&t&quot;&gt;@(y,0.1)_(y-.5,N0)@t(1,-.1)&gt;&lt;_(x-.5,N0)_(x3.3,&gt;)&gt;&lt;@t(0)_(x1,N0)@t(1)_(x1,N0)@t(2)_(x0.9,N0)@t(x)&gt;
      </div>
    </div>
    <p lang="ru">Вот как меняются координаты условного пера при отрисовке узлов в данной формуле:</p>
    <p lang="en">Here's how the virtual pen coordinates change when drawing nodes in this formula:</p>
    <table>
      <tr>
        <th><span lang="ru">Номер узла</span><span lang="en">Node number</span></th>
        <th><span lang="ru">Координаты пера</span><span lang="en">Pen coordinates</span></th>
        <th><span lang="ru">Изменение</span><span lang="en">Change</span></th>
      </tr>
      <tr><td>1</td><td>0, 0</td><td>1, 1</td></tr>
      <tr><td>2</td><td>1, 1</td><td>1, -1</td></tr>
      <tr><td>3</td><td>2, 0</td><td>-2, 0</td></tr>
      <tr><td>1</td><td>0, 0</td><td></td></tr>
    </table>
    <p lang="ru">Координаты являются <a href="?p=ref-number">числовыми параметрами</a>. 
      Вместо чисел иногда удобно использовать переменные.</p>
    <p lang="en">
      Coordinates are <a href="?p=ref-number">numeric parameters</a>. It is sometimes convenient to use variables instead of numbers.
    </p>
    <div class="two-col-table inline-grid" style="grid-template-columns: 1fr 1fr 1fr; align-items: start;">
      <code class="chem-code">_(x%d:1.5,y%d)_(x%d,y-%d)</code>
      <div class="echem-formula">_(x%d:1.5,y%d)_(x%d,y-%d)</div>
      <div class="echem-formula small-comment" style="font-size: 140%;">
        {}_(x%d:1.5,y%d,W2)_(x%d,y-%d);
        #1$color(silver)_(y-.5,x1,N0,W1)_(y3,H)_(y-3,x1,N0)_(y3,H)_(x1,y-3,N0)_(y3,H);
        #1_(x-.5,y1,N0)_(x4,H)_(y1,N0)_(x-4,H);
        #1$color(brown)_(y-.5,N0)_(y3,&gt;);
        #1@:t(t,y:-0.33)&lt;_(x.25,y&y,N0)&quot;&t&quot;&gt;@(0)_(y1,N0)@t(1)_(y1,N0)@t(2)_(y0.8,N0)@t(y);
        #1_(x-.5,N0)_(x4.3,&gt;);
        #1_(x1,N0)@t(1)_(x1,N0)@t(2)_(x1,N0)@t(3)_(x0.9,N0)@t(x)
      </div>
    </div>      
    <p lang="ru">
      Здесь <code>%d:1.5</code> означает, что создаётся переменная <code>d</code>, которая равна 1.5. 
      А далее эта переменная используется при помощи <code>%d</code>.
    </p>
    <p lang="en">
      Here <code>%d:1.5</code> means that a variable <code>d</code> is created, which is equal to 1.5. 
      And then this variable is used using <code>%d</code>.
    </p>
    <p lang="ru">Переменные могут быть удобны, если часто применяются одни и те же числовые значения.</p>
    <p lang="en">Variables can be convenient if you use the same numeric values ​​frequently.</p>
    <h2>
      <span lang="ru">Специальный случай</span> 
      <span lang="en">Special case</span>
      y=0.5
    </h2>
    <p lang="ru">Бывает, что нужно изобразить атом водорода впритык к атому азота:</p>
    <p lang="en">Sometimes it is necessary to depict a hydrogen atom above or below a nitrogen atom:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">\N&lt;_(y.5)H&gt;/N&lt;_(y-.5)H&gt;\</code>
      <div class="echem-formula">\N&lt;_(y.5)H&gt;/N&lt;_(y-.5)H&gt;\</div>
    </div>
    <p lang="ru">Для этого нужно использовать ветку, в которой вертикальная связь длиной 0.5</p>
    <p lang="en">To do this, you need to use a branch in which the vertical bond is 0.5 long.</p>
    <p lang="ru">Это работает потому что высота шрифта тоже равна 0.5</p>
    <p lang="en">This works because the font height is also 0.5</p>
  </page>
  <page id="rules-uni-N" data-owner="rules-uni">
    <h1>
      <span lang="ru">Кратность</span>
      <span lang="en">Multiplicity</span>
    </h1>
    <p lang="ru">Параметр <code>N</code> позволяет указывать кратность связи. Обычно это число от 0 до 3.</p>
    <p lang="en">The <code>N</code> parameter allows you to specify the multiplicity of the bond. Usually this is a number from 0 to 3.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">Na^+_(x1,y1,N0)Cl^- N_(x1,y1,N3)N</code>
      <div class="echem-formula">Na^+_(x1,y1,N0)Cl^- N_(x1,y1,N3)N</div>
    </div>
    <p lang="ru">Для двойных связей можно использовать суффиксы <code>x l r m</code> 
      (или равнозначно <code>X L R M</code>). 
      Здесь x - перекрещенная связь, а остальные - режим выравнивания.</p>
    <p lang="en">
      For double bonds, the suffixes <code>x l r m</code> 
      (or equivalently <code>X L R M</code>) can be used. 
      Here x is the crossed bond and the rest are the alignment mode.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">|_(x1,N2x)`| |_(x1,N2r)`| |_(x1,N2m)`| |_(x1,N2L)`|</code>
      <div class="echem-formula">|_(x1,N2x)`| |_(x1,N2r)`| |_(x1,N2m)`| |_(x1,N2L)`|</div>
    </div>
  </page>
  <page id="rules-uni-abs" data-owner="rules-uni">
    <h1>
      <span lang="ru">Абсолютные углы</span>
      <span lang="en">Absolute angles</span>
    </h1>
    <p lang="ru">Параметр <code>A</code> позволяет указать угол относительно оси X. Например:</p>
    <p lang="en">The <code>A</code> parameter allows you to specify an angle relative to the X axis. For example:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">_(A45)_(A135)_(A-135)_(A-45)</code>
      <div class="echem-formula">_(A45)_(A135)_(A-135)_(A-45)</div>
    </div>
    <p lang="ru">Вот более детальная расшифровка</p>
    <p lang="en">Here is a more detailed explanation</p>
    <div class="two-col-table inline-grid" style="grid-template-columns: auto auto auto;">
      <code class="chem-code">_(A45)</code>
      <div class="echem-formula">_(A45)</div>
      <div class="echem-formula">
        _(y-.5,N0)$color(brown)_(y2.5,>); #1_(x-.5,N0)_(x3,>); #1_(A45,N0,L1.5)_m(x.5)_m(x.2,y-.5)_(x-.1,y-.5,>);
        #3_(x.4,y-.3,N0)"y"; #5_(y.1,x.3,N0)"x"_(x-.6,y.8,N0)"45^o";
        #1$color()_(A45,L2,w2)
      </div>
    </div>
    <p lang="ru">По-сути, является аналогом <a data-ref="bond-short">кратких связей</a>, но с указанным углом</p>
    <p lang="en">In essence, this construction is an analogue of <a data-ref="bond-short">short bonds</a>, but with the specified angle.</p>
    <p lang="ru">Чтобы указать длину связи, можно использовать параметр <code>L</code>:</p>
    <p lang="en">To specify the length of the link, you can use the <code>L</code> parameter:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">_(A30,L2)_(A-90)</code>
      <div class="echem-formula">_(A30,L2)_(A-90)</div>
    </div>
    <p lang="ru">Если параметр <code>L</code> не указан в сочетании с <code>A</code> или <code>a</code>, 
      то используется значение функции <a href="?p=ref-func-L">$L()</a></p>
    <p lang="en">
      If the <code>L</code> parameter is not specified in combination with <code>A</code> or <code>a</code>,
      then the value of the <a href="?p=ref-func-L">$L()</a> function is used.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">_(A45)$L(2)_(A-45)_(A45)$L()_(A-45)</code>
      <div class="echem-formula">_(A45)$L(2)_(A-45)_(A45)$L()_(A-45)</div>
    </div>
    <h2>
      <span lang="ru">Часто используемые значения углов</span>
      <span lang="en">Frequently used angle values</span>
    </h2>
    <div class="echem-formula">
      {}@:a(a,d:.5)&lt;_(A&a,L2.5,&gt;)_(a0,L&d,N0)&quot;&a^o&quot;&gt;@(0)@a(30,0.7)@a(60)@a(90,0.4)@a(120)@a(150,0.7)@a(180,0.8)@a(-30,0.7)@a(-60)@a(-90,0.4)@a(-120)@a(-150,0.7)
    </div>
  </page>
  <page id="rules-uni-P" data-owner="rules-uni">
    <h1>
      <span lang="ru">Полигональные связи</span>
      <span lang="en">Polygonal bonds</span>
    </h1>
    <p lang="ru">
      Параметр <code>P</code> является аналогом <a data-ref="poly">полигональных связей</a>, 
      которые описываются через <code>_p</code> и <code>_q</code>.
    </p>
    <p lang="en">
      The parameter <code>P</code> is an analogue of <a data-ref="poly">polygonal bonds</a>, 
      which are described through <code>_p</code> and <code>_q</code>.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">-_(P3)_(P3) = `-_(P-3)_(P-3)</code>
      <div class="echem-formula">-_(P3)_(P3) = -_(P-3)_(P-3)</div>
      <code class="chem-code">-_(P)_(P)_(P)_(P) = -_(P-5)_(P-5)_(P-5)_(P-5)</code>
      <div class="echem-formula">-_(P)_(P)_(P)_(P) = -_(P-5)_(P-5)_(P-5)_(P-5)</div>
      <code class="chem-code">-_(P,N3)</code>
      <div class="echem-formula">-_(P,N3)</div>
    </div>
    <p lang="ru">Однако, в отличие от <code>_p</code> и <code>_q</code>, здесь можно описать и тройные связи.</p>
    <p lang="en">However, unlike <code>_p</code> and <code>_q</code>, triple bonds can also be described here.</p>
    <p lang="ru">Число в параметре <code>P</code> означает сколько углов должно быть у полигона. Если не указано, то 5. 
      А если число отрицательное, то поворот против часовой стрелки.</p>
    <p lang="en">
      The number in the <code>P</code> parameter means how many corners the polygon should have. 
      If not specified, then 5. And if the number is negative, then it means counterclockwise rotation.
    </p>
  </page>
  <page id="rules-uni-rel" data-owner="rules-uni">
    <h1>
      <span lang="ru">Относительные углы</span>
      <span lang="en">Relative angles</span>
    </h1>
    <p lang="ru">Параметр <code>a</code> позволяет указать отклонение от направления предыдущей связи.</p>
    <p lang="en">The <code>a</code> parameter allows you to specify a deviation from the direction of the previous bond.</p>
    <p lang="ru">Такой способ чем-то похож на <a data-ref="poly">полигональные связи</a>. Здесь тоже требуется предыдущая связь. 
      Но <a href="?p=ref-number">числовым параметром</a> является угол в градусах. 
      И длина связи не зависит от предыдущей, а указывается либо параметром <code>L</code>, 
      либо функцией <a href="?p=ref-func-L">$L</a>, либо 1.
    </p>
    <p lang="en">
      This method is somewhat similar to <a data-ref="poly">polygonal bonds</a>. 
      Here, too, a previous bond is required. But the numerical parameter is the angle in degrees. 
      And the length of the bond does not depend on the previous one, but is specified either by the <code>L</code> parameter, 
      or the <a href="?p=ref-func-L">$L</a> function, or 1.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">-_(a60) -_(a-90) -_(a120)</code>
      <div class="echem-formula">-_(a60) -_(a-90) -_(a120)</div>
    </div>
    <p lang="ru">Отрицательные значения означают поворот против часовой стрелки.</p>
    <p lang="en">Negative values ​​indicate counter-clockwise rotation.</p>
    <p lang="ru">Вот более подробная иллюстрация</p>
    <p lang="en">Here is a more detailed illustration</p>
    <div class="two-col-table inline-grid" style="grid-template-columns: auto auto auto;">
      <code class="chem-code">_(A30)_(a-60)</code>
      <div class="echem-formula">_(A30)_(a-60)</div>
      <div class="echem-formula">
        $color(brown)_(A30,L3)<_(a0,L.6,>)>_m(y-.45,x.4)_(y-.45,x-.4,>);
          #1_(x-1,N0)_(x6,>);
          #1_(y-1,N0)_(y3,>);
          #1_(A30,L1,N0)_m(x.3,y.1)_(x.1,y-.3)_(y-.2,>);
          #1_(y1.8,x.4,N0)"y"_(x5,y-2,N0)"x"_(x-1.8,y1.2,N0)"-60^o"_(x-1.7,y-.65,N0)"30^o";
          #1$color()$L(2)_(A30,w2)_(a-60,w2)        
      </div>
    </div>
    <p lang="ru">Для первой связи указан абсолютный угол 30°. А для второй - относительный -60°. 
      Это означает что из 30 вычитается 60 и в результате для второй связи вычисляется абсолютный угол -30°.</p>
    <p lang="en">
      For the first chemical bond, the absolute angle is 30°. And for the second, the relative angle is -60°. 
      This means that 60 is subtracted from 30 and as a result, the absolute angle calculated for the second bond is -30°.
    </p>
    
    <h2>
      <span lang="ru">Использование относительных углов для нормалей</span>
      <span lang="en">Using relative angles for normals</span>
    </h2>
    <p lang="ru">Допустим, есть вот такое циклическое соединение:</p>
    <p lang="en">For example, there is a cyclic compound like this:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">-_q_q_q_q</code>
      <div class="echem-formula">-_q_q_q_q</div>
    </div>
    <p lang="ru">
      Но из него нужно сделать спирт. То есть нужно из какого-то угла вывести линию с гидроксильной группой на конце.
      Самый простой способ для этого - использовать относительные углы.
    </p>
    <p lang="en">
      But you need to make alcohol out of it. That is, you need to draw a line with a hydroxyl group at the end from some angle. 
      The easiest way to do this is to use relative angles.
    </p>
    <p lang="ru">Подробнее см. раздел справочника <a href="?p=ref-norm">Нормали</a>.
      А в этой таблице уже вычислены наиболее часто используемые значения:</p>
    <p lang="en">
      For more details, see the <a href="?p=ref-norm">Normals</a> section of the reference book. 
      And this table already calculates the most frequently used values:
    </p>
    <table>
      <tr>
        <th><span lang="ru">Число углов</span><span lang="en">Number of angles</span></th>
        <th><span lang="ru">Относительный угол</span><span lang="en">Relative angle</span></th>
      </tr>
      <tr><td>3</td><td>30°</td></tr>
      <tr><td>4</td><td>45°</td></tr>
      <tr><td>5</td><td>54°</td></tr>
      <tr><td>6</td><td>60°</td></tr>
      <tr><td>7</td><td>64.3°</td></tr>
      <tr><td>8</td><td>67.5°</td></tr>
    </table>
    <p lang="ru">Если полигон образуется поворотом по часовой стрелке (конструкция <code>_p</code>), 
      то надо использовать отрицательный угол.</p>
    <p lang="en">
      If the polygon is formed by a clockwise rotation (<code>_p</code> construction), 
      then a negative angle must be used.
    </p>
    <p lang="ru">Примеры:</p>
    <p lang="en">Examples:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">-&lt;_(a54)OH&gt;_q&lt;_(a54)OH&gt;_q&lt;_(a54)OH&gt;_q_q</code>
      <div class="echem-formula">-&lt;_(a54)OH&gt;_q&lt;_(a54)OH&gt;_q&lt;_(a54)OH&gt;_q_q</div>
      <code class="chem-code">-&lt;_(a-54)OH&gt;_p&lt;_(a-54)OH&gt;_p&lt;_(a-54)OH&gt;_p_p</code>
      <div class="echem-formula">-&lt;_(a-54)OH&gt;_p&lt;_(a-54)OH&gt;_p&lt;_(a-54)OH&gt;_p_p</div>
    </div>
    <p lang="ru">Как видно, можно вставить конструкцию с относительным углом в любой узел полигона и получить правильную нормаль.</p>
    <p lang="en">As you can see, you can insert a construction with a relative angle into any node of the polygon and get the correct normal.</p>
    <p lang="ru">А если нужно вывести не одну, а две дополнительных связи, то для одной нужно к соответствующему относительному углу
      прибавить 30 для одной связи и отнять для второй. Например, для 54 это будет 84 и 24:
    </p>
    <p lang="en">
      And if you need to draw not one, but two additional chemical bonds, then for one you need 
      to add 30 to the corresponding relative angle for one bond and subtract it for the second. 
      For example, for 54 it will be 84 and 24:
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">-_q&lt;_(a24)Cl&gt;&lt;_(a84)Cl&gt;_q_q_q</code>
      <div class="echem-formula">-_q&lt;_(a24)Cl&gt;&lt;_(a84)Cl&gt;_q_q_q</div>
    </div>

    <h2><a id="relative-angle-0">
      <span lang="ru">Относительный угол 0</span>
      <span lang="en">Relative angle 0</span>
    </a></h2>
    <p lang="ru">Ещё довольно часто используется угол 0, чтобы нарисовать две связи в одном направлении. 
      Это обычно используется для тройных связей
    </p>
    <p lang="en">
      Another common use of angle 0 is to draw two bonds in the same direction. This is usually used for triple bonds.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">-\C_(a0,N3)N</code>
      <div class="echem-formula">-\C_(a0,N3)N</div>
    </div>
  </page>
  <page id="rules-uni-ref" data-owner="rules-uni">
    <h1>
      <span lang="ru">Использование ссылок</span>
      <span lang="en">Using links</span>
    </h1>
    <p lang="ru">Иногда бывает удобно указать координаты относительно других ранее созданных узлов. 
      Для этого используются <a href="?p=rules-refs">ссылки</a>.
    </p>
    <p lang="en">
      Sometimes it is convenient to specify coordinates relative to other previously created nodes. 
      For this purpose, <a href="?p=rules-refs">links</a> are used.
    </p>
    <p lang="ru">Допустим, мы хотим провести связь не прямо к узлу 1, а использовать его только X-координату.</p>
    <p lang="en">For example, we want to draw a chemical bond not directly to node 1, but use only its X-coordinate.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">/\/\|_(x#1)</code>
      <div class="echem-formula">/\/\|_(x#1)</div>
    </div>
    <p lang="ru">То есть, мы можем использовать ссылки в параметрах <code>x</code> и <code>y</code>.</p>
    <p lang="en">That is, we can use links in the <code>x</code> and <code>y</code> parameters.</p>
    <p lang="ru">Но кроме того, можно использовать ссылку на несколько узлов. 
      Для этого можно перечислить несколько ссылок через точку с запятой, без пробелов.
      При этом будет вычислено среднее значение.
    </p>
    <p lang="en">
      But in addition, you can use a link to several nodes. To do this, you can list several links 
      separated by a semicolon, without spaces. In this case, the average value will be calculated.
    </p>
    <div class="two-col-table inline-grid" style="grid-template-columns: auto auto auto;">
      <code class="chem-code">/\/\|_(x#1;-1)</code>
      <div class="echem-formula">/\/\|_(x#1;-1)</div>
      <div class="echem-formula" style="font-size: 120%;">$bg(round,brown,p:%a:0.15)/\$bg(round,brown,p:0.2)/\$bg(round,brown,p:%a)|_(x#1;-1); $color(brown)#1_#5; #3_(H)#7; #1_(x-.4,N0)"1"; #5_(x.6,N0)"-1"</div>
    </div>
    <p lang="ru">Здесь выражение <code>#1;-1</code> означает середину линии из узла 1, до предыдущего, который указан как -1</p>
    <p lang="en">Here the expression <code>#1;-1</code> means the middle of the line from node 1 to the previous one, which is specified as -1</p>
    <p lang="ru">Кроме того, есть параметр <code>p</code>, который указывает узел или список узлов. Причём, без знака #.</p>
    <p lang="en">In addition, there is a parameter <code>p</code>, which specifies a node or a list of nodes. Moreover, without the # sign.</p>
    <p lang="ru">Вот две конструкции, которые фактически выполняют одно и то же:</p>
    <p lang="en">Here are two constructs that essentially do the same thing:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">-|_#1 = -|_(p1)</code>
      <div class="echem-formula">-|_#1 = -|_(p1)</div>
    </div>
    <p lang="ru">Однако, у конструкции <code>_(p)</code> есть дополнительные возможности. 
      Например, вот так можно провести связь к центру квадрата:</p>
    <p lang="en">
      However, the <code>_(p)</code> construction has additional possibilities. 
      For example, here is how you can draw a chemical bond to the center of the square:
    </p>
    <div class="two-col-table inline-grid" style="grid-template-columns: auto auto auto;">
      <code class="chem-code">|-`|_(p1;3)</code>
      <div class="echem-formula">|-`|_(p1;3)</div>
      <div class="echem-formula small-comment" style="font-size: 140%;">
        @:b(r:0.1)$bg(round,brown,p:&r)@()|-@b()`|_(p1;3)@b(0.15); $color(brown)"1"_(x.3,N0)#1_(H)#3_(x.3,N0)"3"
      </div>
    </div>  
    <p lang="ru">А вот так можно сочетать параметры <code>p</code> и <code>x,y</code>:</p>
    <p lang="en">And this is how you can combine the parameters <code>p</code> and <code>x,y</code>:</p>
    <div class="two-col-table inline-grid" style="grid-template-columns: auto auto auto;">
      <code class="chem-code">/\|_(p1,y1)</code>
      <div class="echem-formula">/\|_(p1,y1)</div>
      <div class="echem-formula small-comment" style="font-size: 140%;">
        /\|_(p1,y1); #4$color(brown)\hv#1\hv#5; #1_(x-.3,N0)"1"
      </div>
    </div>
    <p lang="ru">Но параметр <code>p</code> нельзя использовать, если между текущим узлом и указанными существуют 
      <a data-ref="soft-bond">мягкие связи</a>. Потому что эти узлы находятся в разных подцепях.
      Единственный способ, чтобы зациклить такие конструкции - использовать связь с указанным узлом:
    </p>
    <p lang="en">
      But the <code>p</code> parameter cannot be used if there are <a data-ref="soft-bond">soft bonds</a> 
      between the current node and the specified ones. Because these nodes are in different subchains. 
      The only way to loop such constructions is to use a bond with the specified node:
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">O-CH2-CH2|CH2_#1</code>
      <div class="echem-formula">O-CH2-CH2|CH2_#1</div>
    </div>
  </page>
  <page id="rules-uni-chiral" data-owner="rules-uni">
    <h1>
      <span lang="ru">Хиральность. Локальный и глобальный режим</span>
      <span lang="en">Chirality. Local and global mode</span>
    </h1>
    <p lang="ru">Параметры <code>w</code> и <code>d</code> могут использоваться для вывода клиновидных связей.
      Для этого нужно использовать <code>+</code> или <code>-</code>, что соответствует расширению из исходного узла в конечный или наоборот.
    </p>
    <p lang="en">
      The parameters <code>w</code> and <code>d</code> can be used to infer wedge-shaped connections by using <code>+</code> or <code>-</code>, 
      which corresponds to an extension from the source node to the destination node or vice versa.
    </p>
    <div class="two-col-table">
      <code>_(A45,w+) _(A45,w-) _(A45,d+) _(A45,d-)</code>
      <div class="echem-formula">_(A45,w+) _(A45,w-) _(A45,d+) _(A45,d-)</div>
    </div>
    <p lang="ru">Кроме того, можно использовать <code>w2</code> и <code>d2</code>, чтобы вывести толстую линию.</p>
    <p lang="en">Additionally, you can use <code>w2</code> and <code>d2</code> to draw a thick line.</p>
    <div class="two-col-table">
      <code>_(A45,w2) _(A45,d2)</code>
      <div class="echem-formula">_(A45,w2) _(A45,d2)</div>
    </div>
    <p lang="ru">Вот комплексный пример</p>
    <p lang="en">Here is a complex example</p>
    <div class="two-col-table">
      <code class="chem-code">_(A60,w+)_(x1,w2)_(A-60,w-)_(A-120,d+)_(x-1,d2)_(A120,d-)</code>
      <div class="echem-formula">_(A60,w+)_(x1,w2)_(A-60,w-)_(A-120,d+)_(x-1,d2)_(A120,d-)</div>
    </div>
    <h2>
      <span lang="ru">Глобальный режим</span>
      <span lang="en">Global mode</span>
    </h2>
    <p lang="ru">Для тех же целей можно использовать параметры <code>W</code> и <code>D</code>.</p>
    <p lang="en">For the same purposes, you can use the <code>W</code> and <code>D</code> parameters.</p>
    <p lang="ru">
      Разница в том, что <code>W+</code>, <code>W2</code>, <code>D+</code> и <code>D2</code> включают глобальный режим толстой линии,
      который действует на все следующие универсальные связи в пределах реагента.</p>
    <p lang="en">
      The difference is that <code>W+</code>, <code>W2</code>, <code>D+</code>, and <code>D2</code> enable 
      a global thick line mode that affects all subsequent universal bonds within the reagent.
    </p>
    <p lang="ru">
      Но этот режим может быть выключен параметрами <code>W-</code>, <code>D-</code>, <code>W1</code> или <code>D1</code>.
    </p>
    <p lang="en">
      But this mode can be disabled by the parameters <code>W-</code>, <code>D-</code>, <code>W1</code> or <code>D1</code>.
    </p>
    <p lang="ru">Вот несколько примеров:</p>
    <p lang="en">Here are some examples:</p>
    <div class="two-col-table">
      <code class="chem-code">_(A0)_(A60,W+)_(A0)O_(A0)_(A-60,W-)_(A0)</code>
      <div class="echem-formula">_(A0)_(A60,W+)_(A0)O_(A0)_(A-60,W-)_(A0)</div>
      <code class="chem-code">_(A0)_(A60,D+)_(A0)O_(A0)_(A-60,D-)_(A0)</code>
      <div class="echem-formula">_(A0)_(A60,D+)_(A0)O_(A0)_(A-60,D-)_(A0)</div>
      <code class="chem-code">_(A0)_(A60,W2)_(A0)O_(A0)_(A-60,W1)_(A0)</code>
      <div class="echem-formula">_(A0)_(A60,W2)_(A0)O_(A0)_(A-60,W1)_(A0)</div>
      <code class="chem-code">_(A0)_(A60,D2)_(A0)O_(A0)_(A-60,D1)_(A0)</code>
      <div class="echem-formula">_(A0)_(A60,D2)_(A0)O_(A0)_(A-60,D1)_(A0)</div>
    </div>
    <p lang="ru">После включения глобального режима для вывода узкой линии можно использовать связи с параметрами <code>w</code> и <code>d</code>.
      Они действуют только на свою связь, а для остальных режим продолжает действовать.
    </p>
    <p lang="en">
      After enabling the global mode, chemical bonds with the parameters <code>w</code> and <code>d</code> 
      can be used to output a thin line. They only affect their own bond, and the mode continues to operate for the others.
    </p>
    <div class="two-col-table">
      <code class="chem-code">_(A45,W2)_(A-45)_(A45,w1)_(A-45)</code>
      <div class="echem-formula">_(A45,W2)_(A-45)_(A45,w1)_(A-45)</div>
    </div>
    <p lang="ru">Кроме того, глобальный режим действует только на универсальные связи.</p>
    <p lang="en">In addition, the global mode only affects universal bonds.</p>
    <div class="two-col-table">
      <code class="chem-code">_(y1,W2)-_(y-1)_p4_(y1)</code>
      <div class="echem-formula">_(y1,W2)-_(y-1)_p4_(y1)</div>
    </div>
    <p lang="ru">Подобная техника часто используется для описания формул углеводов.</p>
    <p lang="en">A similar technique is often used to describe carbohydrate formulas.</p>
    <p lang="ru">Вот два варианта описания одного вещества - <a href="http://charchem.org/ru/subst-ref/?id=225" target="_blank">β-D-глюкопираноза</a>:</p>
    <p lang="en">Here are two options for describing one substance - <a href="http://charchem.org/en/subst-ref/?id=225" target="_blank">β-D-glucopyranose</a>:</p>
    <div class="two-col-table">
      <code class="chem-code">CH2OH|_(x-1,y1)&lt;|OH&gt;_(x1,y1,W+)&lt;`|OH&gt;_(x1.4)&lt;|OH&gt;_(x1,y-1,W-)&lt;`|OH&gt;_(x-1,y-1)O_#2</code>
      <div class="echem-formula">CH2OH|_(x-1,y1)&lt;|OH&gt;_(x1,y1,W+)&lt;`|OH&gt;_(x1.4)&lt;|OH&gt;_(x1,y-1,W-)&lt;`|OH&gt;_(x-1,y-1)O_#2</div>
      <code class="chem-code">HO_(A-15)_(x%a:1.2,y%d:.4)&lt;`\/OH&gt;_(x%b:1.4,y-%d)O_(x%c:.6,y%h:1.2)&lt;_(A-15)OH&gt;_(x-%a,y-%d,W+)&lt;_(A60,w1)OH&gt;_(x-%b,y%d)&lt;_(A-165,w1)HO&gt;_(x-%c,y-%h,W-)</code>
      <div class="echem-formula">HO_(A-15)_(x%a:1.2,y%d:.4)&lt;`\/OH&gt;_(x%b:1.4,y-%d)O_(x%c:.6,y%h:1.2)&lt;_(A-15)OH&gt;_(x-%a,y-%d,W+)&lt;_(A60,w1)OH&gt;_(x-%b,y%d)&lt;_(A-165,w1)HO&gt;_(x-%c,y-%h,W-)</div>
    </div>
  </page>

  <page id="rules-uni-decor" data-owner="rules-uni">
    <h1>
      <span lang="ru">Декоративные параметры</span>
      <span lang="en">Decorative parameters</span>
    </h1>
    <p lang="ru">Целый ряд параметров предназначен для изменения внешнего вида связей. 
      Аналогичные возможности для других видов связей реализуются через <a href="?p=rules-suffixes">суффиксы</a>.</p>
    <p lang="en">
      A whole series of parameters are intended for changing the external appearance of bonds. 
      Similar possibilities for other types of bonds are realized through <a href="?p=rules-suffixes">suffixes</a>.
    </p>
    <h2>
      <span lang="ru">Водородная связь</span>
      <span lang="en">Hydrogen bond</span>
    </h2>
    <p lang="ru">Параметр <code>H</code> служит для описания водородной связи (или просто штриховой линии).</p>
    <p lang="en">The <code>H</code> parameter is used to describe the hydrogen bond (or simply the dashed line).</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">_(x2,y1,H)</code>
      <div class="echem-formula">_(x2,y1,H)</div>
    </div>
    <h2>
      <span lang="ru">Волнистая линия</span>
      <span lang="en">Wavy line</span>
    </h2>
    <p lang="ru">Для волнистой линии используется параметр <code>~</code> (тильда).</p>
    <p lang="en">For a wavy line, the <code>~</code> (tilde) parameter is used.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">_(x2,y1,~)</code>
      <div class="echem-formula">_(x2,y1,~)</div>
    </div>
    <h2>
      <span lang="ru">Стрелки</span>
      <span lang="en">Arrows</span>
    </h2>
    <p lang="ru">Для стрелок используются параметры <code>C</code>, <code>&lt;</code> и <code>&gt;</code></p>
    <p lang="en">For arrows, the parameters <code>C</code>, <code>&lt;</code> and <code>&gt;</code> are used.</p>
    <p lang="ru">Прямая стрелка: <code>C</code> или <code>&gt;</code></p>
    <p lang="en">Forward arrow: <code>C</code> or <code>&gt;</code></p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">_(x2,y1,C) _(x2,y1,&gt;)</code>
      <div class="echem-formula">_(x2,y1,C) _(x2,y1,&gt;)</div>
    </div>
    <p lang="ru">Обратная стрелка: <code>C-</code> или <code>&lt;</code></p>
    <p lang="en">Backward arrow: <code>C-</code> or <code>&lt;</code></p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">_(x2,y1,C-) _(x2,y1,&lt;)</code>
      <div class="echem-formula">_(x2,y1,C-) _(x2,y1,&lt;)</div>
    </div>
    <p lang="ru">Стрелка в обе стороны: <code>C+</code></p>
    <p lang="en">Arrow in both directions: <code>C+</code></p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">_(x2,y1,C+)</code>
      <div class="echem-formula">_(x2,y1,C+)</div>
    </div>
  </page>
  <page id="rules-uni-style" data-owner="rules-uni">
    <h1><span lang="ru">Стили</span><span lang="en">Styles</span></h1>
    <p> 
      <span lang="ru">Допустим, нужно изобразить  
      <a href="https://ru.wikipedia.org/wiki/%D0%94%D0%B8%D1%8D%D1%82%D0%B8%D0%BB%D0%B4%D0%B8%D1%82%D0%B8%D0%BE%D0%BA%D0%B0%D1%80%D0%B1%D0%B0%D0%BC%D0%B0%D1%82_%D0%BD%D0%B0%D1%82%D1%80%D0%B8%D1%8F#/media/%D0%A4%D0%B0%D0%B9%D0%BB:Sodium_diethyldithiocarbamate_2.png" target="_blank">вот такую формулу</a>
      из Википедии: </span>
      <span lang="en">For example, you need to depict 
        <a href="https://ru.wikipedia.org/wiki/%D0%94%D0%B8%D1%8D%D1%82%D0%B8%D0%BB%D0%B4%D0%B8%D1%82%D0%B8%D0%BE%D0%BA%D0%B0%D1%80%D0%B1%D0%B0%D0%BC%D0%B0%D1%82_%D0%BD%D0%B0%D1%82%D1%80%D0%B8%D1%8F#/media/%D0%A4%D0%B0%D0%B9%D0%BB:Sodium_diethyldithiocarbamate_2.png" target="_blank">this formula</a> 
        from Wikipedia:</span>
      <img style="height: 10rem; float: right;" src="https://upload.wikimedia.org/wikipedia/commons/7/71/Sodium_diethyldithiocarbamate_2.png" alt=""/>
    </p>
    <p lang="ru">Здесь интерес представляют связи, состоящие из двух линий, одна из которых - штриховая.</p>
    <p lang="en">Of interest here are bonds consisting of two lines, one of which is dashed.</p>
    <p lang="ru">Параметр <code>S</code> позволяет указать стили связи.</p>
    <p lang="en">The <code>S</code> parameter allows you to specify bond styles.</p>
    <p>
      <span lang="ru">Стили указываются следующими символами:</span>
      <span lang="en">Styles are indicated by the following symbols:</span> 
      <code>~</code> <code>:</code> <code>|</code> <code>I</code>
    </p>
    <table>
      <tr>
        <th><span lang="ru">Символ</span><span lang="en">Symbols</span></th>
        <th><span lang="ru">Описание</span><span lang="en">Description</span></th>
        <th><span lang="ru">Пример</span><span lang="en">Example</span></th>
      </tr>
      <tr>
        <td><code>~</code></td>
        <td><span lang="ru">Волнистая линия</span><span lang="en">Wavy line</span></td>
        <td>
          <div class="two-col-table inline-grid">
            <code class="chem-code">_(A45,S~)</code>
            <div class="echem-formula">_(A45,S~)</div>
          </div>
        </td>
      </tr>
      <tr>
        <td><code>:</code></td>
        <td><span lang="ru">Штриховая линия</span><span lang="en">Dashed line</span></td>
        <td>
          <div class="two-col-table inline-grid">
            <code class="chem-code">_(A45,S:)</code>
            <div class="echem-formula">_(A45,S:)</div>
          </div>
        </td>
      </tr>
      <tr>
        <td><code>|</code></td>
        <td><span lang="ru">Тонкая линия</span><span lang="en">Thin line</span></td>
        <td>
          <div class="two-col-table inline-grid">
            <code class="chem-code">_(A45,S|)</code>
            <div class="echem-formula">_(A45,S|)</div>
          </div>
        </td>
      </tr>
      <tr>
        <td><code>I</code></td>
        <td><span lang="ru">Толстая линия</span><span lang="en">Thick line</span></td>
        <td>
          <div class="two-col-table inline-grid">
            <code class="chem-code">_(A45,SI)</code>
            <div class="echem-formula">_(A45,SI)</div>
          </div>
        </td>
      </tr>
    </table>
    <p lang="ru">Волнистая линия может быть только одинарной. Остальные можно комбинировать друг с другом вплоть до тройной.</p>
    <p lang="en">The wavy line can only be single. The others can be combined with each other up to a triple.</p>
    <p lang="ru">Для этого перечисляются символы в том порядке, как если бы линия была проведена вертикально сверху вниз.</p>
    <p lang="en">To do this, the symbols are listed in the order as if the line were drawn vertically from top to bottom.</p>
    <div class="two-col-table inline-grid" style="grid-template-columns: repeat(5, auto);">
      <code class="chem-code">O_(y1,S:|)</code>
      <code class="chem-code">O_(y1,S|:)</code>
      <code class="chem-code">O_(y1,S:|:)</code>
      <code class="chem-code">O_(y1,SI|)</code>
      <code class="chem-code">O_(y1,S:|I)</code>

      <div class="echem-formula">O_(y1,S:|)</div>
      <div class="echem-formula">O_(y1,S|:)</div>
      <div class="echem-formula">O_(y1,S:|:)</div>
      <div class="echem-formula">O_(y1,SI|)</div>
      <div class="echem-formula">O_(y1,S:|I)</div>
    </div> 
    <p lang="ru">Не важно, в каком направлении рисуется связь. Описание стилей всегда соответствует этому правилу.</p>
    <p lang="en">It does not matter in which direction the bond is drawn. The description of styles always corresponds to this rule.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">$L(1.5){A}&lt;_(A90,S|:)&gt;&lt;_(A30,S|:)&gt;&lt;_(A-30,S|:)&gt;&lt;_(A-90,S|:)&gt;&lt;_(A-150,S|:)&gt;&lt;_(A150,S|:)&gt;</code>
      <div class="echem-formula">$L(1.5){A}&lt;_(A90,S|:)&gt;&lt;_(A30,S|:)&gt;&lt;_(A-30,S|:)&gt;&lt;_(A-90,S|:)&gt;&lt;_(A-150,S|:)&gt;&lt;_(A150,S|:)&gt;</div>
    </div>
    <p lang="ru">Таким образом, упомянутая выше формула диэтилдитиокарбамата натрия может быть описана с использованием стилей:</p>
    <p lang="en">Thus, the above mentioned formula of sodium diethyldithiocarbamate can be described using the styles:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">
        $L(1.4)C_(A-45,S|:)S_(A-135,N0)Na^+_(A135,N0)S_(A45,S|:)&lt;_(p2;4,N0){}^-&gt;$L()|N&lt;\Et&gt;`/Et
      </code>
      <div class="echem-formula">
        $L(1.4)C_(A-45,S|:)S_(A-135,N0)Na^+_(A135,N0)S_(A45,S|:)&lt;_(p2;4,N0){}^-&gt;$L()|N&lt;\Et&gt;`/Et
      </div>
    </div>
    <h2>
      <span lang="ru">Выравнивание двойных связей</span>
      <span lang="en">Alignment of double bonds</span>
    </h2>
    <p lang="ru">Если используются двойные связи, то для них действуют такие же суффиксы, как для параметра <code>N</code>:</p>
    <p lang="en">If double bonds are used, the same suffixes apply to them as to the <code>N</code> parameter:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">_(A30,S|:)_(A90,S|:)_(A30,S|:)</code>
      <div class="echem-formula">_(A30,S|:)_(A90,S|:)_(A30,S|:)</div>
      <code class="chem-code">_(A30,S|:L)_(A90,S|:L)_(A30,S|:L)</code>
      <div class="echem-formula">_(A30,S|:L)_(A90,S|:L)_(A30,S|:L)</div>
      <code class="chem-code">_(A30,S|:m)_(A90,S|:m)_(A30,S|:m)</code>
      <div class="echem-formula">_(A30,S|:m)_(A90,S|:m)_(A30,S|:m)</div>
      <code class="chem-code">_(A30,S|:R)_(A90,S|:R)_(A30,S|:R)</code>
      <div class="echem-formula">_(A30,S|:R)_(A90,S|:R)_(A30,S|:R)</div>
    </div>
    <p lang="ru">То есть, <code>L</code> или <code>l</code> - влево, <code>R</code> или <code>r</code> - вправо, 
      <code>M</code> или <code>m</code> - посередине.</p>
    <p lang="en">
      That is, <code>L</code> or <code>l</code> - to the left, <code>R</code> or <code>r</code> - to the right,
      <code>M</code> or <code>m</code> - in the middle.
    </p>
  </page>
  <page id="rules-uni-soft" data-owner="rules-uni">
    <h1>
      <span lang="ru">Мягкие связи</span>
      <span lang="en">Soft bonds</span>
    </h1>
    <p>
      <span lang="ru">
        В большинстве случаев <a href="?p=rules-soft">мягкие связи</a> создаются при помощи <a data-ref="bond-short">кратких описаний</a>:
      </span>
      <span lang="en">In most cases, soft bonds are created using short descriptions:</span>
      <code>- = %</code>.
    </p>
    <p lang="ru">Но изредка бывает необходимо использовать универсальные связи. Для этого служит параметр <code>h</code></p>
    <p lang="en">But sometimes it is necessary to use universal bonds. The parameter <code>h</code> is used for this.</p>
    <p lang="ru">Один из таких случаев - если по какой-то причине мягкая связь не является горизонтальной.</p>
    <p lang="en">One such case is if for some reason the soft bond is not horizontal.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">H3C_(A10,h)CH2_(A-10,h)CH3</code>
      <div class="echem-formula">H3C_(A10,h)CH2_(A-10,h)CH3</div>
    </div>
    <p lang="ru">Тут важно, что сам по себе параметр <code>h</code> не определяет смещение второго узла относительно первого. 
      Для этого нужно использовать <code>x</code>, <code>y</code>, <code>A</code> или <code>a</code>.</p>
    <p lang="en">
      It is important here that the <code>h</code> parameter itself does not determine the offset of the second node relative to the first.
      To do this, you need to use <code>x</code>, <code>y</code>, <code>A</code> or <code>a</code>.
    </p>
    <p lang="ru">Однако, бывают случаи когда нужно разделить один длинный узел на несколько более простых, но так чтобы не было видно разделяющих связей.</p>
    <p lang="en">However, there are cases when it is necessary to divide one long node into several simpler ones, but so that the dividing bonds are not visible.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">CH3_(h)CH2_(h)OH</code>
      <div class="echem-formula">CH3_(h)CH2_(h)OH</div>
    </div>
    <p lang="ru">
      Зачем же это нужно?
      Причина тут может быть в том, что один узел может иметь только один <a href="?p=rules-node-center">центр</a>.
      И если вдруг по какой-то причине нужно изобразить длинную цепочку без горизонтальных связей, но с какими-то вертикальными ответвлениями,
      то без деления тут не обойтись.
    </p>
    <p lang="en">
      Why is this necessary? 
      The reason may be that one node can have only one <a href="?p=rules-node-center">center</a>. 
      And if for some reason it is necessary to depict a long chain without horizontal bonds, 
      but with some vertical branches, then division is indispensable.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">CH3_(h)CH&lt;|Cl&gt;_(h)CH2_(h)CH&lt;|Cl&gt;_(h)CH3</code>
      <div class="echem-formula">CH3_(h)CH&lt;|Cl&gt;_(h)CH2_(h)CH&lt;|Cl&gt;_(h)CH3</div>
    </div>
    <p lang="ru">Здесь <code>_(h)</code> соединяет соседние узлы так, чтобы они шли слева направо.</p>
    <p lang="en">Here <code>_(h)</code> connects adjacent nodes so that they go from left to right.</p>
    <p lang="ru">Для того чтобы выводить справа налево используется <code>_(h-)</code></p>
    <p lang="en">To output from right to left, use <code>_(h-)</code></p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">-\`/O_(h-)C&lt;||O&gt;_(h-)H3C</code>
      <div class="echem-formula">-\`/O_(h-)C&lt;||O&gt;_(h-)H3C</div>
    </div>
  </page>
  <!-- end of uni -->
  <page id="rules-multi" data-owner="rules-bonds">
    <h1>
      <span lang="ru">Распределённые связи</span>
      <span lang="en">Delocalized bonds</span>
    </h1>
    <p lang="ru">Казалось бы, что <a data-ref="uni">универсальные связи</a> могут решать любые задачи по описанию химических связей.
      Но они помогают только в тех ситуациях, когда связь соединяет два узла. 
      А ещё есть случаи, когда нужно описать связь, которая охватывает три и более узлов.
    </p>
    <p lang="en">
      It would seem that <a data-ref="uni">universal bonds</a> can solve any problems in describing chemical bonds. 
      But they only help in situations where the bond connects two nodes. And there are also cases when you need to describe a bond that covers three or more nodes.
    </p>
    <h2>
      <span lang="ru">Кольцевая связь</span>
      <span lang="en">Ring bond</span>
    </h2>
    <p>Достаточно часто используется формула бензола с кольцом. Так же известная как 
      <a href="https://ru.wikipedia.org/wiki/%D0%91%D0%B5%D0%BD%D0%B7%D0%BE%D0%BB#%D0%A1%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B0" target="_blank">формула Полинга</a>
    </p>
    <p lang="en">
      The formula for <a href="https://en.wikipedia.org/wiki/Aromaticity#Theory" target="_blank">benzene with a ring</a> is used quite often.
      It is also known as the Pauling formula or the Armstrong's inner cycle.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">/\|`/`\`|_o</code>
      <div class="echem-formula">/\|`/`\`|_o</div>
    </div>
    <p lang="ru">То есть, используется конструкция <code>_o</code> в том месте, где последний узел цикла соединяется с первым.</p>
    <p lang="en">That is, the <code>_o</code> construct is used in the place where the last node of the loop is connected to the first.</p>
    <p lang="ru">Не обязательно должно быть 6 узлов в цикле. Но узлы должны следовать друг за другом. А ветки игнорируются. </p>
    <p lang="en">There doesn't have to be 6 nodes in a cycle. But the nodes must follow each other. And branches are ignored.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">/\&lt;/OH&gt;|&lt;\OH&gt;`/`\`|_o</code>
      <div class="echem-formula">/\&lt;/OH&gt;|&lt;\OH&gt;`/`\`|_o</div>
      <code class="chem-code">-_p_p&lt;|CH3&gt;_p_p_o</code>
      <div class="echem-formula">-_p_p&lt;|CH3&gt;_p_p_o</div>
    </div>
    <p lang="ru">Можно совмещать несколько циклов, но надо выполнять условие последовательного соединения узлов.</p>
    <p lang="en">It is possible to combine several cycles, but the condition of sequential connection of nodes must be met.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">/\|&lt;\/`|`\`/_o&gt;`/`\`|_o</code>
      <div class="echem-formula">/\|&lt;\/`|`\`/_o&gt;`/`\`|_o</div>
      <code class="chem-code">/\<em>|&lt;\/`|`\`/_o&gt;</em>`/`\`|_o</code>
      <div class="echem-formula small-comment">
        @:n(t,a)&lt;_(A&a,N0,L0.4)$itemColor1(blue)&quot;&t&quot;&gt;@(1,-150)/@n(2,-90)\@n(3,-90)$color(var(--select-color))|@n(4,90)&lt;\@n(5,90)/@n(6,30)`|@n(7,-30)`\@n(8,-90)`/_o$color()&gt;`/@n(9,90)`\@n(10,120)`|_o
      </div>
    </div>
    <p lang="ru">Здесь первое кольцо образовано узлами 1-2-3-4-9-10. Узлы с 5 по 8 игнорируются, т.к. находятся в ветке.</p>
    <p lang="en">Here the first ring is formed by nodes 1-2-3-4-9-10. Nodes 5 through 8 are ignored because they are in a branch.</p>
    <p lang="ru">Второе кольцо подсвечено. Оно образовано узлами 3-4-5-6-7-8. 
      Хотя конструкция <code>_o</code> находится внутри ветки, то это "своя" ветка. Она не игнорируется. 
      Игнорируются "чужие", которым не принадлежит конструкция <code>_o</code>.
    </p>
    <p lang="en">
      The second ring is highlighted. It is formed by nodes 3-4-5-6-7-8. 
      Although the <code>_o</code> structure is inside the branch, it is "its" branch. It is not ignored. 
      The "foreign" ones, to which the <code>_o</code> structure does not belong, are ignored.
    </p>
    <p lang="ru">Если это кажется слишком сложно, то можно использовать невидимые связи (то есть, кратность которых указана как 0).</p>
    <p lang="en">If this seems too complicated, you can use invisible bonds (that is, those whose multiplicity is indicated as 0).</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">/\|`/`\`|_o/0\0|0\/`|`\`/_o</code>
      <div class="echem-formula">/\|`/`\`|_o/0\0|0\/`|`\`/_o</div>
      <code class="chem-code">/\|`/`\`|_o/0\0<em>|0\/`|`\`/_o</em></code>
      <div class="echem-formula small-comment">
        @:n(t,a)&lt;_(A&a,N0,L0.4)$itemColor1(blue)&quot;&t&quot;&gt;@(1,-150)/@n(2,-90)\@n(3,-90)|@n(4,90)`/@n(5,90)`\@n(6,150)`|_o/0\0$color(var(--select-color))|0\@n(7,90)/@n(8,30)`|@n(9,-30)`\@n(10,-90)`/_o
      </div>
    </div>
    <p lang="ru">То есть, просто замыкается цикл, ставится <code>_o</code>. 
      Затем невидимыми линиями перемещаемся к началу нового цикла (узел 3). 
      А так же невидимые лини подходят для замыкания цикла.
      Например, здесь невидимая линия использована для первой стороны второго шестиугольника (из 3 в 4). Иначе там появилась бы ненужная двойная связь.
    </p>
    <p lang="en">
      That is, the cycle is simply closed, <code>_o</code> is put. 
      Then we move to the beginning of the new cycle with invisible lines (node ​​3). 
      And invisible lines are also suitable for closing a cycle. 
      For example, here the invisible line is used for the first side of the second hexagon (from 3 to 4). 
      Otherwise, an unnecessary double bond would appear there.
    </p>
    <p lang="ru">Обратите внимание, что второй цикл образован узлами 3-4-7-8-9-10. 
      Хотя они и не все идут друг за другом, но важно что они последовательно соединены.</p>
    <p lang="en">
      Note that the second cycle is formed by nodes 3-4-7-8-9-10. 
      Although they are not all in sequence, it is important that they are connected in series.
    </p>
    <h2>
      <span lang="ru">Сплайновая связь</span>
      <span lang="en">Spline bond</span>
    </h2>
    <p>
      <img style="height: 10rem; float: right;" src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e9/Ferrocene.svg/800px-Ferrocene.svg.png" alt=""/>
      <span lang="ru">
        Конструкция <code>_o</code> была реализована в самых ранних версиях CharChem (0.7).
        Но она всегда рисует ровный круг. 
        Поэтому вскоре стало понятно, что этого недостаточно чтобы нарисовать например 
        <a href="https://en.wikipedia.org/wiki/Ferrocene#/media/File:Ferrocene.svg" target="_blank">такую формулу</a> 
        из википедии:
      </span>
      <span lang="en">
        The <code>_o</code> construct was implemented in the earliest versions of CharChem (0.7). 
        But it always draws a perfect circle. So it soon became clear that it was not enough to draw, for example, 
        <a href="https://en.wikipedia.org/wiki/Ferrocene#/media/File:Ferrocene.svg" target="_blank">this formula</a> 
        from Wikipedia:
      </span>
    </p>
    <p lang="ru">Потому что там не круг, а эллипс.</p>
    <p lang="en">Because it's not a circle, but an ellipse.</p>
    <p lang="ru">В результате в версии 1.0 появилась конструкция <code>_s()</code>.</p>
    <p lang="en">As a result, the <code>_s()</code> construct appeared in version 1.0.</p>
    <p lang="ru">
      Она позволяет изобразить распределённую связь не только в виде круга. 
      Кроме того, возможно использовать прерывистую линию при помощи параметра <code>S:</code>
    </p>
    <p lang="en">
      It allows to depict distributed chemical bond not only in the form of a circle. 
      In addition, it is possible to use a dashed line using the parameter <code>S:</code>
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">_(x2)\&lt;-&gt;`/_(x-2)`\/_s()</code>
      <div class="echem-formula">_(x2)\&lt;-&gt;`/_(x-2)`\/_s()</div>
      <code class="chem-code">/\&lt;/&gt;|`/`\`|_s(S:)</code>
      <div class="echem-formula">/\&lt;/&gt;|`/`\`|_s(S:)</div>
      <code class="chem-code">-\&lt;-&gt;`/`-_s(S:)</code>
      <div class="echem-formula">-\&lt;-&gt;`/`-_s(S:)</div>
      <code class="chem-code">$slope(45)-\|`/`-`\`|/_s(#1;2;5;6;1)</code>
      <div class="echem-formula">$slope(45)-\|`/`-`\`|/_s(#1;2;5;6;1)</div>
    </div>
    <p lang="ru">Кроме параметра <code>S</code>, есть параметр <code>#</code>, 
      который позволяет явно указать те узлы, которые будут использованы для распределённой связи при помощи 
      <a href="?p=rules-uni-ref">ссылок</a>.
    </p>
    <p lang="en">
      In addition to the <code>S</code> parameter, there is a <code>#</code> parameter that allows you 
      to explicitly specify the nodes that will be used for distributed bond using <a href="?p=rules-uni-ref">links</a>.
    </p>
    <p lang="ru">А так же есть параметр <code>o</code>, который означает, что связь будет зациклена независимо от того, зациклена ли цепочка.</p>
    <p lang="en">There is also a parameter <code>o</code>, which means that the bond will be looped regardless of whether the chain is looped.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">-|`-_s()</code>
      <div class="echem-formula">-|`-_s()</div>
      <code class="chem-code">-|`-_s(o)</code>
      <div class="echem-formula">-|`-_s(o)</div>
    </div>
    <p lang="ru">Ну и вот как можно описать упомянутую выше формулу Ферроцена</p>
    <p lang="en">Well, here's how you can describe the above-mentioned formula of Ferrocene</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">
        Fe_(y1.2,H){}_(x-.5,y-.6,N0)_(x1)_(x.4,y.8)_(x-.9,y.5,w+)_(x-.9,y-.5,w-)_(x.4,y-.8)_s();<br />
        #1_(y-1.2,H){}_(x-.5,y.6,N0)_(x1,w2)_(x.4,y-.8,w-)_(x-.9,y-.5)_(x-.9,y.5)_(x.4,y.8,w+)_s()
      </code>
      <div class="echem-formula">
        Fe_(y1.2,H){}_(x-.5,y-.6,N0)_(x1)_(x.4,y.8)_(x-.9,y.5,w+)_(x-.9,y-.5,w-)_(x.4,y-.8)_s();
        #1_(y-1.2,H){}_(x-.5,y.6,N0)_(x1,w2)_(x.4,y-.8,w-)_(x-.9,y-.5)_(x-.9,y.5)_(x.4,y.8,w+)_s()        
      </div>
    </div>
    <div style="clear: both;"></div>
  </page>
  <page id="rules-bezier" data-owner="rules-bonds">
    <h1>
      <span lang="ru">Изогнутые линии</span>
      <span lang="en">Curved lines</span>
    </h1>
    <p lang="ru">Пусть и крайне редко, но всё-таки бывает необходимость использовать не прямые, а изогнутые линии.</p>
    <p lang="en">Although it is extremely rare, there is still a need to use curved rather than straight lines.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">H2C`|H2C`|H2C_m(x2)_m(y2)_(x-2)</code>
      <div class="echem-formula">H2C`|H2C`|H2C_m(x2)_m(y2)_(x-2)</div>
    </div>
    <p lang="ru">Это делается при помощи <a href="https://ru.wikipedia.org/wiki/%D0%9A%D1%80%D0%B8%D0%B2%D0%B0%D1%8F_%D0%91%D0%B5%D0%B7%D1%8C%D0%B5" target="_blank">кривых Безье</a>. 
      Конструкцей <code>_m</code> задаются промежуточные контрольные точки.
      При помощи одной промежуточной точки задаётся квадратичная кривая, при помощи двух - кубическая.
    </p>
    <p lang="en">
      This is done using <a href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve" target="_blank">Bezier curves</a>. 
      The <code>_m</code> construct specifies intermediate control points. 
      A quadratic curve is specified using one intermediate point, and a cubic curve is specified using two.
    </p>
    <p>
      <span lang="ru">
        Конструкция <code>_m()</code> похожа на <a href="?p=rules-uni">универсальную связь</a>.
        Но в ней используются только те параметры, которые отвечают за координаты: 
      </span>
      <span lang="en">
        The <code>_m()</code> construct is similar to the <a href="?p=rules-uni">universal bond</a>. 
        However, it uses only those parameters that are responsible for the coordinates:
      </span>
      <code>x y A a L P p</code>.
    </p>
    <p lang="ru">Конструкции <code>_m</code> не образуют новых узлов. Узел появится только после описания связи.
      Но все координаты вычисляются относительно предыдущей конструкции.
    </p>
    <p lang="en">
      The <code>_m</code> constructions do not form new nodes. The node will appear only after the bond is described. 
      But all coordinates are calculated relative to the previous point.
    </p>
    <p lang="ru">Здесь показаны промежуточные точки для предыдущего примера:</p>
    <p lang="en">Here are the intermediate points for the previous example:</p>
    <div class="two-col-table">
      <div class="echem-formula">
        H2C`|H2C`|H2C_m(x2)_m(y2)_(x-2);
        $color(brown)#3_(x2,H,&gt;)&quot;a&quot;_(y2,H,&gt;)&quot;b&quot;_(x-2,H,&gt;)        
      </div>
    </div>
    <table>
      <tr>
        <td><code class="chem-code">{A}_m(x1,y-2)_(x1,y2,&gt;){B}-h#1</code></td>
        <td><div class="echem-formula">{A}_m(x1,y-2)_(x1,y2,&gt;){B}-h#1</div></td>
        <td>
          <span lang="ru">Квадратичеая кривая образована одной промежуточной точкой.<br />Всегда имеет форму дуги.</span>
          <span lang="en">A quadratic curve is formed by one intermediate point.<br />Always has the shape of an arc.</span>
        </td>
      </tr>
      <tr>
        <td><code class="chem-code">{A}_m(y-2)_m(x2)_(y2,&gt;){B}-h#1</code></td>
        <td><div class="echem-formula">{A}_m(y-2)_m(x2)_(y2,&gt;){B}-h#1</div></td>
        <td>
          <span lang="ru">
            Кубическая кривая образована двумя промежуточными точками.<br />
            Имеет форму дуги, если обе точки находятся с одной стороны от отрезка AB.  
          </span>
          <span lang="en">
            A cubic curve is formed by two intermediate points.
            It has the shape of an arc if both points are on the same side of the segment AB.
          </span>
        </td>
      </tr>
      <tr>
        <td><code class="chem-code">{A}_m(x1,y-2)_m(x1,y4)_(x1,y-2,&gt;){B}-h#1</code></td>
        <td><div class="echem-formula">{A}_m(x1,y-2)_m(x1,y4)_(x1,y-2,&gt;){B}-h#1</div></td>
        <td>
          <span lang="ru">
            Кубическая кривая имеет S-образную форму,<br />если точки находятся по разные стороны от отрезка AB.
          </span>
          <span lang="en">
            A cubic curve has an S-shape <br />if the points are on opposite sides of the segment AB.            
          </span>
        </td>
      </tr>
    </table>
    <p lang="ru">Это конечно всё достаточно сложно. Но такие возможности требуются довольно редко.</p>
    <p lang="en">This is all quite complicated, of course. But such capabilities are required quite rarely.</p>
    <p lang="ru">Вот ещё пара примеров формул, где требуется изогнутая связь:</p>
    <p lang="en">Here are a couple more examples of formulas that require a curved connection:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">HO\C&lt;/H&gt;|&lt;-H&gt;&lt;`-HO&gt;|&lt;-H&gt;&lt;`-HO&gt;|&lt;`-H&gt;&lt;|CH2OH&gt;_m(x1.8)_m(x.2,y-.2)_(y-1.3)O_m(y-1.3)_m(y-.2,x-.2)_#2</code>
      <div class="echem-formula">HO\C&lt;/H&gt;|&lt;-H&gt;&lt;`-HO&gt;|&lt;-H&gt;&lt;`-HO&gt;|&lt;`-H&gt;&lt;|CH2OH&gt;_m(x1.8)_m(x.2,y-.2)_(y-1.3)O_m(y-1.3)_m(y-.2,x-.2)_#2</div>
      <code class="chem-code">
        HOCH2-C&lt;-OH&gt;|&lt;-H&gt;&lt;`-HO&gt;|&lt;-OH&gt;&lt;`-H&gt;|&lt;-OH&gt;&lt;`-H&gt;|CH2_(x1,h){}:e;<br />
        #2_m(y-0.8)_m(y-0.2,x.2)_(x%d:1){}_m(x%d)_m(x.2,y.2)_(y.8){}_(y2)O_(y1)_m(y.8)_m(x-.2,y.2)_(x-%d)_#e
      </code>
      <div class="echem-formula">
        HOCH2-C&lt;-OH&gt;|&lt;-H&gt;&lt;`-HO&gt;|&lt;-OH&gt;&lt;`-H&gt;|&lt;-OH&gt;&lt;`-H&gt;|CH2_(x1,h){}:e; 
        #2_m(y-0.8)_m(y-0.2,x.2)_(x%d:1){}_m(x%d)_m(x.2,y.2)_(y.8){}_(y2)O_(y1)_m(y.8)_m(x-.2,y.2)_(x-%d)_#e        
      </div>
    </div>
    <p lang="ru">Обратите внимание, что во втором примере форма линии слишком сложная для одной кривой Безье. 
      Поэтому она составлена из трёх отдельных связей, между которыми находятся пустые узлы <code>{}</code>.</p>
    <p lang="en">
      Note that in the second example, the line shape is too complex for a single Bézier curve. 
      So it is made up of three separate bonds, with empty nodes <code>{}</code> between them.
    </p>
  </page>
  <page id="rules-ext-features" data-owner="rules">
    <h1>
      <span lang="ru">Дополнительные приёмы</span>
      <span lang="en">Additional techniques</span>
    </h1>
    <p lang="ru">Мы закончили рассмартивать описания химических связей. 
      Осталось несколько дополнительных приёмов, которые могут быть полезны в некоторых не слишком часто встречающихся случаях.
    </p>
    <p lang="en">
      We have finished looking at descriptions of chemical bonds. 
      There are still a few additional techniques that may be useful in some less common cases.
    </p>
    <h2>
      <span lang="ru">Пустые узлы</span>
      <span lang="en">Empty nodes</span>
    </h2>
    <p lang="ru">Иногда нужно изобразить не всю формулу вещества, а часть. Например, Карбоксильная группа:</p>
    <p lang="en">Sometimes it is necessary to depict not the entire formula of a substance, but a part. For example, the Carboxyl group:</p>
    <div class="two-col-table">
      <code class="chem-code">{}--C&lt;//O&gt;\OH</code>
      <div class="echem-formula">{}--C&lt;//O&gt;\OH</div>
    </div>
    <p lang="ru">Конструкция <code>{}</code> означает пустой узел. Если его не указывать, то на этом месте будет создан 
      <a data-ref="auto-node">автоузел</a>. На внешний вид формулы это не повлияет. 
      Но если для такой формулы посчитать атомную массу или состав элементов, то с автоузлом это будет уксусная кислота.
    </p>
    <p lang="en">
      The <code>{}</code> construction means an empty node. If it is not specified, an 
      <a data-ref="auto-node">autonode</a> will be created in this place. 
      This will not affect the appearance of the formula. 
      But if you calculate the atomic mass or composition of elements for such a formula, then with an autonode it will be acetic acid.
    </p>
    <p lang="ru">Здесь пустые узлы находятся в центре каждого шестиугольника. Они нужны, чтобы к ним можно было провести штриховую линию:</p>
    <p lang="en">Here the empty nodes are in the center of each hexagon. They are needed so that a dashed line can be drawn to them:</p>
    <div class="two-col-table">
      <code class="chem-code">/\|`/`\`|_o\0{}_(x2,H)Fe_(x2,H){}/0|`/`\`|/\_o</code>
      <div class="echem-formula">/\|`/`\`|_o\0{}_(x2,H)Fe_(x2,H){}/0|`/`\`|/\_o</div>
    </div>
    <p lang="ru">Ещё пустые узлы могут быть полезны для вывода декоративных линий из нескольких составных сегментов.</p>
    <p lang="en">Empty nodes can also be useful for drawing decorative lines from several component segments.</p>
    <div class="two-col-table">
      <code class="chem-code">Fe$color(brown)`|hvv{}_(x2,H){}|h{}-h"`Fe`"</code>
      <div class="echem-formula">Fe$color(brown)`|hvv{}_(x2,H){}|h{}-h"`Fe`"</div>
    </div>
    
    <p lang="ru">Кроме того, пустой узел может иметь заряд:</p>
    <p lang="en">In addition, an empty node can have a charge:</p>
    <div class="two-col-table">
      <code class="chem-code">$L(1.3){R}--C_(A-45,S:|)S_p4oNa^+_p4oS_(A-135,S:|)_(x0.8,N0){}^-</code>
      <div class="echem-formula">$L(1.3){R}--C_(A-45,S:|)S_p4oNa^+_p4oS_(A-135,S:|)_(x0.8,N0){}^-</div>
    </div>

    <h2><a id="explicit-auto-node">
      <span lang="ru">Явное создание автоузла</span>
      <span lang="en">Explicit creation of an autonode</span>
    </a></h2>
    <p lang="ru">Обычно <a data-ref="auto-node">автоузлы</a> создаются автоматически. 
      Но давайте рассмотрим несколько вариантов скелетной формулы 
      <a href="https://ru.wikipedia.org/wiki/%D0%91%D1%83%D1%82%D0%B8%D0%BD-1" target="_blank">1-бутина</a>:
    </p>
    <p lang="en">
      Usually <a data-ref="auto-node">autonodes</a> are created automatically. 
      But let's look at several variants of the skeletal formula of 
      <a href="https://en.wikipedia.org/wiki/1-Butyne" target="_blank">1-Butyne</a>:
    </p>
    <table>
      <tr>
        <td><code class="chem-code">\-%</code></td>
        <td><div class="echem-formula">\-%</div></td>
        <td>
          <span lang="ru">Здесь каждая связь указана отдельным символом, которые всегда воспринимаются однозначно.</span>
          <span lang="en">Here, each bond is indicated by a separate symbol, which is always perceived unambiguously.</span>
        </td>
      </tr>
      <tr>
        <td><code class="chem-code">|`/`///</code></td>
        <td><div class="echem-formula">|`/`///</div></td>
        <td>
          <span lang="ru">Здесь тоже понятно, где заканчивается одинарная связь и начинается тройная из-за наличия обратного апострофа.</span>
          <span lang="en">Here, too, it is clear where the single bond ends and the triple bond begins due to the presence of the backtick.</span>
        </td>
      </tr>
      <tr>
        <td><code class="chem-code">|\c\\\</code></td>
        <td><div class="echem-formula">|\c\\\</div></td>
        <td>
          <span lang="ru">
            А тут пришлось явно указать, где должен располагаться автоузел при помощи специальной конструкции <code>c</code>.
          </span>
          <span lang="en">
            And here it was necessary to clearly indicate where the auto unit should be located using a special construction <code>c</code>.
          </span>
        </td>
      </tr>
      <tr>
        <td><code class="chem-code">\\\\/</code></td>
        <td><div class="echem-formula">\\\\/</div></td>
        <td>
          <span lang="ru">
            Если указать четыре обратных слэша подряд, то в первую очередь создаётся связь с максимальной кратностью - тройная.<br />
            Но делать так не рекомендуется. Желательно всё-таки ставить символ <code>c</code>, чтобы отделить одну связь от другой.
          </span>
          <span lang="en">
            If you specify four backslashes in a row, then first of all a chemical bond with the maximum multiplicity is created - a triple one.<br />
            But it is not recommended to do this. It is still advisable to put the <code>c</code> symbol to separate one bond from another.
          </span>
        </td>
      </tr>
    </table>
    <p lang="ru">Несмотря на сходство конструкции <code>c</code> с химическим элеменом <code>C</code>, он не всегда означает углерод.
      К примеру, вот формула перхлората калия:
    </p>
    <p lang="en">
      Despite the similarity of the structure <code>c</code> to the chemical element <code>C</code>, 
      it does not always mean carbon. For example, here is the formula for potassium perchlorate:
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">O=Cl`|O|c|O`|-O-K</code>
      <div class="echem-formula">O=Cl`|O|c|O`|-O-K</div>
    </div>
    <p lang="ru">Здесь <code>c</code> используется для того чтобы отделить описание одной связи от другой.</p>
    <p lang="en">Here <code>c</code> is used to separate the description of one bond from another.</p>
    <p lang="ru">А вот ещё один интересный случай - конструкция <code>c</code> используется чтобы отделить связь от описания заряда:</p>
    <p lang="en">Here's another interesting case - the <code>c</code> construction is used to separate the bond from the charge description:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">K^+-0O`^-c-Cl|O`|`|O|=O</code>
      <div class="echem-formula">K^+-0O`^-c-Cl|O`|`|O|=O</div>
    </div>
    <p lang="ru">Сочетание <code>+-</code> выглядит довольно странно, но работает правильно. 
      Потому что не бывает описания заряда из этих символов. Поэтому система понимает, что заряд - это плюс, а дальше уже связь.</p>
    <p lang="en">
      The combination <code>+-</code> looks a bit strange, but works correctly. 
      Because there is no description of the charge from these symbols. 
      Therefore, the system understands that the charge is a plus, and then there is a sbond.
    </p>
    <p lang="ru">Но далее идёт сочетание <code>-c-</code>. Здесь пришлось вставить <code>c</code>, 
      т.к. два минуса - это допустимое описания заряда.</p>
    <p lang="en">
      But then comes the combination <code>-c-</code>. Here I had to insert <code>c</code>,
      because two minuses are an acceptable description of the charge.
    </p>
    <h2>
      <span lang="ru">Использование разрыва</span>
      <span lang="en">Using the break</span>
    </h2>
    <p lang="ru">В разделе, где обсуждались <a href="?p=rules-refs#rules-break">ссылки</a>, есть описание разрыва - <code>#</code> с пробелом.
      Разрывы можно использовать вместо <code>c</code>. Они работают практически одинаково.
    </p>
    <p lang="en">
      In the section where <a href="?p=rules-refs#rules-break">links</a> were discussed, there is a description of a break - <code>#</code> with a space. 
      Breaks can be used instead of <code>c</code>. They work almost the same.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">O=Cl`|O|# |O`|-O-K</code>
      <div class="echem-formula">O=Cl`|O|# |O`|-O-K</div>
      <code class="chem-code">K^+-0O`^-# -Cl|O`|`|O|=O</code>
      <div class="echem-formula">K^+-0O`^-# -Cl|O`|`|O|=O</div>
    </div>
  </page>

  <page id="rules-brackets" data-owner="rules">
    <h1>
      <span lang="ru">Скобки</span>
      <span lang="en">Brackets</span>
    </h1>
    <p lang="ru">В самых ранних версиях CharChem можно было использовать скобки только для <a data-ref="node">узлов</a>:</p>
    <p lang="en">In the earliest versions of CharChem, you could only use brackets on <a data-ref="node">nodes</a>:</p>
    <div class="two-col-table inline-grid">
      <div class="echem-formula">Ca(OH)2</div>
      <div class="echem-formula">K3[Fe(CN)6]</div>
    </div>
    <p lang="ru">Но начиная с версии 1.0 внутри скобок могут быть описания химических связей.</p>
    <p lang="en">But starting with version 1.0, there can be descriptions of chemical bonds inside the brackets.</p>
    <h2>
      <span lang="ru">Виды скобок</span>
      <span lang="en">Types of brackets</span>
    </h2>
    <p lang="ru">Всего доступно три вида скобок: круглые, квадратные и фигурные:</p>
    <p lang="en">There are three types of brackets available: round, square and curly:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">(H) [H] {{H}}</code>
      <code class="echem-formula">(H) [H] {{H}}</code>
      <code class="chem-code">({R}) [{R}] {{{R}}}</code>
      <code class="echem-formula">({R}) [{R}] {{{R}}}</code>
    </div>
    <p lang="ru">Фигурные добавились в версии 2.0 и для их описания нужно использовать конструкции <code>{{</code> и <code>}}</code>. 
      Потому что одинарные фигурные скобки используются для описания радикалов и <a data-ref="abs-item">абстрактных элементов</a>.</p>
    <p lang="en">
      Curly brackets were added in version 2.0 and to describe them you need to use the {{ and }} constructions. 
      Because single curly brackets are used to describe radicals and <a data-ref="abs-item">abstract elements</a>.      
    </p>
    <p lang="ru">Принципиальной разницы между видами скобок нет. Но для открытия и закрытия нужно использовать скобки одного типа.</p>
    <p lang="en">There is no fundamental difference between the types of brackets. But you need to use the same type of brackets for opening and closing.</p>
    <h2>
      <span lang="ru">Заряд скобок</span>
      <span lang="en">Charge of brackets</span>
    </h2>
    <p lang="ru">Используются такие же правила, как для <a href="?p=rules-node-charge">заряда узла</a>:</p>
    <p lang="en">The same rules are used as for <a href="?p=rules-node-charge">node charging</a>:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">[Ca]^2+ = [Ca]`^+2</code>
      <code class="echem-formula">[Ca]^2+ = [Ca]`^+2</code>
    </div>
    <h2>
      <span lang="ru">Количественный коэффициент</span>
      <span lang="en">Quantitative coefficient</span>
    </h2>
    <p lang="ru">Можно использовать числовые и абстрактные коэффициенты, как для <a href="?p=rules-node-item-props">элементов узлов</a>:</p>
    <p lang="en">You can use numeric and abstract coefficients, as for <a href="?p=rules-node-item-props">node items</a>:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">(CN)6</code>
      <div class="echem-formula">(CN)6</div>
      <code class="chem-code">H-(CH2)'n'-H</code>
      <div class="echem-formula">H-(CH2)'n'-H</div>
      <code class="chem-code">H-(CH2)'300-400'-H</code>
      <div class="echem-formula">H-(CH2)'300-400'-H</div>
    </div>
    <h2>
      <span lang="ru">Размеры</span>
      <span lang="en">Sizes</span>
    </h2>
    <p lang="ru">Если внутри скобок появляются несколько узлов, то размер скобок меняется автоматически.</p>
    <p lang="en">If multiple nodes appear inside the brackets, the size of the brackets changes automatically.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">(H|N&lt;`/H&gt;&lt;_(A20,d+)H&gt;&lt;_(A75,w+)H&gt;)^+</code>
      <div class="echem-formula">(H|N&lt;`/H&gt;&lt;_(A20,d+)H&gt;&lt;_(A75,w+)H&gt;)^+</div>
    </div>
    <p lang="ru">Если хочется увеличить отступ внутри скобок, то можно поставить перед открывающейся скобкой функцию 
      <a href="?p=ref-func-padding">$padding()</a>.
    </p>
    <p lang="en">
      If you want to increase the indentation inside the brackets, you can put the <a href="?p=ref-func-padding">$padding()</a>
       function before the opening bracket.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">$padding(0.25)(H|N&lt;`/H&gt;&lt;_(A20,d+)H&gt;&lt;_(A75,w+)H&gt;)^+</code>
      <div class="echem-formula">$padding(0.25)(H|N&lt;`/H&gt;&lt;_(A20,d+)H&gt;&lt;_(A75,w+)H&gt;)^+</div>
    </div>
    <h2>
      <span lang="ru">Соединение узлов со скобками</span>
      <span lang="en">Connecting nodes with brackets</span>
    </h2>
    <p lang="ru">Узлы и скобки могут соседствовать друг с другом.</p>
    <p lang="en">Nodes and brackets can be adjacent to each other.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">Ca(OH)2</code>
      <div class="echem-formula">Ca(OH)2</div>
      <code class="chem-code">K[Cu&lt;`|Br&gt;&lt;|Br&gt;]</code>
      <div class="echem-formula">K[Cu&lt;`|Br&gt;&lt;|Br&gt;]</div>
      <code class="chem-code">[H--N^+&lt;`|H&gt;&lt;|H&gt;--H]2^+($slope(45)O`^-/S\O`\`\O\/O^-)</code>
      <div class="echem-formula">[H--N^+&lt;`|H&gt;&lt;|H&gt;--H]2^+($slope(45)O`^-/S\O`\`\O\/O^-)</div>
    </div>
    <p lang="ru">При этом происходит центрирование относительно горизонтальной оси.</p>
    <p lang="en">In this case, centering occurs relative to the horizontal axis.</p>
    <h2>
      <span lang="ru">Входящие и исходящие связи</span>
      <span lang="en">Incoming and outgoing bonds</span>
    </h2>
    <p lang="ru">Если связь должна пересекать границу скобок, то она всегда ставится снаружи от скобок.</p>
    <p lang="en">If a bond must cross the boundary of the brackets, it is always placed outside the brackets.</p>
    <p lang="ru">
      А точнее, схема всегда такая: 
      исходящая связь, открывающася скобка, содержимое, закрывающаяся скобка, коэффициент (если есть), заряд (если есть) и исходящая связь.
    </p>
    <p lang="en">
      More precisely, the scheme is always like this: 
      outgoing bond, opening parenthesis, contents, closing parenthesis, coefficient (if any), charge (if any), and outgoing bond.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">H--$padding(0.1)(C&lt;`|H&gt;&lt;|H&gt;)22--H</code>
      <div class="echem-formula">H--$padding(0.1)(C&lt;`|H&gt;&lt;|H&gt;)22--H</div>
    </div>
    <p lang="ru">То есть, связь ставится непосредственно рядом со скобкой. Но без учёта функций, коэффициентов и зарядов.</p>
    <p lang="en">That is, the bond is placed directly next to the bracket. But without taking into account functions, coefficients and charges.</p>
    <p lang="ru">При этом связь соединяет ближайшие к ней узлы, без учёта веток.</p>
    <p lang="en">In this case, the ыbond connects the nodes closest to it, without taking into account the branches.</p>
    <h2>
      <span lang="ru">Соседство скобок с мягкими связями</span>
      <span lang="en">Adjacency of brackets with soft bonds</span>
    </h2>
    <p lang="ru"><a data-ref="soft-bond">Мягкие связи</a> ведут себя иначе. 
      Они присоединяются ко всей скобке и не пересекают её.
    </p>
    <p lang="en">
      <a data-ref="soft-bond">Soft bonds</a> behave differently. They attach to the entire bracket and do not cross it.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">$slope(45)H`^+-[O`^-/S\O`\`\O\/O^-]-H^+</code>
      <div class="echem-formula">$slope(45)H`^+-[O`^-/S\O`\`\O\/O^-]-H^+</div>
      <code class="chem-code">$slope(45)H`^+-[S&lt;`/O`^-&gt;&lt;`\\O&gt;&lt;\\O&gt;&lt;/O^-&gt;]-H^+</code>
      <div class="echem-formula">$slope(45)H`^+-[S&lt;`/O`^-&gt;&lt;`\\O&gt;&lt;\\O&gt;&lt;/O^-&gt;]-H^+</div>
    </div>
    <p lang="ru">Но положение связи определяется с учетом соединяемых узлов. 
      В предыдущем примере в первой формуле атомы водорода соединяются с атомами кислорода.
      А во втором - с атомом серы.
    </p>
    <p lang="en">
      But the position of the bond is determined taking into account the nodes being connected. 
      In the previous example, in the first formula, hydrogen atoms are connected to oxygen atoms. 
      And in the second - to a sulfur atom.
    </p>
    <h2>
      <span lang="ru">Требования к длине входящих и исходящих связей</span>
      <span lang="en">Requirements for the length of incoming and outgoing bonds</span>
    </h2>
    <p lang="ru">Как уже было сказано ранее, границы скобок определяются автоматически. 
      Допустим, есть вот такая часть формулы, где представлена внутренняя часть скобок и нужно добавить внешнюю.</p>
    <p lang="en">
      As mentioned earlier, the bracket boundaries are determined automatically. 
      For example, there is a part of the formula where the inner part of the brackets is presented and the outer part needs to be added.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">[N&lt;`|CH&lt;`-H3C&gt;-CH3&gt;]'n'</code>
      <div class="echem-formula">[N&lt;`|CH&lt;`-H3C&gt;-CH3&gt;]'n'</div>
    </div>
    <p lang="ru">Пусть левая внешняя часть будет называться R1, а правая - R2. 
      И обе они должны присоединиться к атому азота.
      Но вот что произойдёт, если не позаботиться о длине связей.</p>
    <p lang="en">
      Let's call the left outer part R1 and the right one R2. And both of them should attach to the nitrogen atom. 
      But here's what happens if you don't take care of the bond lengths.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code"><em>{R1}--</em>[N&lt;`|CH&lt;`-H3C&gt;-CH3&gt;]'n'<em>--{R2}</em></code>
      <div class="echem-formula">$color(#C0C){R1}--$color()[N&lt;`|CH&lt;`-H3C&gt;-CH3&gt;]'n'$color(#C0C)--{R2}</div>
    </div>
    <p lang="ru">Хотя R1 и R2 объявлены снаружи скобок, но выглядят они так как будто находятся внутри.</p> 
    <p lang="en">Although R1 and R2 are declared outside the brackets, they look like they are inside.</p>
    <p lang="ru">Чтобы этого не происходило, необходимо явно указать такую длину связей, чтобы они визуально вышли за границы скобок:</p>
    <p lang="en">To prevent this from happening, you need to explicitly specify the length of the links so that they visually extend beyond the boundaries of the brackets:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code"><em>{R1}_(x3)</em>[N&lt;`|CH&lt;`-H3C&gt;-CH3&gt;]'n'<em>_(x3.5){R2}</em></code>
      <div class="echem-formula">$color(#C0C){R1}_(x3)$color()[N&lt;`|CH&lt;`-H3C&gt;-CH3&gt;]'n'$color(#C0C)_(x3.5){R2}</div>
    </div>
    <h2>
      <span lang="ru">Использование ссылок</span>
      <span lang="en">Using links</span>
    </h2>
    <p>
      <span lang="ru">
        У скобки может быть одна входящая связь и одна исходящая. Но что делать, если нужно больше?
        Например, чтобы вывести структурную формулу такого вещества: 
      </span>
      <span lang="en">
        A bracket can have one incoming bond and one outgoing bond. But what if you need more? 
        For example, to derive the structural formula of such a substance:
      </span>
      <span class="echem-formula">H3[SbCl6]</span>.
    </p>
    <p lang="ru">При помощи ссылок можно добавить любое количество входящих или исходящих связей. 
      Но важно, что сначала описывается содержимое скобок, а затем происходит присоединение других цепочек по ссылке.
    </p>
    <p lang="en">
      Using links, you can add any number of incoming or outgoing links. 
      But it is important that the contents of the brackets are described first, and then other chains are attached by link.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">[Sb&lt;/Cl&gt;&lt;\Cl&gt;&lt;|Cl&gt;&lt;`/Cl&gt;&lt;`\Cl&gt;&lt;`|Cl&gt;]^3-;<br />Na^+_(x%d:2.8,N0)#1;<br />Na^+_(x%d,y1,N0)#1_(x-%d,y1,N0)Na^+</code>
      <div class="echem-formula">[Sb&lt;/Cl&gt;&lt;\Cl&gt;&lt;|Cl&gt;&lt;`/Cl&gt;&lt;`\Cl&gt;&lt;`|Cl&gt;]^3-; Na^+_(x%d:2.8,N0)#1; Na^+_(x%d,y1,N0)#1_(x-%d,y1,N0)Na^+</div>
    </div>
    <p lang="ru">
      Тем не менее, при помощи такого подхода не нужно пытаться изменить содержимое скобок.
      Все узлы, которые входят в скобки, должны быть объявлены в скобках. 
      А все узлы из других цепей, которые присоединяются по ссылке, остаются внешними.
    </p>
    <p lang="en">
      However, with this approach, you should not try to change the contents of the parentheses. 
      All nodes that go into the parentheses must be declared in parentheses. 
      And all nodes from other chains that are attached by reference remain external.
    </p>

    <h2>
      <span lang="ru">Вывод справа налево</span>
      <span lang="en">Output from right to left</span>
    </h2>
    <p lang="ru">Допустим, у нас есть вот такая формула:</p>
    <p lang="en">Let's say we have a formula like this:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">H3C-(CH=CCl)2-COOH</code>
      <div class="echem-formula">H3C-(CH=CCl)2-COOH</div>
    </div>
    <p lang="ru">
      И по какой-то причине нужно вывести её в обратном направлении - справа налево.
      До версии 2.0 так делать было невозможно.
      Но и сейчас так стоит делать только в крайних случаях, когда иначе обойтись нельзя.
    </p>
    <p lang="en">
      And for some reason it needs to be output in the opposite direction - from right to left. 
      Before version 2.0 it was impossible to do this. 
      But even now it should be done only in extreme cases, when there is no other way.
    </p>
    <p lang="ru">Начинаем с узла <code>COOH</code>. Затем связь в обратную сторону <code>`-</code>. 
      А дальше важно - нужно обозначить открывающуюся скобку. 
      Хотя визуально на этом месте должна быть закрывающаяся скобка с коэфиициентом.
      Но при описании формулы всегда сначала идёт открывающаяся скобка.
    </p>
    <p lang="en">
      We start with the <code>COOH</code> node. Then the chemical bond in the opposite direction <code>`-</code>. 
      And then it is important - you need to designate the opening bracket. 
      Although visually there should be a closing bracket with a coefficient in this place. 
      But when describing a formula, the opening bracket always comes first.
    </p>
    <p lang="ru">
      Затем перечисляем содержимое скобки справа налево. То есть, сначала узел <code>CCl</code>, 
      затем связь <code>`=</code>, затем узел <code>CH</code>.
    </p>
    <p lang="en">
      Then we list the contents of the bracket from right to left. 
      That is, first the <code>CCl</code> node, then the <code>`=</code> bond, then the <code>CH</code> node.
    </p>
    <p lang="ru">И вот теперь нужно поставить закрывающуюся скобку с коэффициентом.</p>
    <p lang="en">And now you need to put a closing bracket with the coefficient.</p>
    <p lang="ru">Далее исходящая связь <code>`-</code> и последний узел <code>H3C</code>:</p>
    <p lang="en">Next is the outgoing bond <code>`-</code> and the last node <code>H3C</code>:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">COOH`-(CCl`=CH)2`-H3C</code>
      <div class="echem-formula">COOH`-(CCl`=CH)2`-H3C</div>
    </div>
    <p lang="ru">То есть, узлы и связи действительно следуют в обратном порядке. 
      А скобки всегда сначала открываются, а затем закрываются.
      Но при выводе формулы они рисуются в нужном порядке.
    </p>
    <p lang="en">
      That is, the nodes and bonds really follow in reverse order. 
      And the brackets always open first and then close. 
      But when the formula is drawn, they are displayed in the correct order.
    </p>
    <p lang="ru">Вот пример, где это действительно нужно:</p>
    <p lang="en">Here's an example where this is really needed:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">$slope(30)/\|&lt;\(O-CH2)3-H&gt;`/`\&lt;`|&gt;`/<em>(O`-CH2)3`-H</em></code>
      <div class="echem-formula">$slope(30)/\|&lt;\(O-CH2)3-H&gt;`/`\&lt;`|&gt;`/$color(var(--select-color))(O`-CH2)3`-H</div>
    </div>
  </page>

  <page id="rules-macro" data-owner="rules">
    <h1>
      <span lang="ru">Макрокоманды</span>
      <span lang="en">Macro commands</span>
    </h1>
    <p lang="ru">
      Макрокоманды (или макросы) позволяют автоматизировать описание однотипных компонент. 
      Хотя они не вносят никаких специфичных способов описания химических структур, зато позволяют повысить эффективность применения всего инструмента в целом.
    </p>
    <p lang="en">
      Macrocommands (or macros) are powerful tool to automate the description of similar components. 
      Although they did not make any specific ways to describe chemical structures, but it can improve the efficiency of the entire instrument as a whole. 
    </p>
    <p lang="ru">В следующей таблице в кратком виде представлены все синтаксические конструкции.</p>
    <p lang="en">The following table briefly presents all syntactic constructions.</p>
    <table>
      <tr>
        <th><span lang="ru">Действие</span><span lang="en">Action</span></th>
        <th><span lang="ru">Пример синтаксиса</span><span lang="en">Example syntax</span></th>
        <th><span lang="ru">Выход пост-обработки</span><span lang="en">Post processing output</span></th>
      </tr>
      <tr>
        <td><span lang="ru">Простейшее объявление</span><span lang="en">The simplest declaration</span></td>
        <td><code>@:MyMacro()...some text...@;</code></td><td></td></tr>
      <tr>
        <td><span lang="ru">Применение</span><span lang="en">Call the macros</span></td>
        <td><code>@MyMacro()</code></td><td>...some text...</td></tr>
      <tr>
        <td>
          <span lang="ru">Одновременно объявление и применение</span>
          <span lang="en">Simultaneous declaration and use macros</span>
        </td>
        <td><code>@MyMacro()...some text...@()</code></td>
        <td>...some text...</td>
      </tr>
      <tr>
        <td>
          <span lang="ru">Использование позиционных параметров</span>
          <span lang="en">Using positional parameters</span>
        </td> 	
        <td><code>@:MyMacro(a,b)...&a...&b...@(First,Second)</code></td>
        <td>...First...Second...</td>
      </tr>
      <tr>
        <td>
          <span lang="ru">Использование именованных параметров</span>
          <span lang="en">Using named parameters</span>
        </td> 	
        <td><code>@:MyMacro(a,b)...&a...&b...@(b:Second,a:First)</code></td> 	
        <td>...First...Second...</td>
      </tr>
      <tr>
        <td>
          <span lang="ru">Значения по-умолчанию</span>
          <span lang="en">Default values</span>
        </td> 	
        <td><code>@:MyMacro(a:First,b:Second)...&a...&b...@()<br />@MyMacro(,Last)</code></td> 	
        <td>...First...Second...<br />...First...Last...</td>
      </tr>
      <tr>
        <td>
          <span lang="ru">Вложенные вызовы</span>
          <span lang="en">Nested calls</span>
        </td> 	
        <td><code>@:MyMacro(a,b)[&a...&b]@(@MyMacro(A,B),@MyMacro(C,D))</code></td> 	
        <td>[[A...B]...[C...D]]</td>
      </tr>
    </table>
    <h2>
      <span lang="ru">Создание простейшего макроса и его использование</span>
      <span lang="en">Creating a simple macro and using it</span>
    </h2>
    <p lang="ru">Допустим, нужно описать взаимодействие кислоты с щёлочью:</p>
    <p lang="en">Let's say we need to describe the interaction of an acid with an alkali:</p>
    <code class="chem-code">H3C-CH2-C&lt;//O&gt;\O-H + NaOH -&gt; H3C-CH2-C&lt;//O&gt;\O-Na + H2O &lt;=&gt; H3C-CH2-C&lt;//O&gt;\O^- + Na^+ + H2O</code>
    <div class="echem-formula">H3C-CH2-C&lt;//O&gt;\O-H + NaOH -&gt; H3C-CH2-C&lt;//O&gt;\O-Na + H2O &lt;=&gt; H3C-CH2-C&lt;//O&gt;\O^- + Na^+ + H2O</div>
    <p lang="ru">Несложно заметить, что здесь три раза повторяется изрядный кусок молекулы пропионовой кислоты. Давайте вынесем его описание в виде макроса.
      Детали описания макрокоманды выделены цветом.</p>
    <p lang="en">
      It is easy to see that a good portion of the propionic acid molecule is repeated three times here. 
      Let's put its description in the form of a macro. The details of the macro description are highlighted in color.
    </p>
    <div>
      <code class="chem-code">
        <em>@:Pr()</em>H3C-CH2-C&lt;//O&gt;\O<em>@;</em><br />
        <em>@Pr()</em>-H + NaOH -&gt; <em>@Pr()</em>-Na + H2O &lt;=&gt; <em>@Pr()</em>^- + Na^+ + H2O
      </code>
    </div>
    <div class="echem-formula">
      @:Pr()H3C-CH2-C&lt;//O&gt;\O@;
      @:Pr1()$color(var(--select-color))@Pr()$color()@;
      @Pr1()-H + NaOH -&gt; @Pr1()-Na + H2O &lt;=&gt; @Pr1()^- + Na^+ + H2O
    </div>
    <p lang="ru">
      Здесь мы видим, что макрокоманда описывается при помощи конструкции <code>@:Pr() . . . @;</code><br />
      А используется при помощи <code>@Pr()</code>. В качестве имени может выступать слово, начинающееся с латинской буквы.<br />
      При использовании нужно учитывать регистр букв. То есть, <code>ABC</code> и <code>Abc</code> - разные имена.<br />
      Объявленный макрос можно использовать далее в тексте. Он является глобальным определением. Например, мы можем использовать его в другой формуле:
    </p>
    <p lang="en">
      Here we see that the macro command is described using the <code>@:Pr() . . . @;</code><br />
      And it is used by <code>@Pr()</code>. The name must be a word starting with a Latin letter.<br />
      When using, the case of the letters must be taken into account. That is, <code>ABC</code> and <code>Abc</code> are different names.<br />
      The declared macro can be used further in the text. It is a global definition. For example, we can use it in another formula:      
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">@Pr()-CH3</code>
      <div class="echem-formula">@Pr()-CH3</div>
    </div>

    <h2>
      <span lang="ru">Одновременное объявление и использование макроса</span>
      <span lang="en">Declaring and using a macro at the same time</span>
    </h2>
    <p lang="ru">
      Существует способ одновременно описать и использовать макроопределение. 
      Для этого нужно в конце определения вместо <code>@;</code> использовать <code>@()</code>.<br />
      Наш предыдущий пример может быть переписан так:
    </p>
    <p lang="en">
      There is a way to simultaneously declare and use a macro definition.
      To do this, at the end of the declaration, instead of <code>@;</code>, use <code>@()</code>.<br />
      Our previous example can be rewritten as follows:      
    </p>
    <code class="chem-code">
      <em>@:Pr()</em>H3C-CH2-C&lt;//O&gt;\O<em>@()</em>-H + NaOH -&gt; <em>@Pr()</em>-Na + H2O &lt;=&gt; <em>@Pr()</em>^- + Na^+ + H2O
    </code>
    <div class="echem-formula">
      @:Pr()H3C-CH2-C&lt;//O&gt;\O@()-H + NaOH -&gt; @Pr()-Na + H2O &lt;=&gt; @Pr()^- + Na^+ + H2O
    </div>

    <h2>
      <span lang="ru">Использование параметров</span>
      <span lang="en">Using parameters</span>
    </h2>
    <p lang="ru">Следующим естественным шагом использования макросов является применение параметров. Пример с пропионовой кислотой может быть переписан так:</p>
    <p lang="en">The next natural step in using macros is to use parameters. The propionic acid example can be rewritten as:</p>
    <code class="chem-code">@:Pr(<em>x</em>)H3C-CH2-C&lt;//O&gt;\O<em>&x</em>@(<em>-H</em>) + NaOH -&gt; @Pr(<em>-Na</em>) + H2O &lt;=&gt; @Pr(<em>^-</em>) + Na^+ + H2O</code>
    <div class="echem-formula">@:Pr(x)H3C-CH2-C&lt;//O&gt;\O&x@(-H) + NaOH -&gt; @Pr(-Na) + H2O &lt;=&gt; @Pr(^-) + Na^+ + H2O</div>
    <p lang="ru">
      Здесь мы видим параметр <code>x</code>. Он объявлен в скобках, а используется с помощью <code>&x</code>. 
      Названием параметра может быть имя, начинающееся с латинской буквы, далее могут следовать другие буквы или цифры.<br />
      Впрочем, в этом примере мы мало что выиграли от использования параметра. Зато здесь иллюстрируется переопределение макроса. Мы создали новый макрос с тем же именем. Он заменил собой старый макрос. Те обращения, которые использовали вариант без параметра, не могут применяться после объявления нового макроса.
    </p>
    <p lang="en">
      Here we see the parameter <code>x</code>. It is declared in brackets and used with <code>&x</code>.
      The parameter name can be a name starting with a Latin letter, followed by other letters or numbers.<br />
      However, in this example we have gained little from using the parameter. But here we illustrate macro redefinition. 
      We have created a new macro with the same name. It has replaced the old macro. Those calls that used the variant 
      without the parameter cannot be used after the declaration of the new macro.
    </p>
    <p lang="ru">
      Рассмотрим пример посложнее, где потребуется два параметра. 
      Пусть нужно изобразить нечто похожее на кристаллическую решетку, где два элемента чередуются в шахматном порядке. 
      Для дополнительной выразительности раскрасим элементы в красный и синий цвет. 
      Сначала делаем прототип, где элементами являются натрий и хлор:      
    </p>
    <p lang="en">
      
    </p>
    <div><code class="chem-code">
      {}_(x.8,H)$color(red)Na$color()_(x1.4,H)$color(blue)Cl$color()_(x.8,H){};<br />
      {}_(x.8,H)$color(blue)Cl$color()_(x1.4,H)$color(red)Na$color()_(x.8,H){};<br />
      {}|h#-8|h#-4|h{};{}|h#-9|h#-5|h{}      
    </code></div>
    <div class="echem-formula">
      {}_(x.8,H)$color(red)Na$color()_(x1.4,H)$color(blue)Cl$color()_(x.8,H){};
      {}_(x.8,H)$color(blue)Cl$color()_(x1.4,H)$color(red)Na$color()_(x.8,H){};
      {}|h#-8|h#-4|h{};{}|h#-9|h#-5|h{}      
    </div>
    <p lang="ru">
      Описание вышло довольно громоздким. Но тем больше причин для того, чтобы его автоматизировать для дальнейшего использования. 
      Превратим прототип в макрос, заменив <code>Na</code> и <code>Cl</code> на параметры. 
      Назовём их <code>a</code> и <code>b</code>. А сам макрос пусть называется <code>Cross</code>.
    </p>
    <p lang="en">
      The description turned out to be rather cumbersome. But all the more reason to automate it for further use. 
      Let's turn the prototype into a macro, replacing <code>Na</code> and <code>Cl</code> with parameters. 
      Let's call them <code>a</code> and <code>b</code>. And let's call the macro <code>Cross</code>.
    </p>
    <div><code class="chem-code">
      @:Cross(a,b){}_(x.8,H)$color(red)&a$color()_(x1.4,H)$color(blue)&b$color()_(x.8,H){};<br />
      {}_(x.8,H)$color(blue)&b$color()_(x1.4,H)$color(red)&a$color()_(x.8,H){};<br />
      {}|h#-8|h#-4|h{};{}|h#-9|h#-5|h{}@;<br />
      "Cross demo:"_(x2,h,N0){}@Cross(Na,Cl)      
    </code></div>
    <div class="echem-formula">
      @:Cross(a,b){}_(x.8,H)$color(red)&a$color()_(x1.4,H)$color(blue)&b$color()_(x.8,H){};
      {}_(x.8,H)$color(blue)&b$color()_(x1.4,H)$color(red)&a$color()_(x.8,H){};
      {}|h#-8|h#-4|h{};{}|h#-9|h#-5|h{}@;
      "Cross demo:"_(x2,h,N0){}@Cross(Na,Cl)
    </div>
    <p lang="ru">Зато теперь мы получили довольно мощную конструкцию:</p>
    <p lang="en">But now we have a rather powerful design:</p>
    <div><code class="chem-code">@Cross(K,Br) @Cross(Li,F) @Cross(Ga,As)</code></div>
    <div class="echem-formula">@Cross(K,Br) @Cross(Li,F) @Cross(Ga,As)</div>

    <h2>
      <span lang="ru">Позиционные и именованные параметры</span>
      <span lang="en">Positional and named parameters</span>
    </h2>
    <p lang="ru">Допустим мы хотим создать макрос, определяющий производные бензола. Для этого в узлах расставим параметры с номерами, соответствующими номенклатуре IUPAC.</p>
    <p lang="en">
      For example, we want to create a macro that defines benzene derivatives. 
      To do this, we will place parameters with numbers corresponding to the IUPAC nomenclature in the nodes.
    </p>
    <code class="chem-code">@:Ph(n1,n2,n3,n4,n5,n6)&n1\\&n2|&n3`//&n4`\&n5`||&n6/@()</code>
    <div class="echem-formula">@:Ph(n1,n2,n3,n4,n5,n6)&n1\\&n2|&n3`//&n4`\&n5`||&n6/@()</div>
    <p lang="ru">
      Хотя мы объявили целых 6 параметров, но для первой демонстрации мы не использовали ни одного. В результате получился просто бензол. Зато теперь мы можем из этой конструкции сделать толуол, указав в первой позиции метильную группу.
    </p>
    <p lang="en">
      Although we declared as many as 6 parameters, we didn't use any of them for the first demonstration. 
      The result was just benzene. But now we can make toluene from this construction by specifying a methyl group in the first position.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">@Ph(CH3|)</code>
      <div class="echem-formula">@Ph(CH3|)</div>
    </div>
    <p lang="ru">
      Но это лишь малая часть того, как можно использовать полученный макрос. 
      Изобразим орто-, мета- и пара-крезол, подключив гидроксильную группу в позиции 2, 3 и 4 соответственно:
    </p>
    <p lang="en">
      But this is only a small part of how the resulting macro can be used. 
      Let's depict ortho-, meta- and para-cresol by connecting the hydroxyl group in positions 2, 3 and 4, respectively:      
    </p>
    <code class="chem-code">@Ph(CH3|,&lt;/OH&gt;) @Ph(CH3|,,&lt;\OH&gt;) @Ph(CH3|,,,&lt;|OH&gt;)</code>
    <div class="echem-formula">@Ph(CH3|,&lt;/OH&gt;) @Ph(CH3|,,&lt;\OH&gt;) @Ph(CH3|,,,&lt;|OH&gt;)</div>
    <p lang="ru">Здесь мы использовали позиционную подстановку, пропуская те узлы, которые не нужно заполнять. Но можно сразу указать название того параметра, который нужен:</p>
    <p lang="en">Here we used positional substitution, skipping those nodes that do not need to be filled. But you can immediately specify the name of the parameter that is needed:</p>
    <code class="chem-code">@Ph(CH3|,n6:&lt;`\HO&gt;) @Ph(CH3|,n5:&lt;`/HO&gt;) @Ph(CH3|,n4:&lt;|HO&gt;) @Ph(n6:&lt;`\H3C&gt;,n2:&lt;/CH3&gt;,n4:&lt;|CH3&gt;)</code>
    <div class="echem-formula">@Ph(CH3|,n6:&lt;`\HO&gt;) @Ph(CH3|,n5:&lt;`/HO&gt;) @Ph(CH3|,n4:&lt;|HO&gt;) @Ph(n6:&lt;`\H3C&gt;,n2:&lt;/CH3&gt;,n4:&lt;|CH3&gt;)</div>
    <p lang="ru">
      Для первых трех молекул первый параметр задан позиционно. Потому что он и так первый, зачем писать лишнее? А второй параметр указан по названию.<br />
      В последней молекуле все параметры указаны по имени. Как видно, в ней 6-й параметр указан раньше 2-го. Потому что не имеет значения, в каком порядке перечислены именованные параметры.
    </p>
    <p lang="en">
      For the first three molecules, the first parameter is specified positionally. Because it is the first anyway, why write extra? And the second parameter is specified by name.<br />
      In the last molecule, all parameters are specified by name. As you can see, the 6th parameter is specified before the 2nd. Because it does not matter in what order the named parameters are listed.
    </p>
    <p lang="ru">
      Следует уточнить, что при описании макроса мы получили некоторую особенность, связанную с использованием параметров. 
      Первый параметр является началом цепочки, а остальные должны образовывать ответвления. 
      Поэтому конструкции <code>&lt; &gt;</code> используются для всех параметров, кроме первого. 
      Впрочем, ничто не мешает использовать ветку и для первого параметра.<br />
      А ещё мы можем описать пиридин, указав азот в 4-м параметре. В этом случае ветка не нужна:
    </p>
    <p lang="en">
      It should be clarified that when describing the macro we got a certain feature related to the use of parameters.
      The first parameter is the beginning of the chain, and the rest should form branches.
      Therefore, the <code>&lt; &gt;</code> constructions are used for all parameters except the first.
      However, nothing prevents us from using a branch for the first parameter as well.<br />
      We can also describe pyridine by specifying nitrogen in the 4th parameter. In this case, a branch is not needed:      
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">@Ph(n4:N)</code>
      <div class="echem-formula">@Ph(n4:N)</div>
    </div>
    <h2>
      <span lang="ru">Использование значений по-умолчанию</span>
      <span lang="en">Using default values</span>
    </h2>
    <p lang="ru">
      Дальнейшим улучшением описания макроса служит использование параметров с заранее заданными значениями (значениями по-умолчанию). 
      Это позволяет описать достаточно сложные структуры с удобным способом внесения небольших изменений. 
      В качестве примера выполним усовершенствование описанного выше макроса <code>Cross</code>. 
      Дадим пользователю возможность влиять на цвет элементов и длину связей. 
      Для этого добавим параметры <code>colorA</code> и <code>colorB</code>, 
      которым через знак <code>:</code> заданы желаемые значения <code>red</code> и <code>blue</code>. 
      Длину центральной связи зададим параметром <code>len1:1.4</code>, а боковой связи - <code>len2:0.8</code>.
    </p>
    <p lang="en">
      A further improvement of the macro description is the use of parameters with predefined values (default values).
      This allows describing fairly complex structures with a convenient way to make small changes.
      As an example, we will improve the <code>Cross</code> macro described above.
      We will give the user the ability to influence the color of the elements and the length of the links.
      To do this, we will add the parameters <code>colorA</code> and <code>colorB</code>,
      which are given the desired values <code>red</code> and <code>blue</code> via the <code>:</code> sign.
      We will set the length of the central link with the parameter <code>len1:1.4</code>, and the lateral link with <code>len2:0.8</code>.
    </p>
    <div><code class="chem-code">
      @:Cross(a,b,colorA:red,colorB:blue,len1:1.4,len2:0.8)#<br />
      {}_(x&len2,H)$itemColor(&colorA)&a$itemColor()_(x&len1,H)$itemColor(&colorB)&b$itemColor()_(x&len2,H){};<br />
      {}_(x&len2,H)$itemColor(&colorB)&b$itemColor()_(x&len1,H)$itemColor(&colorA)&a$itemColor()_(x&len2,H){};<br />
      {}_(y&len2,H)#-8_(y&len1,H)#-4_(y&len2,H){};<br />
      {}_(y&len2,H)#-9_(H)#-5_(y&len2,H){}@;<br />
      @Cross(Na,Cl)       
    </code></div>
    <div class="echem-formula">
      @:Cross(a,b,colorA:red,colorB:blue,len1:1.4,len2:0.8)#
      {}_(x&len2,H)$itemColor(&colorA)&a$itemColor()_(x&len1,H)$itemColor(&colorB)&b$itemColor()_(x&len2,H){};
      {}_(x&len2,H)$itemColor(&colorB)&b$itemColor()_(x&len1,H)$itemColor(&colorA)&a$itemColor()_(x&len2,H){};
      {}_(y&len2,H)#-8_(y&len1,H)#-4_(y&len2,H){};
      {}_(y&len2,H)#-9_(H)#-5_(y&len2,H){}@;
      @Cross(Na,Cl)       
    </div>
    <p lang="ru">
      Обратите внимание, что после произведенного улучшения осталась возможность использовать макрос точно так же, как и раньше. 
      Это гарантирует, что вся ранее проделанная работа, где содержится обращение к макросу, не потребует переделки. 
      Зато можно пользоваться новыми возможностями там, где это потребуется:
    </p>
    <p lang="en">
      Please note that after the improvement, it is still possible to use the macro in the same way as before.
      This ensures that all previously done work, which contains a reference to the macro, will not require reworking.
      But you can use the new features where necessary:      
    </p>
    <div><code class="chem-code">
      @Cross(K,Br,colorB:darkmagenta,len1:2,len2:1.5)<br />
      $color(blue)@Cross(Fe,Cl,len2:1,colorA:black,colorB:darkgreen)$color()<br />
      $color(#888)@Cross({[+]},{[-]},len2:0.1,colorA:,colorB:)$color()      
    </code></div>
    <div class="echem-formula">
      @Cross(K,Br,colorB:darkmagenta,len1:2,len2:1.5)
      $color(blue)@Cross(Fe,Cl,len2:1,colorA:black,colorB:darkgreen)$color()
      $color(#888)@Cross({[+]},{[-]},len2:0.1,colorA:,colorB:)$color()      
    </div>
    <p lang="ru">
      Первая структура демонстрирует расширенные возможности использования макроса при помощи дополнительных параметров.<br />
      Вторая структура использует внешнее описание цвета линий.<br />
      Третья структура демонстрирует возможность отменить те значения по-умолчанию, которые установлены при описании макроса. 
      То есть, вместо <code>$itemColor(red)</code> будет использоваться <code>$itemColor()</code>, что не повлияет на цвет, заданный ранее.
    </p>
    <p lang="en">
      The first structure demonstrates the advanced capabilities of using the macro with additional parameters.<br />
      The second structure uses an external description of the line color.<br />
      The third structure demonstrates the ability to cancel the default values ​​that are set when describing the macro.
      That is, <code>$itemColor()</code> will be used instead of <code>$itemColor(red)</code>, which will not affect the color specified earlier.
    </p>
    <p lang="ru">
      Рассмотрим более простой, но вполне практичный пример. Допустим, мы работаем над статьёй, посвященной аминокислотам. 
      В ней нужно демонстрировать различные реакции, в том числе образование пептидной связи. 
      Желательно обеспечить некий общий стиль для отображения аминокислот, чтобы читатель сразу обращал внимание на важные особенности, не тратя времени на мелкие детали. 
      Для этого разработаем макрос, где будет возможно определить радикал и при необходимости модифицировать аминогруппу, изображаемую слева, и карбоксильную группу, изображаемую справа.
    </p>
    <p lang="en">
      Let's look at a simpler, but quite practical example. Let's say we are working on an article about amino acids.
      It needs to demonstrate various reactions, including the formation of a peptide bond.
      It is desirable to provide a certain general style for displaying amino acids so that the reader immediately pays attention to important features, without wasting time on small details.
      To do this, we will develop a macro where it will be possible to determine the radical and, if necessary, modify the amino group depicted on the left and the carboxyl group depicted on the right.      
    </p>
    <code class="chem-code">@:AminoAcid(r:{R},a:H-,c:OH,rcol:blue)&a$C()N&lt;`|H&&gt;-C&lt;`|H&gt;&lt;|$color(&rcol)&r$color()&gt;-C&lt;`||O&gt;-&c@()</code>
    <div class="echem-formula">@:AminoAcid(r:{R},a:H-,c:OH,rcol:blue)&a$C()N&lt;`|H&&gt;-C&lt;`|H&gt;&lt;|$color(&rcol)&r$color()&gt;-C&lt;`||O&gt;-&c@()</div>
    <p lang="ru">
      Мы получили мощный инструмент, которым можно легко оперировать. (Хотя конечно под эту схему не подходит 
      <a href="https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%BE%D0%BB%D0%B8%D0%BD" target="_blank">пролин</a>).
    </p>
    <p lang="en">
      We have received a powerful tool that can be easily operated. (Although of course 
      <a href="https://en.wikipedia.org/wiki/Proline" target="_blank">proline</a> does not fit this scheme).
    </p>
    <p style="color: gray;">
      <span lang="ru">
        Конечно, это не соответствует правилам хиральности аминокислот. 
        Но допустим, что это сделано чтобы избежать лишней сложности
      </span>
      <span lang="en">
        Of course, this does not comply with the rules of amino acid chirality.
        But let's assume that this is done to avoid unnecessary complexity
      </span>
      :)
    </p>
    <p lang="ru">
      Нарисуем несколько аминокислот - 
      <a href="https://ru.wikipedia.org/wiki/%D0%90%D0%BB%D0%B0%D0%BD%D0%B8%D0%BD" target="_blank">аланин</a>, 
      <a href="https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D1%82%D0%B8%D0%BE%D0%BD%D0%B8%D0%BD" target="_blank">метионин</a> 
      и <a href="https://ru.wikipedia.org/wiki/%D0%93%D0%BB%D1%83%D1%82%D0%B0%D0%BC%D0%B8%D0%BD" target="_blank">глутамин</a>:
    </p>
    <p lang="en">
      Let's draw some amino acids - 
      <a href="https://en.wikipedia.org/wiki/Alanine" target="_blank">alanine</a>, 
      <a href="https://en.wikipedia.org/wiki/Methionine" target="_blank">methionine</a> and 
      <a href="https://en.wikipedia.org/wiki/Glutamine" target="_blank">glutamine</a>:
    </p>
    <code class="chem-code">@AminoAcid(CH3) @AminoAcid(CH2|CH2|S|CH3) @AminoAcid(CH2|CH2|C`/O/\NH2)</code>
    <div class="echem-formula">@AminoAcid(CH3) @AminoAcid(CH2|CH2|S|CH3) @AminoAcid(CH2|CH2|C`/O/\NH2)</div>
    <p lang="ru">Теперь изобразим для этих молекул реакцию с образованием пептидной связи.</p>
    <p lang="en">Now let us depict for these molecules the reaction with the formation of a peptide bond.</p>
    <div><code class="chem-code">
      @AminoAcid(CH3) + @AminoAcid(CH2|CH2|S|CH3) + @AminoAcid(CH2|CH2|C`/O/\NH2) -&gt; <br />
      @AminoAcid(CH3,c:)@AminoAcid(CH2|CH2|S|CH3,a:,c:)@AminoAcid(CH2|CH2|C`/O/\NH2,a:) + 2H2O
    </code></div>
    <div class="echem-formula">@AminoAcid(CH3) + @AminoAcid(CH2|CH2|S|CH3) + @AminoAcid(CH2|CH2|C`/O/\NH2) -&gt; @AminoAcid(CH3,c:)@AminoAcid(CH2|CH2|S|CH3,a:,c:)@AminoAcid(CH2|CH2|C`/O/\NH2,a:) + 2H2O</div>
    <h2>
      <span lang="ru">Вложенное использование макросов</span>
      <span lang="en">Nested use of macros</span>
    </h2>
    <p lang="ru">Из последнего примера видно, что неплохо бы ввести отдельное описание для аминокислот, чтобы не перечислять каждый раз их радикалы в параметрах. 
      Опишем макросы для трёх упоминавшихся выше аминокислот.</p>
    <p lang="en">
      From the last example it is clear that it would be a good idea to introduce a separate description for amino acids, 
      so as not to list their radicals in the parameters each time. 
      Let's describe the macros for the three amino acids mentioned above.
    </p>
    <div><code class="chem-code">
      @:Ala(a,c)@AminoAcid(CH3,&a,&c)@;<br />
      @:Met(a,c)@AminoAcid(CH2|CH2|S|CH3,&a,&c)@;<br />
      @:Gln(a,c)@AminoAcid(CH2|CH2|C`/O/\NH2,&a,&c)@;      
    </code></div>
    <div class="echem-formula">
      @:Ala(a,c)@AminoAcid(CH3,&a,&c)@;
      @:Met(a,c)@AminoAcid(CH2|CH2|S|CH3,&a,&c)@;
      @:Gln(a,c)@AminoAcid(CH2|CH2|C`/O/\NH2,&a,&c)@;
    </div>
    <p lang="ru">И перепишем уравнение с образованием пептидной связи</p>
    <p lang="en">And we will rewrite the equation with the formation of a peptide bond</p>
    <code class="chem-code">@Ala() + @Met() + @Gln() -> @Ala(c:# )@Met(# ,# )@Gln(a:# )</code>
    <div class="echem-formula">@Ala() + @Met() + @Gln() -> @Ala(c:# )@Met(# ,# )@Gln(a:# )</div>
    <p lang="ru">
      Некоторое неудобство состоит в том, что тут пришлось явно указать, что в местах стыковки аминогруппа и карбоксильная группа задана пустым местом. 
      Для этого используется <a href="?p=rules-refs#rules-break">разрыв</a>: <code>#<i>пробел</i></code>. 
      Это компромиссное решение, связанное с конкретным способом объявления макроса.<br />
      Но мы можем улучшить описание <code>@Ala</code>, чтобы оно стало аналогичным по поведению <code>@AminoAcid</code>:
    </p>
    <p lang="en">
      Some inconvenience is that here it was necessary to explicitly indicate that in the places of joining the amino group and carboxyl group the empty space is specified.
      For this, <a href="?p=rules-refs#rules-break">break</a> is used: <code>#<i>space</i></code>.
      This is a compromise solution related to the specific way of declaring the macro.<br />
      But we can improve the description of <code>@Ala</code> so that it becomes similar in behavior to <code>@AminoAcid</code>:      
    </p>
    <div><code class="chem-code">
      @:Ala(a:H-,c:OH)@AminoAcid(CH3,a:&a,c:&c)@;<br />
      @Ala() -&gt; {R1}-@Ala(a:,c:){R2}      
    </code></div>
    <div class="echem-formula">
      @:Ala(a:H-,c:OH)@AminoAcid(CH3,a:&a,c:&c)@;
      @Ala() -&gt; {R1}-@Ala(a:,c:){R2}      
    </div>
    <p lang="ru">Здесь всё в руках автора макроса. Он может выбирать, где какой способ применить.</p>
    <p lang="en">Here everything is in the hands of the macro author. He can choose where to apply which method.</p>
    <p lang="ru">
      Попробуем совместить разработанные макросы <code>@AminoAcid</code> и <code>@Ph</code> для описания ароматических аминокислот: 
      <a href="https://ru.wikipedia.org/wiki/%D0%A4%D0%B5%D0%BD%D0%B8%D0%BB%D0%B0%D0%BB%D0%B0%D0%BD%D0%B8%D0%BD" target="_blank">фенилаланин</a> 
      и <a href="https://ru.wikipedia.org/wiki/%D0%A2%D0%B8%D1%80%D0%BE%D0%B7%D0%B8%D0%BD" target="_blank">тирозин</a>. 
      У обеих метильная группа стыкуется к узлу 1, а у тирозина гидроксильная группа - к узлу 4.
    </p>
    <p lang="en">
      Let's try to combine the developed macros <code>@AminoAcid</code> and <code>@Ph</code> to describe aromatic amino acids: 
      <a href="https://en.wikipedia.org/wiki/Phenylalanine" target="_blank">phenylalanine</a> 
      and <a href="https://en.wikipedia.org/wiki/Tyrosine" target="_blank">tyrosine</a>. 
      In both, the methyl group is attached to node 1, and in tyrosine, the hydroxyl group is attached to node 4.      
    </p>
    <div><code class="chem-code">
      @:Phe(a,c)@AminoAcid(@Ph(CH2|),&a,&c)@()<br />
      + @:Tyr(a,c)@AminoAcid(@Ph(CH2|,n4:&lt;|OH&gt;),&a,&c)@() =<br />
      @Phe(c:# )@Tyr(a:# ) + H2O      
    </code></div>
    <div class="echem-formula">
      @:Phe(a,c)@AminoAcid(@Ph(CH2|),&a,&c)@()
      + @:Tyr(a,c)@AminoAcid(@Ph(CH2|,n4:&lt;|OH&gt;),&a,&c)@() =
      @Phe(c:# )@Tyr(a:# ) + H2O      
    </div>
    <p lang="ru">Ну и ещё один пример, где используем вложенный вызов <code>@Cross</code> для создания увеличенной структуры.</p>
    <p lang="en">Well, here's another example where we use a nested <code>@Cross</code> call to create an enlarged structure.</p>
    <div><code class="chem-code">
      @:Cross1(a,b,colorA:red,colorB:blue)@Cross(&a,&b,colorA:&colorA,colorB:&colorB,len1:2,len2:1)@;<br />
      @:Cross2(a,b,colorA:red,colorB:blue)@Cross1(&a,&b,colorA:&colorA,colorB:&colorB)_(x1,y-3,N0)# @Cross1(&a,&b,colorA:&colorA,colorB:&colorB)@;<br />
      @:Cross4(a,b,colorA:red,colorB:blue)@Cross2(&a,&b,colorA:&colorA,colorB:&colorB)_(x-7,y1,N0)# @Cross2(&a,&b,colorA:&colorA,colorB:&colorB)@;<br />
      @Cross1(Na,Cl) -&gt; @Cross2($C()Na,Cl,colorB:green) -&gt; @Cross4($C()Na,Cl)      
    </code></div>
    <div class="echem-formula">
      @:Cross1(a,b,colorA:red,colorB:blue)@Cross(&a,&b,colorA:&colorA,colorB:&colorB,len1:2,len2:1)@;
      @:Cross2(a,b,colorA:red,colorB:blue)@Cross1(&a,&b,colorA:&colorA,colorB:&colorB)_(x1,y-3,N0)# @Cross1(&a,&b,colorA:&colorA,colorB:&colorB)@;
      @:Cross4(a,b,colorA:red,colorB:blue)@Cross2(&a,&b,colorA:&colorA,colorB:&colorB)_(x-7,y1,N0)# @Cross2(&a,&b,colorA:&colorA,colorB:&colorB)@;
      @Cross1(Na,Cl) -&gt; @Cross2($C()Na,Cl,colorB:green) -&gt; @Cross4($C()Na,Cl)      
    </div>
    <p lang="ru">Функция <a href="?p=ref-func-C">$C()</a> использована для выравнивания реагентов по вертикали.</p>
    <p lang="en">The <a href="?p=ref-func-C">$C()</a> function is used to align the reagents vertically.</p>
    <h2>
      <span lang="ru">Пример. Нумерация узлов</span>
      <span lang="en">Example. Node numbering</span>
    </h2>
    <p lang="ru">В номенклатуре химических соединений часто возникает необходимость показать нумерацию узлов (локанты). Это удобно делать при помощи макроса:</p>
    <p lang="en">In the nomenclature of chemical compounds, it is often necessary to show the numbering of nodes (locants). This is conveniently done using a macro:</p>
    <div><code class="chem-code">
      @:n(n,a,L:0.4)&lt;_(A&a,L&L,N0)$itemColor1(blue)&quot;&n&quot;&gt;@;<br />
      -S@n(3,30,.5)_q@n(2,-10)_qqS&lt;_(y-.5)H&gt;@n(1,90,.6)_q_qq<br />
      =_q7SH@n(3,180,.5)_qq7@n(2,-20)_q7S&lt;_(y-.5)H2&gt;@n(1,90,.6)_q7_qq7_q7<br />
      =_q7@n(3,0)_qq7@n(2,-20)_q7S&lt;_(y-.5)H2&gt;@n(1,90,.6)_q7_qq7_q7      
    </code></div>
    <div class="echem-formula">
      @:n(n,a,L:0.4)&lt;_(A&a,L&L,N0)$itemColor1(blue)&quot;&n&quot;&gt;@;
      -S@n(3,30,.5)_q@n(2,-10)_qqS&lt;_(y-.5)H&gt;@n(1,90,.6)_q_qq
      =_q7SH@n(3,180,.5)_qq7@n(2,-20)_q7S&lt;_(y-.5)H2&gt;@n(1,90,.6)_q7_qq7_q7
      =_q7@n(3,0)_qq7@n(2,-20)_q7S&lt;_(y-.5)H2&gt;@n(1,90,.6)_q7_qq7_q7      
    </div>
    <p lang="ru">Здесь макрос называется <code>n</code> и имеет три параметра:</p>
    <p lang="en">Here the macro is called <code>n</code> and has three parameters:</p>
    <ul>
      <li>
        <code>n</code> - 
        <span lang="ru">номер узла.</span>
        <span lang="en">node number.</span>
      </li>
      <li>
        <code>a</code> - 
        <span lang="ru">угол положения номера относительно узла.</span>
        <span lang="en">angle of the number position relative to the node.</span>
      </li>
      <li>
        <code>L</code> - 
        <span lang="ru">(необязательный параметр) расстояние от узла до номера.</span>
        <span lang="en">(optional) distance from node to number.</span>
      </li>
    </ul>
    <p lang="ru">Макрос ставится сразу после объявления узла. А если <a data-ref="auto-node">автоузел</a>, то вместо объявления узла.</p>
    <p lang="en">The macro is placed immediately after the node declaration. And if <a data-ref="auto-node">autonode</a>, then instead of the node declaration.</p>
    <h2>
      <span lang="ru">Заключение</span>
      <span lang="en">Conclusion</span>
    </h2>
    <p lang="ru">Подведём итоги. Применение макроопределений позволяет:</p>
    <p lang="en">Let's sum it up. Using macro definitions allows you:</p>
    <ul>
      <li lang="ru">сократить объём описания для формул с однотипным содержанием;</li>
      <li lang="en">to reduce the volume of description for formulas with the same type of content;</li>
      <li lang="ru">сократить сложность описания за счет декомпозиции;</li>
      <li lang="en">reducing the complexity of the description due to decomposition;</li>
      <li lang="ru">избежать опечаток, появляющихся в процессе дублирования схожей по составу информации;</li>
      <li lang="en">to avoid typos that appear in the process of duplicating similar information;</li>
      <li lang="ru">проводить улучшения внутри макроопределений, которые будут автоматически распространяться на остальную часть текста.</li>
      <li lang="en">to make improvements within macro definitions that will automatically propagate to the rest of the text.</li>
    </ul>
    <p lang="ru">
      Обратной стороной медали является дополнительное время, связанное с изучением данного раздела. 
      Кроме того, описание макроса потребует несколько больше усилий и времени, чем описание формулы. 
      Чем более универсальный функционал, тем больше потребуется время на его тестирование и отладку.
    </p>
    <p lang="en">
      The downside is the extra time associated with studying this section.
      In addition, describing a macro will require a little more effort and time than describing a formula.
      The more universal the functionality, the more time it will take to test and debug it.      
    </p>
  </page>

  <page id="templates" data-owner="home">
    <h1>
      <span lang="ru">Подсказки</span>
      <span lang="en">Hints</span>
    </h1>
    <p lang="ru">В этом разделе для удобства собраны примеры использования разных конструкций CharChem.</p>
    <p lang="en">For convenience, this section contains examples of using different CharChem designs.</p>
    <div class="templ-box">
      <div class="templ-left" id="tmList">
        <div id="tm-abs-coeff"><div class="echem-formula">C'n'H'2n+2'</div></div>
        <div id="tm-oxidation"><div class="echem-formula">K(+1)Mn(+7)O4(-2)</div></div>
        <div id="tm-M"><div class="echem-formula">$M(235)U</div></div>
        <div id="tm-nM"><div class="echem-formula">$nM(232)Th + $nM(1,0){n}</div></div>
        <div id="tm-dots"><div class="echem-formula">H-$dots(TB)O-H</div></div>
        <div id="tm-colors"><div class="echem-formula">$color(blue)H2$color()S$color(red)O4</div></div>
        <div id="tm-node-charge"><div class="echem-formula">PO4^3-</div></div>
        <div id="tm-node-charge-ext"><div class="echem-formula">O`^-/N$pos(90)^+`|O|\O^-</div></div>
        <div id="tm-spec-chars"><div class="echem-formula">S"|v" + H2"|^, 0^oC"</div></div>
        <div id="tm-greek"><div class="echem-formula">{[gamma]} "[Delta]"-&gt;</div></div>
        <div id="tm-supsub"><div class="echem-formula">{R^A} {R_{AB}}</div></div>
        <div id="tm-text-color"><div class="echem-formula">-"AB{\color{red}CD}EF"</div></div>
        <div id="tm-local"><div class="echem-formula">Na"`(s)`" + Cl2"`(g)`"</div></div>
        <div id="tm-mul"><div class="echem-formula">CuSO4*5H2O</div></div>
        <div id="tm-branch"><div class="echem-formula">\&lt;|&gt;/</div></div>
        <div id="tm-slope"><div class="echem-formula">$slope(45)Ca/O\S&lt;//O&gt;&lt;\\O&gt;`/O`\</div></div>
        <div id="tm-L"><div class="echem-formula">$L(2)|$L(3)-$L(2)`|$L()`-|`-`|`-</div></div>
        <div id="tm-dblAlign"><div class="echem-formula">$dblAlign(R)\&lt;/&gt;||&lt;\&gt;`/ $dblAlign(L)\&lt;/&gt;||&lt;\&gt;`/</div></div>
        <div id="tm-bond-color"><div class="echem-formula">\$color(#F0F)//$color()\</div></div>
        <div id="tm-hex-vert"><div class="echem-formula">/\|`/`\`|</div></div>
        <div id="tm-hex-horiz"><div class="echem-formula">-\`/`-`\/</div></div>
        <div id="tm-bond-0"><div class="echem-formula">Na|0Cl_q4oNa_(y-1,N0)Cl</div></div>
        <div id="tm-chiral"><div class="echem-formula">\w-/ww`\d`-`/dd</div></div>
        <div id="tm-cross"><div class="echem-formula">\=x/</div></div>
        <div id="tm-wave"><div class="echem-formula">_(x2,y1,~)</div></div>
        <div id="tm-h-bond"><div class="echem-formula">/h_(x2,y1,H)</div></div>
        <div id="tm-arrows"><div class="echem-formula">\v \vv \vvv</div></div>
        <div id="tm-center"><div class="echem-formula">/`OCH3</div></div>
        <div id="tm-hard-bond"><div class="echem-formula">HC|H2C--NH`|CH`==</div></div>
        <div id="tm-tri"><div class="echem-formula">-_p3_p3 |_q3_qq3</div></div>
        <div id="tm-penta"><div class="echem-formula">-_p_p_p_p |_qq_qNH_q_qq</div></div>
        <div id="tm-hepta"><div class="echem-formula">-_p7_pp7_p7O_p7_pp7_p7</div></div>
        <div id="tm-half-height"><div class="echem-formula">\N&lt;_(y.5)H&gt;/N&lt;_(y-.5)H&gt;\</div></div>
        <div id="tm-sqrt3"><div class="echem-formula">|\/`|_(x-$3)</div></div>
        <div id="tm-vars"><div class="echem-formula">_(x%a:.6,y%h:1.2)_(x%b:1.1,y-%d:.4)_(x%c:1.4,y%d)_(x-%a,y-%h)_(x-%b,y%d)_(x-%c,y-%d)</div></div>
        <div id="tm-norm"><div class="echem-formula">-v_(a54)_q&lt;_(a54)&gt;_q&lt;_(a54)&gt;_q_q</div></div>
        <div id="tm-relative0"><div class="echem-formula">-\C_(a0,N3)N</div></div>
        <div id="tm-style"><div class="echem-formula">_(y1,S|:)_(A30,S|:)_(A-30,S|:)_(y-1,S|:)</div></div>
        <div id="tm-implicit-nodes"><div class="echem-formula">H3C_(h)C&lt;||O&gt;CH2_(h)C&lt;||O&gt;CH3</div></div>
        <div id="tm-circle"><div class="echem-formula">/\|`/`\`|_o</div></div>
        <div id="tm-spline"><div class="echem-formula">_(x2)\`/_(x-2)`\/_s(S:)</div></div>
        <div id="tm-bezier"><div class="echem-formula">H2C`|H2C`|H2C_m(x2)_m(y2)_(x-2)</div></div>
        <div id="tm-c"><div class="echem-formula">|\c\\\</div></div>
        <div id="tm-braces"><div class="echem-formula">{{H}} {{{R}}}</div></div>
        <div id="tm-node-bracket"><div class="echem-formula">Na[B$slope(45)&lt;/F&gt;&lt;\F&gt;&lt;`/F&gt;&lt;`\F&gt;]</div></div>
        <div id="tm-soft-bracket"><div class="echem-formula">H-(O|O)-H</div></div>
        <div id="tm-bond-bracket"><div class="echem-formula">K_(x2,H)[B$slope(45)&lt;\F&gt;&lt;`/F&gt;&lt;`\F&gt;&lt;/F&gt;]</div></div>
        <div id="tm-padding"><div class="echem-formula">$padding(0.7)[N]</div></div>
        <div id="tm-index"><div class="echem-formula">
          @:n(n,a,L:.4)&lt;_(A&a,L&L,N0)$itemColor1(#999)&quot;&n&quot;&gt;@;<br />
          OH|@n(1,-30)\@n(2,-30)||@n(3,30)`/`\`|/          
        </div></div>
        <div id="tm-bg"><div class="echem-formula">$bg(orange,ellipse)OH|\|`/`\`|/</div></div>
        <div id="tm-reagent-center"><div class="echem-formula">H2O + H\$C()C|O`|/H</div></div>
      </div>
      <div class="templ-right" id="tmDefList">
        <div id="def-tm-abs-coeff">
          <h2>
            <span lang="ru">Абстрактный коэффициент</span>
            <span lang="en">Abstract coefficient</span>
          </h2>
          <p lang="ru">Если значение коэффициента не является целым числом, то оно указывается при помощи апострофов.</p>
          <p lang="en">If the value of the coefficient is not an integer, it is indicated using apostrophes.</p>
          <p lang="ru">См: <a href="?p=rules-node-item-props">Возможности элементов узлов</a></p>
          <p lang="en">See: <a href="?p=rules-node-item-props">Features of node items</a></p>
        </div>
        <div id="def-tm-oxidation">
          <h2>
            <span lang="ru">Степень окисления</span>
            <span lang="en">Oxidation state</span>
          </h2>
          <p lang="ru">Степень окисления элемента указывается как <a href="?p=ref-charge">описание заряда</a> в скобках сразу после описания атома.</p>
          <p lang="en">The oxidation state of an element is given as a <a href="?p=ref-charge">charge description</a> in parentheses immediately following the atom description.</p>
          <p lang="ru">См: <a href="?p=rules-node-item-props">Возможности элементов узлов</a></p>
          <p lang="en">See: <a href="?p=rules-node-item-props">Features of node items</a></p>
        </div>
        <div id="def-tm-M">
          <h2>
            <span lang="ru">Атомная масса изотопа</span>
            <span lang="en">Atomic mass of isotope</span>
          </h2>
          <p lang="ru">Используется функция <a href="?p=ref-func-M">$M()</a></p>
          <p lang="en">The function <a href="?p=ref-func-M">$M()</a> is used</p>
          <p lang="ru">См: <a href="?p=rules-node-item-props">Возможности элементов узлов</a></p>
          <p lang="en">See: <a href="?p=rules-node-item-props">Features of node items</a></p>
        </div>
        <div id="def-tm-nM">
          <h2>
            <span lang="ru">Атомный номер и масса изотопа</span>
            <span lang="en">Atomic number and mass of the isotope</span>
          </h2>
          <p lang="ru">Используется функция <a href="?p=ref-func-nM">$nM()</a></p>
          <p lang="en">The function <a href="?p=ref-func-nM">$nM()</a> is used.</p>
          <p lang="ru">См: <a href="?p=rules-node-item-props">Возможности элементов узлов</a></p>
          <p lang="en">See: <a href="?p=rules-node-item-props">Features of node items</a></p>
        </div>
        <div id="def-tm-dots">
          <h2>
            <span lang="ru">Структуры Льюиса</span>
            <span lang="en">Lewis structures</span>
          </h2>
          <p lang="ru">Используется функция <a href="?p=ref-func-dots">$dots()</a></p>
          <p lang="en">The function <a href="?p=ref-func-dots">$dots()</a> is used</p>
          <p lang="ru">См: <a href="?p=rules-node-item-props">Возможности элементов узлов</a></p>
          <p lang="en">See: <a href="?p=rules-node-item-props">Features of node items</a></p>
        </div>
        <div id="def-tm-colors">
          <h2>
            <span lang="ru">Цветовые функции</span>
            <span lang="en">Color functions</span>
          </h2>
          <p lang="ru">Для изменения цвета разных частей формулы используется несколько функций. Чаще всего <a href="?p=ref-func-color">$color()</a></p>
          <p lang="en">Several functions are used to change the color of different parts of a formula. The most common is <a href="?p=ref-func-color">$color()</a></p>
          <p lang="ru">См: <a href="?p=rules-color">Цветовые функции</a></p>
          <p lang="en">See: <a href="?p=rules-color">Color functions</a></p>
        </div>
        <div id="def-tm-node-charge">
          <h2>
            <span lang="ru">Заряд узла</span>
            <span lang="en">Node charge</span>
          </h2>
          <p lang="ru">После описания узла ставится знак <code>^</code> и <a href="?p=ref-charge">описание заряда</a></p>
          <p lang="en">After the description of the node, the <code>^</code> sign and <a href="?p=ref-charge">charge description</a> are placed.</p>
          <p lang="ru">См: <a href="?p=rules-node-charge">Заряд узла</a></p>
          <p lang="en">See: <a href="?p=rules-node-charge">Node charge</a></p>
        </div>
        <div id="def-tm-node-charge-ext">
          <h2>
            <span lang="ru">Положение заряда узла</span>
            <span lang="en">Node charge position</span>
          </h2>
          <p lang="ru">Если нужно расположить заряд слева сверху от узла, то используется конструкция <code>`^</code>.</p>
          <p lang="en">If you need to place a charge to the left above the node, then the <code>`^</code> construction is used.</p>
          <p lang="ru">А если нужно расположить как-то иначе, то используется функция <a href="?p=ref-func-pos">$pos()</a>.</p>
          <p lang="en">And if you need to arrange it in some other way, then the function <a href="?p=ref-func-pos">$pos()</a> is used.</p>
          <p lang="ru">См: <a href="?p=rules-node-charge">Заряд узла</a></p>
          <p lang="en">See: <a href="?p=rules-node-charge">Node charge</a></p>
        </div>
        <div id="def-tm-spec-chars">
          <h2>
            <span lang="ru">Специальные символы</span>
            <span lang="en">Special characters</span>
          </h2>
          <p>
            <span lang="ru">Внутри текстовых элементов можно использовать магические комбинации:</span> 
            <span lang="en">You can use "magic" combinations inside text items:</span>
            <code>^o</code> <code>|^</code> <code>|v</code>
          </p>
          <p lang="ru">См: <a href="?p=rules-text">Текстовые возможности</a></p>
          <p lang="en">See: <a href="?p=rules-text">Text features</a></p>
        </div>
        <div id="def-tm-greek">
          <h2>
            <span lang="ru">Греческие буквы</span>
            <span lang="en">Greek letters</span>
          </h2>
          <p lang="ru">Внутри текстовых и <a data-ref="abs-item">абстрактных</a> элементов можно использовать 
            <a href="?p=ref-greek">греческие буквы</a> по их названиям в квадратных скобках.</p>
          <p lang="en">
            Within text and <a data-ref="abs-item">abstract</a> items, you can use
            <a href="?p=ref-greek">Greek letters</a> by their names in square brackets.
          </p>
          <p lang="ru">См: <a href="?p=rules-text">Текстовые возможности</a></p>
          <p lang="en">See: <a href="?p=rules-text">Text features</a></p>
        </div>
        <div id="def-tm-supsub">
          <h2>
            <span lang="ru">Надстрочные и подстрочные символы</span>
            <span lang="en">Superscript and subscript characters</span>
          </h2>
          <p lang="ru">Внутри текстовых и <a data-ref="abs-item">абстрактных</a> элементов можно использовать 
            для надстрочных символов: <code>^</code> (для одного) или <code>^{}</code> (для нескольких).
            А для подстрочных соответственно - <code>_</code> (для одного) или <code>_{}</code> (для нескольких).
          </p>
          <p lang="en">
            Inside text and <a data-ref="abs-item">abstract</a> items, you can use for superscript characters: 
            <code>^</code> (for one) or <code>^{}</code> (for several).
            And for subscript characters, respectively - <code>_</code> (for one) or <code>_{}</code> (for several).            
          </p>   
          <p lang="ru">См: <a href="?p=rules-text">Текстовые возможности</a></p>
          <p lang="en">See: <a href="?p=rules-text">Text features</a></p>
        </div>
        <div id="def-tm-text-color">
          <h2>
            <span lang="ru">Цвет внутри текста</span>
            <span lang="en">Color inside text</span>
          </h2>
          <p lang="ru">Внутри текстовых и <a data-ref="abs-item">абстрактных</a> элементов можно менять цвет при помощи 
            <code>\color{код-цвета}</code> или <code>{\color{код-цвета}текст}</code>.
          </p>
          <p lang="en">
            Within text and <a data-ref="abs-item">abstract</a> items, you can change the color using
            <code>\color{color-code}</code> or <code>{\color{color-code}text}</code>.            
          </p>
          <p lang="ru">См: <a href="?p=rules-text">Текстовые возможности</a></p>
          <p lang="en">See: <a href="?p=rules-text">Text features</a></p>
        </div>
        <div id="def-tm-local">
          <h2>
            <span lang="ru">Локализованные фразы</span>
            <span lang="en">Localized phrases</span>
          </h2>
          <p lang="ru">Внутри текстовых элементов при помощи <a href="?p=ref-grave">обратных апострофов</a> 
            можно использовать фразы из словаря, которые должны переводиться на разные языки.
          </p>
          <p lang="en">
            Within text items, using <a href="?p=ref-grave">backticks</a>, 
            you can use phrases from the dictionary that should be translated into different languages.
          </p>
          <p lang="ru">См: <a href="?p=rules-text">Текстовые возможности</a></p>
          <p lang="en">See: <a href="?p=rules-text">Text features</a></p>
        </div>
        <div id="def-tm-mul">
          <h2>
            <span lang="ru">Гидраты, сольваты</span>
            <span lang="en">Hydrates, solvates</span>
          </h2>
          <p lang="ru">Используется символ <code>*</code> (без пробелов).</p>
          <p lang="en">The symbol <code>*</code> is used (no spaces).</p>
          <p lang="ru">См: <a href="?p=rules-hydrates">Гидраты, сольваты и аддукты</a></p>
          <p lang="en">See: <a href="?p=rules-hydrates">Hydrates, solvates and adducts</a></p>
        </div>
        <div id="def-tm-branch">
          <h2>
            <span lang="ru">Ветвления</span>
            <span lang="en">Branching</span>
          </h2>
          <p lang="ru">Для простейших случаев ветвления используются угловые скобки <code>&lt; &gt;</code> или <code>(* *)</code>.</p>
          <p lang="en">For the simplest cases of branching, angle brackets <code>&lt; &gt;</code> or <code>(* *)</code> are used.</p>
          <p lang="ru">См: <a href="?p=rules-branch">Ветвления</a>.</p>
          <p lang="en">See: <a href="?p=rules-branch">Branching</a>.</p>
          <p lang="ru">Для более сложных случаев можно использовать <a href="?p=rules-refs">соединение цепочек</a>.</p>
          <p lang="en">For more complex cases, <a href="?p=rules-refs">chain connection</a> can be used.</p>
        </div>
        <div id="def-tm-slope">
          <h2>
            <span lang="ru">Угол наклона связей</span>
            <span lang="en">Angle of bonds</span>
          </h2>
          <p lang="ru">Для <a data-ref="bond-short">кратких связей</a> можно менять угол наклона при помощи <a href="?p=ref-func-slope">$slope()</a>.</p>
          <p lang="en">For <a data-ref="bond-short">short bonds</a>, you can change the slope using <a href="?p=ref-func-slope">$slope()</a>.</p>
          <p lang="ru">См: <a href="?p=rules-bond-funcs">Функции для химических связей</a>.</p>
          <p lang="en">See: <a href="?p=rules-bond-funcs">Functions for chemical bonds</a>.</p>
        </div>
        <div id="def-tm-L">
          <h2>
            <span lang="ru">Длина связи</span>
            <span lang="en">Bond length</span>
          </h2>
          <p lang="ru">Длину <a data-ref="bond-short">кратких связей</a> можно регулировать функцией <a href="?p=ref-func-L">$L()</a>.</p>
          <p lang="en">The length of <a data-ref="bond-short">short bonds</a> can be adjusted using the <a href="?p=ref-func-L">$L()</a> function.</p>
          <p lang="ru">См: <a href="?p=rules-bond-funcs">Функции для химических связей</a>.</p>
          <p lang="en">See: <a href="?p=rules-bond-funcs">Functions for chemical bonds</a>.</p>
        </div>
        <div id="def-tm-dblAlign">
          <h2>
            <span lang="ru">Выравнивание двойных связей</span>
            <span lang="en">Alignment of double bonds</span>
          </h2>
          <p lang="ru">По-умолчанию при выводе двойных связей выполняется автоматическое выравнивание.  
            В том случае, если нужно явно указать выравнивание для любых типов связей, может быть использована функция 
            <a href="?p=ref-func-dblAlign">$dblAlign()</a>.</p>
          <p lang="en">
            By default, automatic alignment is performed when outputting double bonds.
            In case it is necessary to explicitly specify the alignment for any type of bonds, the function
            <a href="?p=ref-func-dblAlign">$dblAlign()</a> can be used.
          </p>
          <p lang="ru">См: <a href="?p=rules-bond-funcs">Функции для химических связей</a>.</p>
          <p lang="en">See: <a href="?p=rules-bond-funcs">Functions for chemical bonds</a>.</p>
        </div>
        <div id="def-tm-bond-color">
          <h2>
            <span lang="ru">Цвет связей</span>
            <span lang="en">Color of bonds</span>
          </h2>
          <p lang="ru">Единственным способом указать цвет связей является функция  
            <a href="?p=ref-func-color">$color()</a>.</p>
          <p lang="en">
            The only way to specify the color of bonds is the function
            <a href="?p=ref-func-color">$color()</a>.
          </p>
          <p lang="ru">См: <a href="?p=rules-bond-funcs">Функции для химических связей</a>.</p>
          <p lang="en">See: <a href="?p=rules-bond-funcs">Functions for chemical bonds</a>.</p>
        </div>
        <div id="def-tm-hex-vert">
          <h2>
            <span lang="ru">Вертикальный шестиугольник</span>
            <span lang="en">Vertical hexagon</span>
          </h2>
          <p lang="ru">Стандартный угол наклона <a data-ref="bond-short">кратких связей</a> составляет 30°, что позволяет формировать вертикальные шестиугольники.</p>
          <p lang="en">The standard <a data-ref="bond-short">short bond</a> angle is 30°, which allows the formation of vertical hexagons.</p>
          <p lang="ru">См: <a href="?p=rules-hex">Вертикальные и горизонтальные шестиугольники</a></p>
          <p lang="en">See: <a href="?p=rules-hex">Vertical and horizontal hexagons</a></p>
        </div>
        <div id="def-tm-hex-horiz">
          <h2>
            <span lang="ru">Горизонтальный шестиугольник</span>
            <span lang="en">Horizontal hexagon</span>
          </h2>
          <p lang="ru">
            Горизонтальный шестиугольник использует угол наклона <a data-ref="bond-short">кратких связей</a> 60°.
            Это нестандартное значение. Оно автоматически включается при наличии определённых сочетаний соседних связей.
          </p>
          <p lang="en">
            The horizontal hexagon uses a <a data-ref="bond-short">short bond</a> angle of 60°.
            This is a non-standard value. It is automatically applied in the presence of certain combinations of adjacent bonds.            
          </p>
          <p lang="ru">См: <a href="?p=rules-hex">Вертикальные и горизонтальные шестиугольники</a></p>
          <p lang="en">See: <a href="?p=rules-hex">Vertical and horizontal hexagons</a></p>
        </div>
        <div id="def-tm-bond-0">
          <h2>
            <span lang="ru">Невидимые связи</span>
            <span lang="en">Transparent bonds</span>
          </h2>
          <p lang="ru">Для <a data-ref="bond-short">кратких</a> и <a data-ref="poly">полигональных</a> связей используются 
            <a href="?p=ref-suffix">суффиксы</a> <code>0</code> или <code>o</code>.
            А для <a data-ref="uni">универсальных</a> связей - <a href="?p=ref-uni">параметр</a> <code>N0</code>.
          </p>
          <p lang="en">
            For <a data-ref="bond-short">short</a> and <a data-ref="poly">polygonal</a> bonds, 
            the <a href="?p=ref-suffix">suffixes</a> <code>0</code> or <code>o</code> are used. 
            And for <a data-ref="uni">universal</a> bonds, the <a href="?p=ref-uni">parameter</a> <code>N0</code>.
          </p>
          <p lang="ru">См: <a href="?p=rules-suffixes">Суффиксы</a>, <a href="?p=rules-uni-N">Кратность универсальной связи</a></p>
          <p lang="en">See: <a href="?p=rules-suffixes">Suffixes</a>, <a href="?p=rules-uni-N">Multiplicity</a></p>
        </div>
        <div id="def-tm-chiral">
          <h2>
            <span lang="ru">Хиральность</span>
            <span lang="en">Chirality</span>
          </h2>
          <p lang="ru">Для <a data-ref="bond-short">кратких</a> и <a data-ref="poly">полигональных</a> связей используются 
            <a href="?p=ref-suffix">суффиксы</a> <code>w</code> <code>ww</code> <code>d</code> <code>dd</code>.
            А для <a data-ref="uni">универсальных</a> связей - 
            <a href="?p=ref-uni">параметры</a> <code>w</code> <code>W</code> <code>d</code> <code>D</code>.
          </p>
          <p lang="en">
            For <a data-ref="bond-short">short</a> and <a data-ref="poly">polygonal</a> connections, 
            the <a href="?p=ref-suffix">suffixes</a> <code>w</code> <code>ww</code> <code>d</code> <code>dd</code> are used. 
            And for <a data-ref="uni">universal</a> bonds, the parameters <code>w</code> <code>W</code> <code>d</code> <code>D</code>.
          </p>
          <p lang="ru">См: <a href="?p=rules-suffixes">Суффиксы</a>, <a href="?p=rules-uni-chiral">Хиральность универсальной связи</a></p>
          <p lang="en">See: <a href="?p=rules-suffixes">Suffixes</a>, <a href="?p=rules-uni-chiral">Chirality of the universal bond</a></p>
        </div>
        <div id="def-tm-cross">
          <h2>
            <span lang="ru">Перекрещенная двойная связь</span>
            <span lang="en">Crossed double bond</span>
          </h2>
          <p lang="ru">Для <a data-ref="bond-short">кратких</a> и <a data-ref="poly">полигональных</a> связей используются 
            <a href="?p=ref-suffix">суффикс</a> <code>x</code>.
            А для <a data-ref="uni">универсальных</a> связей - <a href="?p=ref-uni">параметр</a> <code>N2x</code>.
          </p>
          <p lang="en">
            For <a data-ref="bond-short">short</a> and <a data-ref="poly">polygonal</a> bonds, 
            the <a href="?p=ref-suffix">suffix</a> <code>x</code> is used. 
            And for <a data-ref="uni">universal</a> bonds, the <a href="?p=ref-uni">parameter</a> <code>N2x</code> is used.
          </p>
          <p lang="ru">См: <a href="?p=rules-suffixes">Суффиксы</a>, <a href="?p=rules-uni-N">Кратность универсальной связи</a></p>          
          <p lang="en">See: <a href="?p=rules-suffixes">Suffixes</a>, <a href="?p=rules-uni-N">Multiplicity of universal bond</a></p>          
        </div>
        <div id="def-tm-wave">
          <h2>
            <span lang="ru">Волнистая связь</span>
            <span lang="en">Wavy bond</span>
          </h2>
          <p lang="ru">Для <a data-ref="bond-short">кратких</a> и <a data-ref="poly">полигональных</a> связей используются 
            <a href="?p=ref-suffix">суффикс</a> <code>~</code>.
            А для <a data-ref="uni">универсальных</a> связей - 
            <a href="?p=ref-uni">параметр</a> <code>~</code>.
          </p>
          <p lang="en">
            For <a data-ref="bond-short">short</a> and <a data-ref="poly">polygonal</a> bonds 
            the <a href="?p=ref-suffix">suffix</a> <code>~</code> is used. 
            And for <a href="?p=ref-uni">universal</a> bonds the parameter <code>~</code> is used.
          </p>
          <p lang="ru">См: <a href="?p=rules-suffixes">Суффиксы</a>, <a href="?p=rules-uni-decor">Декоративные параметры универсальной связи</a></p>          
          <p lang="en">See: <a href="?p=rules-suffixes">Suffixes</a>, <a href="?p=rules-uni-decor">Decorative parameters of universal bonds</a></p>          
        </div>
        <div id="def-tm-h-bond">
          <h2>
            <span lang="ru">Водородная связь</span>
            <span lang="en">Hydrogen bond</span>
          </h2>
          <p lang="ru">Для <a data-ref="bond-short">кратких</a> и <a data-ref="poly">полигональных</a> связей используются 
            <a href="?p=ref-suffix">суффикс</a> <code>h</code>.
            А для <a data-ref="uni">универсальных</a> связей - 
            <a href="?p=ref-uni">параметр</a> <code>H</code>.
          </p>
          <p lang="en">
            For <a data-ref="bond-short">short</a> and <a data-ref="poly">polygonal</a> bonds, 
            the <a href="?p=ref-suffix">suffix</a> <code>h</code> is used. 
            And for <a data-ref="uni">universal</a> bonds, the <a href="?p=ref-uni">parameter</a> <code>H</code> is used.
          </p>
          <p lang="ru">См: <a href="?p=rules-suffixes">Суффиксы</a>, <a href="?p=rules-uni-decor">Декоративные параметры универсальной связи</a></p>          
          <p lang="en">See: <a href="?p=rules-suffixes">Suffixes</a>, <a href="?p=rules-uni-decor">Decorative parameters of universal bonds</a></p>          
        </div>
        <div id="def-tm-arrows">
          <h2>
            <span lang="ru">Стрелки</span>
            <span lang="en">Arrows</span>
          </h2>
          <p lang="ru">Для <a data-ref="bond-short">кратких</a> и <a data-ref="poly">полигональных</a> связей используются 
            <a href="?p=ref-suffix">суффиксы</a> <code>v</code> <code>vv</code> <code>vvv</code>.
            А для <a data-ref="uni">универсальных</a> связей - 
            <a href="?p=ref-uni">параметры</a> <code>С</code> <code>&lt;</code> <code>&gt;</code>.
          </p>
          <p lang="en">
            For <a data-ref="bond-short">short</a> and <a data-ref="poly">polygonal</a> bonds, 
            the <a href="?p=ref-suffix">suffixes</a> <code>v</code> <code>vv</code> <code>vvv</code> are used. 
            And for universal bonds, the <a href="?p=ref-uni">parameters</a> <code>С</code> <code>&lt;</code> <code>&gt;</code> are used.
          </p>
          <p lang="ru">См: <a href="?p=rules-suffixes">Суффиксы</a>, <a href="?p=rules-uni-decor">Декоративные параметры универсальной связи</a></p>          
          <p lang="en">See: <a href="?p=rules-suffixes">Suffixes</a>, <a href="?p=rules-uni-decor">Decorative parameters of universal bonds</a></p>          
        </div>
        <div id="def-tm-center">
          <h2>
            <span lang="ru">Центр узла</span>
            <span lang="en">Center of a node</span>
          </h2>
          <p lang="ru">Чтобы явно указать центр узла, используется <a href="?p=ref-grave">обратный апостроф</a> 
            перед <a data-ref="node-item">элементом узла</a>.</p>
          <p lang="en">
            To explicitly indicate the center of a node, a <a href="?p=ref-grave">backtick</a> is used 
            before the <a data-ref="node-item">node item</a>.
          </p>
          <p lang="ru">См: <a href="?p=rules-node-center">Центры узлов</a></p>
          <p lang="en">See: <a href="?p=rules-node-center">Node centers</a></p>
        </div>
        <div id="def-tm-hard-bond">
          <h2>
            <span lang="ru">Жесткие связи</span>
            <span lang="en">Hard bonds</span>
          </h2>
          <p>
            <span lang="ru">
              Если нужно избежать использования <a data-ref="soft-bond">мягких связей</a>, 
              используются специальные <a data-ref="bond-short">краткие связи</a>: 
            </span>
            <span lang="en">
              If it is necessary to avoid the use of <a data-ref="soft-bond">soft bonds</a>, 
              special <a data-ref="bond-short">short bonds</a> are used:
            </span>
            <code>--</code> <code>==</code> <code>%%</code>.
          </p>
          <p lang="ru">Обычно это нужно для циклических формул.</p>
          <p lang="en">This is usually needed for cyclic formulas.</p>
          <p lang="ru">См: <a href="?p=rules-soft">Мягкие связи</a></p>       
          <p lang="en">See: <a href="?p=rules-soft">Soft bonds</a></p>       
        </div>
        <div id="def-tm-tri">
          <h2>
            <span lang="ru">Циклопропан</span>
            <span lang="en">Cyclopropane</span>
          </h2>
          <p lang="ru">Правильный треугольник обычно строится при помощи конструкций <code>_p3</code> или <code>_q3</code>.</p>
          <p lang="en">A regular triangle is usually constructed using the <code>_p3</code> or <code>_q3</code> constructions.</p>
          <p lang="ru">См: <a href="?p=rules-poly">Полигональные связи</a></p>          
          <p lang="en">See: <a href="?p=rules-poly">Polygonal bonds</a></p>          
        </div>
        <div id="def-tm-penta">
          <h2>
            <span lang="ru">Циклопентан</span>
            <span lang="en">Cyclopentane</span>
          </h2>
          <p lang="ru">Правильный пятиугольник обычно строится при помощи конструкций <code>_p</code> или <code>_q</code>.</p>
          <p lang="en">A regular pentagon is usually constructed using the <code>_p</code> or <code>_q</code> constructions.</p>
          <p lang="ru">См: <a href="?p=rules-poly">Полигональные связи</a></p>          
          <p lang="en">See: <a href="?p=rules-poly">Polygonal bonds</a></p>          
        </div>
        <div id="def-tm-hepta">
          <h2>
            <span lang="ru">Циклогептан</span>
            <span lang="en">Cycloheptane</span>
          </h2>
          <p lang="ru">Правильный семиугольник обычно строится при помощи конструкций <code>_p7</code> или <code>_q7</code>.</p>
          <p lang="en">A regular heptagon is usually constructed using the <code>_p7</code> or <code>_q7</code> constructions.</p>
          <p lang="ru">См: <a href="?p=rules-poly">Полигональные связи</a></p>          
          <p lang="en">See: <a href="?p=rules-poly">Polygonal bonds</a></p>          
        </div>
        <div id="def-tm-half-height">
          <h2>
            <span lang="ru">Половинная высота</span>
            <span lang="en">Half height</span>
          </h2>
          <p lang="ru">
            Чтобы изобразить один атом впритык к другому сверху или снизу, нужно использовать ветку, в которой вертикальная связь длиной 0.5
          </p>
          <p lang="en">
            To depict one atom close to another from above or below, you need to use a branch in which the vertical bond is 0.5 long.            
          </p>
          <p lang="ru">См: <a href="?p=rules-uni-xy">Универсальные связи. Параметры x и y</a></p>
          <p lang="en">See: <a href="?p=rules-uni-xy">Universal bonds. Parameters x and y</a></p>
        </div>
        <div id="def-tm-sqrt3">
          <h2>
            <span lang="ru">Хорда в шестиугольнике</span>
            <span lang="en">Chord in a hexagon</span>
          </h2>
          <p lang="ru">Для соединения сторон шестиугольника используется линия длиной √<span style="border-top: thin solid black;">3</span>
            (при условии, что длина обычной линии равна 1). Такое число можно указать при помощи специальной константы <code>$3</code>.
          </p>
          <p lang="en">
            To connect the sides of a hexagon, a line of length √<span style="border-top: thin solid black;">3</span> is used 
            (assuming that the length of a normal line is 1). This number can be specified using the special constant <code>$3</code>.
          </p>
          <p lang="ru">См: <a href="?p=rules-uni-xy">Универсальные связи. Параметры x и y</a> и 
            <a href="?p=ref-number">Числовые параметры</a>.
          </p>
          <p lang="en">
            See: <a href="?p=rules-uni-xy">Universal bonds. Parameters x and y</a> and
            <a href="?p=ref-number">Numeric parameters</a>
          </p>   
        </div>
        <div id="def-tm-vars">
          <h2>
            <span lang="ru">Использование переменных</span>
            <span lang="en">Using variables</span>
          </h2>
          <p lang="ru">В параметрах универсальных связей можно использовать переменные.</p>
          <p lang="en">Variables can be used in the parameters of universal bonds.</p>
          <p lang="ru">Например, <code>x%c:1.4</code> создаёт переменную c=1.4.
            А <code>x%c</code> - это её применение.
          </p>
          <p lang="en">
            For example, <code>x%c:1.4</code> creates the variable c=1.4.
            And <code>x%c</code> is its application.            
          </p>
          <p lang="ru">См: <a href="?p=rules-uni-xy">Универсальные связи. Параметры x и y</a> и 
            <a href="?p=ref-number">Числовые параметры</a>.
          </p>
          <p lang="en">
            See: <a href="?p=rules-uni-xy">Universal bonds. Parameters x and y</a> and
            <a href="?p=ref-number">Numeric parameters</a>
          </p>   
        </div>
        <div id="def-tm-norm">
          <h2>
            <span lang="ru">Нормали</span>
            <span lang="en">Normals</span>
          </h2>
          <p lang="ru">
            Боковые ответвления от полигонов рекомендуется делать при помощи <a href="?p=rules-uni-rel">относительных углов</a>.
          </p>
          <p lang="en">
            It is recommended to make lateral branches from polygons using <a href="?p=rules-uni-rel">relative angles</a>.
          </p>
          <p lang="ru">См: <a href="?p=ref-norm">Нормали</a>.</p>          
          <p lang="en">See: <a href="?p=ref-norm">Normals</a>.</p>          
        </div>
        <div id="def-tm-relative0">
          <h2>
            <span lang="ru">Относительный угол 0</span>
            <span lang="en">Relative angle 0</span>
          </h2>
          <p lang="ru">
            Чтобы нарисовать последовательно две связи в одном направлении рекомендуется использовать <code>_(a0)</code>.
            Это обычно используется для тройных связей.
          </p>
          <p lang="en">
            To draw two bonds in a row in one direction, it is recommended to use <code>_(a0)</code>.
            This is usually used for triple bonds.
          </p>
          <p lang="ru">См: <a href="?p=rules-uni-rel">Относительные углы</a>.</p>          
          <p lang="en">See: <a href="?p=rules-uni-rel">Relative angles</a>.</p>
        </div>
        <div id="def-tm-style">
          <h2>
            <span lang="ru">Стиль связи</span>
            <span lang="en">Bond style</span>
          </h2>
          <p lang="ru">
            Чтобы комбинировать различные типы линий, используются <a href="?p=ref-uni">универсальные связи</a> с параметром <code>S</code>.
          </p>
          <p lang="en">
            To combine different types of lines, <a href="?p=ref-uni">universal bonds</a> with parameter <code>S</code> are used.
          </p>
          <p lang="ru">См: <a href="?p=rules-uni-style">Стили</a>.</p>          
          <p lang="en">See: <a href="?p=rules-uni-style">Styles</a>.</p>          
        </div>
        <div id="def-tm-implicit-nodes">
          <h2>
            <span lang="ru">Неявные узлы</span>
            <span lang="en">Implicit nodes</span>
          </h2>
          <p lang="ru">
            Если нужно делать ветки от одного большого <a data-ref="node">узла</a>, то его нужно разделить на меньшие узлы, 
            соединённые конструкцией <code>_(h)</code>.
          </p>
          <p lang="en">
            If you need to make branches from one large <a data-ref="node">node</a>, then it needs to be divided into 
            smaller nodes, connected by the <code>_(h)</code> construction.            
          </p>
          <p>См: <a href="?p=rules-uni-soft">Мягкие универсальные связи</a>.</p>          
          <p>See: <a href="?p=rules-uni-soft">Soft universal bonds</a>.</p>          
        </div>
        <div id="def-tm-circle">
          <h2>
            <span lang="ru">Кольцевая связь</span>
            <span lang="en">Ring bond</span>
          </h2>
          <p lang="ru">Кольцевая связь создаётся конструкцией <code>_o</code>.</p>
          <p lang="en">A ring bond is created by the <code>_o</code> construct.</p>
          <p lang="ru">См: <a href="?p=rules-multi">Распределённые связи</a>.</p>
          <p lang="en">See: <a href="?p=rules-multi">Delocalized bonds</a>.</p>
        </div>
        <div id="def-tm-spline">
          <h2>
            <span lang="ru">Сплайновая связь</span>
            <span lang="en">Spline bond</span>
          </h2>
          <p lang="ru">Конструкция <code>_s()</code> позволяет создать сомкнутую или разомкнутую связь для нескольких узлов.</p>
          <p lang="en">The <code>_s()</code> construct allows you to create a closed or open bond for several nodes.</p>
          <p lang="ru">См: <a href="?p=rules-multi">Распределённые связи</a>.</p>
          <p lang="en">See: <a href="?p=rules-multi">Delocalized bonds</a>.</p>
        </div>
        <div id="def-tm-bezier">
          <h2>
            <span lang="ru">Изогнутые линии</span>
            <span lang="en">Curved lines</span>
          </h2>
          <p lang="ru">
            Изогнутые линии формируются при помощи кривых Безье. 
            Конструкцей <code>_m</code> задаются промежуточные контрольные точки. 
            При помощи одной промежуточной точки задаётся квадратичная кривая, при помощи двух - кубическая.
          </p>
          <p lang="en">
            Curved lines are formed using Bezier curves.
            The <code>_m</code> construct specifies intermediate control points.
            A quadratic curve is specified using one intermediate point, and a cubic curve is specified using two.
          </p>
          <p lang="ru">См: <a href="?p=rules-bezier">Изогнутые линии</a>.</p>          
          <p lang="en">See: <a href="?p=rules-bezier">Curved lines</a>.</p>          
        </div>        
        <div id="def-tm-c">
          <h2>
            <span lang="ru">Явное создание автоузла</span>
            <span lang="en">Explicit creation of an autonode</span>
          </h2>
          <p lang="ru">
            Чтобы отделить одну связь от другой без создания видимого <a data-ref="node">узла</a> используется символ <code>c</code>.
          </p>
          <p lang="en">
            To separate one bond from another without creating a visible <a data-ref="node">node</a>, the <code>c</code> symbol is used.            
          </p>
          <p lang="ru">См: <a href="?p=rules-ext-features">Дополнительные приёмы</a>.</p>
          <p lang="en">See: <a href="?p=rules-ext-features">Additional techniques</a>.</p>
        </div>        
        <div id="def-tm-braces">
          <h2>
            <span lang="ru">Фигурные скобки</span>
            <span lang="en">Braces</span>
          </h2>
          <p lang="ru">Для описания фигурных скобок нужно использовать конструкции <code>{{</code> и <code>}}</code></p>
          <p lang="en">To describe curly braces, you need to use the <code>{{</code> and <code>}}</code> constructs.</p>
          <p lang="ru">См: <a href="?p=rules-brackets">Скобки</a>.</p>
          <p lang="en">See: <a href="?p=rules-brackets">Brackets</a>.</p>
        </div> 
        <div id="def-tm-node-bracket">
          <h2>
            <span lang="ru">Узел + скобка</span>
            <span lang="en">Node + bracket</span>
          </h2>
          <p lang="ru">Если <a data-ref="node">узел</a> соединяется со скобкой, то происходит центрирование относительно горизонтальной оси.</p>
          <p lang="en">If a <a data-ref="node">node</a> is connected to a bracket, it is centered relative to the horizontal axis.</p>
          <p lang="ru">См: <a href="?p=rules-brackets">Скобки</a>.</p>
          <p lang="en">See: <a href="?p=rules-brackets">Brackets</a>.</p>
        </div> 
        <div id="def-tm-soft-bracket">
          <h2>
            <span lang="ru">Мягкая связь + скобка</span>
            <span lang="en">Soft bond + bracket</span>
          </h2>
          <p lang="ru">
            Если скобка соединяется с <a data-ref="soft-bond">мягкой связью</a>, то связь не пересекает скобку. 
            А оба узла связи остаются на одном уровне.
          </p>
          <p lang="en">
            If a bracket is connected to a <a data-ref="soft-bond">soft bond</a>, the bond does not cross the bracket.
            And both bond nodes remain at the same level.            
          </p>
          <p lang="ru">Соединительные связи всегда снаружи от скобок.</p>
          <p lang="en">The connecting bonds are always outside the brackets.</p>
          <p lang="ru">См: <a href="?p=rules-brackets">Скобки</a>.</p>
          <p lang="en">See: <a href="?p=rules-brackets">Brackets</a>.</p>
        </div> 
        <div id="def-tm-bond-bracket">
          <h2>
            <span lang="ru">Cвязь + скобка</span>
            <span lang="en">Bond + bracket</span>
          </h2>
          <p lang="ru">Если скобка соединяется с любой связью, кроме <a data-ref="soft-bond">мягкой</a>, то связь пересекает скобку.</p>
          <p lang="en">
            If a bracket is connected to any bond except a <a data-ref="soft-bond">soft</a> bond, 
            the bond crosses the bracket.
          </p>
          <p lang="ru">Соединительные связи всегда снаружи от скобок.</p>
          <p lang="en">The connecting bonds are always outside the brackets.</p>
          <p lang="ru">См: <a href="?p=rules-brackets">Скобки</a>.</p>
          <p lang="en">See: <a href="?p=rules-brackets">Brackets</a>.</p>
        </div> 
        <div id="def-tm-padding">
          <h2>
            <span lang="ru">Отступы внутри скобок</span>
            <span lang="en">Indentation inside brackets</span>
          </h2>
          <p lang="ru">Отступы указываются функцией <a href="?p=ref-func-padding">$padding()</a>.</p>
          <p lang="en">The padding is specified by the <a href="?p=ref-func-padding">$padding()</a> function.</p>
          <p lang="ru">См: <a href="?p=rules-brackets">Скобки</a>.</p>
          <p lang="en">See: <a href="?p=rules-brackets">Brackets</a>.</p>
        </div>               
        <div id="def-tm-index">
          <h2>
            <span lang="ru">Макрос для нумерации узлов</span>
            <span lang="en">Macro for node numbering</span>
          </h2>
          <p lang="ru">Если нужно показать локанты, то рекомендуется использовать макрокоманду.</p>
          <p lang="en">If you need to show locants, it is recommended to use a macro.</p>
          <p>См: <a href="?p=rules-macro">Макрокоманды</a>.</p>
          <p>See: <a href="?p=rules-macro">Macro commands</a>.</p>
        </div>               
        <div id="def-tm-reagent-center">
          <h2>
            <span lang="ru">Центрирование реагентов</span>
            <span lang="en">Centering of reagents</span>
          </h2>
          <p lang="ru">
            Можно управлять вертикальным центрированием <a data-ref="agent">реагентов</a> при помощи функции <a href="?p=ref-func-C">$C()</a>
          </p>
          <p lang="en">
            You can control the vertical centering of <a data-ref="agent">reagents</a> using the <a href="?p=ref-func-C">$C()</a> function.            
          </p>
          <p lang="ru">См: <a href="?p=ref-func-C">Центр формулы</a>.</p>
          <p lang="en">See: <a href="?p=ref-func-C">Center of the formula</a>.</p>
        </div>               
        <div id="def-tm-bg">
          <h2>
            <span lang="ru">Фоновая фигура</span>
            <span lang="en">Background figure</span>
          </h2>
          <p lang="ru">Можно выделить какую-то часть формулы при помощи фона функцией <a href="?p=ref-func-bg">$background()</a>
            или <code>$bg()</code>.
          </p>
          <p lang="en">
            You can highlight some part of the formula using the background by function <a href="?p=ref-func-bg">$background()</a> 
            or <code>$bg()</code>.
          </p>
          <p lang="ru">См: <a href="?p=ref-func-bg">Фоновая фигура</a>.</p>
          <p lang="en">See: <a href="?p=ref-func-bg">Background figure</a></p>
        </div>               
      </div>
    </div>
    <p lang="ru">Примеры перечислены в том порядке, в котором они следуют в разделе <a href="?p=rules">Описание химических формул</a></p>
    <p lang="en">Examples are listed in the order they appear in the <a href="?p=rules">Description of chemical formulas</a> section.</p>
  </page>

  <page id="ref" data-owner="home">
    <h1>
      <span lang="ru">Справочник</span>
      <span lang="en">Reference</span>
    </h1>
    <ul class="contents" data-owner="ref"></ul>
  </page>

  <page id="ref-space" data-owner="ref">
    <h1>
      <span lang="ru">Где можно или необходимо вставлять пробелы</span>
      <span lang="en">Where can or should spaces be inserted?</span>
    </h1>
    <p lang="ru">
      Во всех случаях, где можно вставить один пробел, там на самом деле можно вставлять любое количество пробелов,
      символов табуляции и конца строки.
    </p>
    <p lang="en">
      In all cases where you can insert one space, you can actually insert any number of spaces, tabs, and line breaks.
    </p>
    <ul>
      <li lang="ru">
        Необязательный пробел в начале и в конце описания формулы.
      </li>
      <li lang="en">
        Optional space at the beginning and end of the formula description.
      </li>
      <li lang="ru">
        Необходимый пробел между <a data-ref="agent">реагентом</a> и <a data-ref="op">операцией</a>
      </li>
      <li lang="en">
        The required space between the <a data-ref="agent">reagent</a> and the <a data-ref="op">operation</a>.
      </li>
      <li lang="ru">
        Возможен пробел после символа <code>;</code> (точка с запятой), который заканчивает <a href="?p=rules-refs">цепь</a>.
      </li>
      <li lang="en">
        There may be a space after the <code>;</code> (semicolon) character that ends the <a href="?p=rules-refs">chain</a>.
      </li>
      <li lang="ru">
        <a href="?p=rules-refs#rules-break">Разрыв</a> - особая конструкция: символ <code>#</code> и <i>пробел</i>. 
        Она может быть использована для разделения длинного описания на несколько строк.
      </li>
      <li lang="en">
        A <a href="?p=rules-refs#rules-break">break</a> is a special construction: the <code>#</code> symbol and a <i>space</i>.
        It can be used to split a long description into several lines.
      </li>
    </ul>
  </page>

  <page id="ref-color" data-owner="ref">
    <h1>
      <span lang="ru">Способы указания цвета</span>
      <span lang="en">Methods of specifying color</span>
    </h1>
    <p lang="ru">Иногда внутри формулы может потребоваться какой-то специальный цвет. Для обозначения цветов используются те же способы, что в HTML, CSS и SVG</p>
    <p lang="en">Sometimes a special color may be needed within a formula. The same methods as in HTML, CSS, and SVG are used to indicate colors.</p>
    <p lang="ru">См. <a href="?p=rules-color">Цветовые функции</a> или <a href="?p=ref-func-bg">Фоновая фигура</a></p>
    <p lang="en">See. <a href="?p=rules-color">Color functions</a> or <a href="?p=ref-func-bg">Background figure</a></p>
    <h2>
      <span lang="ru">По шестнадцатеричному значению (коду)</span>
      <span lang="en">By hexadecimal value (code)</span>
    </h2>
    <p lang="ru">
     Описание начинается с <code>#</code> (решетка) и состоит из 6 или 3 шеснадцатеричных цифр. 
     Если указано 3, то они превращаются в 6 путем удвоения каждого символа.
     Цвета идут в порядке красный-зелёный-синий. Регистр не имеет значения.
    </p>
    <p lang="en">
      The description starts with <code>#</code> (pound) and consists of 6 or 3 hexadecimal digits.
      If 3 is specified, they are converted to 6 by doubling each character.
      The colors are in the order red-green-blue. Case is not important.
    </p>
    <p>
     <span lang="ru">Например</span><span lang="en">For example</span>:
     <code>#FA8</code> = <code>#FFAA88</code> = <code>#ffaa88</code> =
     <span style="display: inline-block; width: 3em; height: 1.2em; background: #FA8; box-shadow: 2px 2px 3px #777;"></span>
    </p>
    <p lang="ru">Поддержка описания цветов в таком формате есть во многих графических редакторах. Например в PhotoShop или GIMP.</p>
    <p lang="en">Many graphic editors support color descriptions in this format. For example, PhotoShop or GIMP.</p>
    <h2>RGB</h2>
    <p lang="ru">Начинается с ключевого слова rgb, а затем в скобках, через запятую указываются компоненты цвета.</p>
    <p lang="en">It starts with the keyword rgb, and then in brackets, separated by commas, the color components are indicated.</p>
    <p>
      <span lang="ru">Например</span><span lang="en">For example</span>:
      <code class="chem-code">rgb(255, 128, 128)</code>.
    </p>
    <h2>RGBA</h2>
    <p lang="ru">
      Формат RGBA похож по синтаксису на RGB, но включает в себя альфа-канал, задающий прозрачность элемента. 
      Значение 0 соответствует полной прозрачности, 1 — непрозрачности, а промежуточное значение вроде 0.5 — полупрозрачности.
    </p>
    <p lang="en">
      The RGBA format is similar in syntax to RGB, but includes an alpha channel that specifies the transparency of the element.
      A value of 0 corresponds to full transparency, 1 to opacity, and an intermediate value like 0.5 to semi-transparency.      
    </p>
    <p>
      <span lang="ru">Например</span><span lang="en">For example</span>: 
      <code class="chem-code">rgba(255, 255, 255, 0.5)</code>
    </p>
    <p lang="ru">
      <b>Важно!</b> Альфа-канал поддерживается не всеми форматами графических файлов.
      К таким относится <a href="https://ru.wikipedia.org/wiki/Encapsulated_PostScript" target="_blank">EPS</a>  
      и другие варианты PostScript.
      Поэтому не рекомендуется использовать цвета с прозрачностью для тех формул, которые предназначены для широкого распространения.
      Например, в <a href="http://charchem.org/ru/subst-ref" target="_blank">справочнике веществ CharChem</a> такие цвета не используются.
    </p>
    <p lang="en">
      <b>Important!</b> There are graphic file formats that do not support the alpha channel. 
      These include <a href="https://en.wikipedia.org/wiki/Encapsulated_PostScript" target="_blank">EPS</a> 
      and other PostScript variants. 
      Therefore, it is not recommended to use colors with transparency for formulas that are intended for wide distribution. 
      For example, such colors are not used in the <a href="http://charchem.org/en/subst-ref" target="_blank">CharChem substance reference</a>.      
    </p>
    <h2>
      <span lang="ru">По названию</span>
      <span lang="en">By name</span>
    </h2>
    <p>
      <span lang="ru">В следующей таблице представлены основные цвета с названиями и кодировкой.</span>
      <span lang="en">The following table shows the main colors with their names and coding.</span>
      <table id="colors-table">
        <tr>
          <th><span lang="ru">Цвет</span><span lang="en">Color</span></th>
          <th><span lang="ru">Название</span><span lang="en">Name</span></th>
          <th><span lang="ru">Код</span><span lang="en">Code</span></th>
          <th>RGB</th>
        </tr>
      </table>
      <script>
      window.addEventListener("load", function() {
        var colors = [
          ["white", "#ffffff = #FFF", "rgb(255,255,255)"],
          ["silver", "#c0c0c0", "rgb(192,192,192)"],
          ["gray", "#808080", "rgb(128,128,128)"],
          ["black", "#000000 = #000", "rgb(0,0,0)"],
          ["maroon", "#800000", "rgb(128,0,0)"],
          ["red",	"#ff0000 = #F00",	"rgb(255,0,0)"],
          ["orange", "#ffa500",	"rgb(255,165,0)"],
          ["yellow", "#ffff00 = #FF0",	"rgb(255,255,0)"],
          ["olive",	"#808000", "rgb(128,128,0)"],
          ["lime", "#00ff00 = #0F0", "rgb(0,255,0)"],
          ["green",	"#008000", "rgb(0,128,0)"],
          ["aqua", "#00ffff = #0FF", "rgb(0,255,255)"],
          ["blue", "#0000ff = #00F", "rgb(0,0,255)"],
          ["navy", "#000080",	"rgb(0,0,128)"],
          ["teal", "#008080",	"rgb(0,128,128)"],
          ["fuchsia",	"#ff00ff = #F0F",	"rgb(255,0,255)"],
          ["purple", "#800080",	"rgb(128,0,128)"],
        ];
        var i, tbl = document.getElementById("colors-table");
        for (i=0; i<colors.length; i++) {
          var c=colors[i];
          var tr = createElem("tr", tbl);
          createElem("td", tr, {style: {background: c[0]}});
          createElem("td", tr, {html: c[0]});
          createElem("td", tr, {html: c[1]});
          createElem("td", tr, {html: c[2]});
        }
      });
      </script>
    <p>
    <p>
      <span lang="ru">Подробнее можно ознакомиться в</span> 
      <span lang="en">For more details, please refer to the</span>
      <a href="https://www.w3.org/wiki/CSS/Properties/color/keywords" target="_blank">
        <span lang="ru">официальной документации CSS</span>
        <span lang="en">official CSS documentation</span>
      </a>.
    </p>
    <p lang="ru">
      Обратите внимание, что в CSS существуют и другие способы описания цветов. Но их использовать не рекомендуется. 
      Они будут работать, если формула рисуется браузером в составе документа. 
      Но нет гарантий поддержки, если формула будет отрисована каким-то иным программным обеспечением.
    </p>
    <p lang="en">
      Please note that there are other ways to describe colors in CSS. But it is not recommended to use them.
      They will work if the formula is drawn by the browser as part of the document.
      But there is no guarantee of support if the formula is drawn by some other software.      
    </p>
    <p lang="ru">
      Например, для создания этой документации в CSS-файле есть такая конструкция:
    </p>
    <p lang="en">
      For example, to create this documentation, the CSS file contains the following construct:      
    </p>
    <pre>
      :root {
        --select-color: #B0B;
      }</pre>
    <p lang="ru">Поэтому для единообразного выделения частей формул в разных местах документа используется такое описание цвета:</p>
    <p lang="en">Therefore, to consistently highlight parts of formulas in different places in a document, the following color description is used:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">\&lt;`/&gt;-$color(<em>var(--select-color)</em>)OH</code>
      <div class="echem-formula">\&lt;`/&gt;-$color(var(--select-color))OH</div>
    </div>
    <p lang="ru">
      Здесь <code>var(--select-color)</code> &mdash; это способ обращения к переменной в CSS3.
    </p>
    <p lang="en">
      Here <code>var(--select-color)</code> is the CSS3 way of referring to a variable.      
    </p>
    <p lang="ru">Но если попробовать использовать такое описание за пределами документа, то оно работать не будет.</p>
    <p lang="en">But if you try to use such a description outside the document, it will not work.</p>
  </page>

  <page id="ref-number" data-owner="ref">
    <h1>
      <span lang="ru">Числовые параметры</span>
      <span lang="en">Numeric parameters</span>
    </h1>
    <p lang="ru">
      Числовые параметры могут потребоваться в параметрах <a href="?p=ref-func">функций</a> и <a href="?p=ref-uni">универсальных связей</a>.
    </p>
    <p lang="en">
      Numeric parameters may be required in the parameters of <a href="?p=ref-func">functions</a> and <a href="?p=ref-uni">universal bonds</a>.      
    </p>
    <h2><span lang="ru">Числа</span><span lang="en">Numbers</span></h2>
    <p lang="ru">Числа описываются как в языках программирования. То есть:</p>
    <p lang="en">Numbers are described as in programming languages. That is:</p>
    <ul>
      <li>
        <span lang="ru">используется десятичная точка, а не запятая, н.р.</span>
        <span lang="en">a decimal point is used instead of a comma, e.g.</span>
        <code>3.14</code>;
      </li>
      <li>
        <span lang="ru">возможно использовать экспоненциальную форму, н.р.</span>
        <span lang="en">it is possible to use exponential form, e.g.</span>
        <code>1000 = 1e+03 = 1E3</code>, а <code>0.001 = 1e-03 = 1E-3</code>;
      </li>
      <li>
        <span lang="ru">Если число начинается с 0, то его можно не указывать. Н.р</span>
        <span lang="en">If the number starts with 0, it can be omitted. E.g.</span>
        <code>0.55 = .55</code>
      </li>
    </ul>
    <h2><span lang="ru">Переменные</span><span lang="en">Variables</span></h2>
    <p lang="ru">
      Иногда удобно запомнить один раз число под каким-то именем. А далее использовать имя.
    </p>
    <p lang="en">
      Sometimes it is convenient to remember a number once under some name. And then use the name.      
    </p>
    <p lang="ru">
      Для этого в числовых значениях CharChem можно использовать конструкцию <code>%x:9</code>, 
      а далее можно пользоваться этим именем так: <code>%x</code>.
      Здесь <code>x</code> - это любое имя, состоящее из латинских букв (регистр важен). А вместо <code>9</code> может быть любое число.
    </p>
    <p lang="en">
      To do this, you can use the <code>%x:9</code> construction in CharChem numeric values,
      and then you can use this name like this: <code>%x</code>.
      Here <code>x</code> is any name consisting of Latin letters (case is important). And <code>9</code> can be any number.      
    </p>
    <p lang="ru">Например:</p>
    <p lang="en">For example:</p>
    <div class="two-col-table">
      <code class="chem-code">$slope(%a:70)\$slope(%b:20)/\$slope(%a)`\$slope(%b)`\`/</code>
      <div class="echem-formula">$slope(%a:70)\$slope(%b:20)/\$slope(%a)`\$slope(%b)`\`/</div>
    </div>
    <p lang="ru">Здесь переменная <code>a</code> означает наклон в 70° и <code>b</code> &mdash; 20°</p>
    <p lang="en">Here the variable <code>a</code> means a slope of 70° and <code>b</code> means 20°</p>
    <p lang="ru">А вот пример посложнее</p>
    <p lang="en">Here is a more complicated example</p>
    <div class="two-col-table">
      <code class="chem-code">_(x%a:.6,y%h:1.2)_(x%b:1.1,y-%d:.4)_(x%c:1.4,y%d)_(x-%a,y-%h)_(x-%b,y%d)_(x-%c,y-%d)</code>
      <div class="echem-formula">_(x%a:.6,y%h:1.2)_(x%b:1.1,y-%d:.4)_(x%c:1.4,y%d)_(x-%a,y-%h)_(x-%b,y%d)_(x-%c,y-%d)</div>
    </div>
    <p lang="ru">
      Здесь кооодината <code>x</code> меняется так: <code>a, b, c, -a, -b, -c</code>, что гарантирует возврат в исходную точку.
      Для <code>y</code> ещё интереснее: <code>h, -d, d, -h, d, -d</code>, что тоже даёт возврат в исходную точку.
      А в результате получаем фигуру, которая часто используется для изображения молекул сахаров или иных производных циклогексана.
    </p>
    <p lang="en">
      Here the coordinate <code>x</code> changes as follows: <code>a, b, c, -a, -b, -c</code>, which guarantees a return to the starting point. 
      For <code>y</code> it is even more interesting: <code>h, -d, d, -h, d, -d</code>, which also gives a return to the starting point. 
      And as a result we get a figure that is often used to depict sugar molecules or other cyclohexane derivatives.
    </p>
    <h2><span lang="ru">Константы</span><span lang="en">Constants</span></h2>
    <p lang="ru">
      Есть несколько иррациональных значений, представленных константами, которые начинаются со знака <code>$</code>.
    </p>
    <p lang="en">
      There are several irrational values ​​represented by constants that begin with the <code>$</code> sign.      
    </p>
    <table>
    <tr>
      <td><code>$3</code></td><td>=</td><td>√<span style="border-top: thin solid black;">3</span></td><td>&nbsp;</td>
      <td><code>$2</code></td><td>=</td><td>√<span style="border-top: thin solid black;">2</span></td>
    </tr>
    <tr>
      <td><code>$32</code></td><td>=</td><td>√<span style="border-top: thin solid black;">3</span>/2</td><td>&nbsp;</td>
      <td><code>$22</code></td><td>=</td><td>√<span style="border-top: thin solid black;">2</span>/2</td>
    </tr>
    <tr>
      <td><code>$3x2</code><td>=</td></td><td>√<span style="border-top: thin solid black;">3</span>×2</td><td>&nbsp;</td>
      <td><code>$2x2</code><td>=</td></td><td>√<span style="border-top: thin solid black;">2</span>×2</td>
    </tr>
    </table>
    <p lang="ru">Корень из 2 &mdash; это длина диагонали квадрата, 
      а корень из 3 &mdash; расстояние между противоположными сторонами в шестиугольнике.
      (При условии что длина стороны = 1)
    </p>
    <p lang="en">
      The square root of 2 is the length of the diagonal of a square, 
      and the square root of 3 is the distance between opposite sides of a hexagon. 
      (Assuming that the side length = 1)
    </p>
    <p lang="ru">Например:</p>
    <p lang="en">For example:</p>
    <div class="two-col-table">
      <code class="chem-code">_(A45,L$2)`-`|</code>
      <div class="echem-formula">_(A45,L$2)`-`|</div>
      <code class="chem-code">|\/`|_(x-$3)</code>
      <div class="echem-formula">|\/`|_(x-$3)</div>
    </div>
  </page>

  <page id="ref-charge" data-owner="ref">
    <h1>
      <span lang="ru">Способы описания зарядов</span>
      <span lang="en">Methods of describing charges</span>
    </h1>
    <p lang="ru">Заряды могут быть указаны для <a href="?p=rules-node-charge">узлов</a>, скобок 
      а так же как <a href="?p=rules-node-item-props">степень окисления</a> для элементов узлов.</p>
    <p lang="en">
      Charges can be specified for <a href="?p=rules-node-charge">nodes</a>, brackets, 
      and also as <a href="?p=rules-node-item-props">oxidation states</a> for node items.
    </p>
    <p lang="ru">Существует несколько способов для описания зарядов.</p>
    <p lang="en">There are several ways to describe charges.</p>
    <table style="max-width: 92vw;">
      <tr>
        <th><span lang="ru">Способ</span><span lang="en">Way</span></th>
        <th><span lang="ru">Пояснение</span><span lang="en">Explanation</span></th>
        <th><span lang="ru">Примеры</span><span lang="en">Examples</span></th>
      </tr>
      <tr>
        <td><span lang="ru">Минусы</span><span lang="en">Minuses</span></td>
        <td>
          <code>-</code> 
          <span lang="ru">или</span><span lang="en">or</span>
          <code>--</code> 
          <span lang="ru">или</span><span lang="en">or</span>
          <code>---</code>
        </td>
        <td>
          <div class="two-col-table">
            <code class="chem-code">Cl^-</code>
            <div class="echem-formula">Cl^-</div>
            <code class="chem-code">S^--</code>
            <div class="echem-formula">S^--</div>
            <code class="chem-code">N^---</code>
            <div class="echem-formula">N^---</div>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <span lang="ru">Плюсы</span>
          <span lang="en">Pluses</span>
        </td>
        <td>
          <code>+</code> 
          <span lang="ru">или</span><span lang="en">or</span>
          <code>++</code>
          <span lang="ru">или</span><span lang="en">or</span>
          <code>+++</code>
        </td>
        <td>
          <div class="two-col-table">
            <code class="chem-code">Li^+</code>
            <div class="echem-formula">Li^+</div>
            <code class="chem-code">Mg^++</code>
            <div class="echem-formula">Mg^++</div>
            <code class="chem-code">Al^+++</code>
            <div class="echem-formula">Al^+++</div>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <span lang="ru">Целое число и знак</span>
          <span lang="en">Integer and sign</span>
        </td>
        <td>
          <code>2- 1+ 6+</code>... 
          <span lang="ru">Типично для ионов с зарядом более чем 1 (положительным или отрицательным)</span>
          <span lang="en">Typical for ions with a charge greater than 1 (positive or negative)</span>
        </td>
        <td>
          <div class="two-col-table">
            <code class="chem-code">Sn^4+</code>
            <div class="echem-formula">Sn^4+</div>
            <code class="chem-code">PO4^3-</code>
            <div class="echem-formula">PO4^3-</div>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <span lang="ru">Знак и целое число</span>
          <span lang="en">Sign and integer</span>
        </td>
        <td>
          <code>-2 +1 +6</code>... 
          <span lang="ru">Обычно используется для степени окисления, либо для случая, когда заряд слева от узла.</span>
          <span lang="en">Usually used for oxidation state, or when the charge is to the left of the node.</span>
        </td>
        <td>
          <div class="two-col-table">
            <code class="chem-code">Cl(-1)</code>
            <div class="echem-formula">Cl(-1)</div>
            <code class="chem-code">Mg`^+2</code>
            <div class="echem-formula">Mg`^+2</div>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <span lang="ru">Целое число без знака</span>
          <span lang="en">Unsigned integer</span>
        </td>
        <td>
          <code>0 1 2</code>... 
          <span lang="ru">Полезно, если нужно указать нулевой заряд.</span>
          <span lang="en">Useful if you need to specify a zero charge.</span>
        </td>
        <td>
          <div class="two-col-table">
            <code class="chem-code">Сa(0)</code>
            <div class="echem-formula">Ca(0)</div>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <span lang="ru">Плюс или минус в круге</span>
          <span lang="en">Plus or minus in a circle</span>
        </td>
        <td>
          <span lang="ru">Знак <code>+</code> или <code>-</code> и маленькая буква <code>o</code>:</span>
          <span lang="en">The <code>+</code> or <code>-</code> sign and a small letter <code>o</code>:</span>
          <code>+o -o</code>
        </td>
        <td>
          <div class="two-col-table">
            <code class="chem-code">{R}\&lt;|wNH3`^+o&gt;/`|O|\O^-o</code>
            <div class="echem-formula">{R}\&lt;|wNH3`^+o&gt;/`|O|\O^-o</div>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <span lang="ru">Римские цифры</span>
          <span lang="en">Roman numerals</span>
        </td>
        <td>
          <span lang="ru">
            Касается чисел от 1 до 8. Применяется для степеней окисления.<br />
            Римские цифры записываются маленькими буквами. Потому что большие используются для химических элементов:
          </span>
          <span lang="en">
            This applies to numbers from 1 to 8. It is used for oxidation states.<br />
            Roman numerals are written in small letters. Because large ones are used for chemical elements:         
          </span>
          <br />
          <code>i ii iii iv v vi vii viii</code>
        </td>
        <td>
          <div class="two-col-table">
            <code class="chem-code">KFe(iii)[Fe(ii)(CN)6]</code>
            <div class="echem-formula">KFe(iii)[Fe(ii)(CN)6]</div>
            <code class="chem-code">KMn(vii)O4</code>
            <div class="echem-formula">KMn(vii)O4</div>
          </div>
        </td>
      </tr>
    </table>
  </page>

  <page id="ref-radical" data-owner="ref">
    <h1>
      <span lang="ru">Список радикалов</span>
      <span lang="en">List of Radicals</span>
    </h1>
    <p lang="ru">
      Поддержка радикалов появилась в версии CharChem 1.0. Подробнее см. <a href="?p=rules-node-item">Элементы узла</a>
    </p>
    <p lang="en">
      Radicals support was introduced in CharChem 1.0. For more information, see <a href="?p=rules-node-item">Node items</a>
    </p>
    <table>
      <tr>
        <th>CharChem</th>
        <th><span lang="ru">Описание</span><span lang="en">Description</span></th>
        <th><span lang="ru">Структурная формула</span><span lang="en">Structural formula</span></th>
      </tr>
      <tr>
        <td><code>Me</code></td>
        <td>
          <a lang="ru" href="https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D1%82%D0%B8%D0%BB" target="_blank">Метил</a>
          <a lang="en" href="https://en.wikipedia.org/wiki/Methyl_group" target="_blank">Methyl</a>
        </td>
        <td><div class="echem-formula">{}_(x1)CH3</div></td>
      </tr>
      <tr>
        <td><code>Et</code></td>
        <td>
          <a lang="ru" href="https://ru.wikipedia.org/wiki/%D0%AD%D1%82%D0%B8%D0%BB" target="_blank">Этил</a>
          <a lang="en" href="https://en.wikipedia.org/wiki/Ethyl_group" target="_blank">Ethyl</a>
        </td>
        <td><div class="echem-formula">{}_(x1)CH2-CH3</div></td>
      </tr>
      <tr>
        <td><code>Pr</code> = <code>n-Pr</code> = <code>Pr-n</code></td>
        <td>
          <a lang="ru" href="https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%BE%D0%BF%D0%B8%D0%BB" target="_blank">Пропил</a>
          <a lang="en" href="https://en.wikipedia.org/wiki/Propyl_group" target="_blank">Propyl</a>
        </td>
        <td><div class="echem-formula">{}_(x1)CH2-CH2-CH3</div></td>
      </tr>
      <tr>
        <td><code>iPr</code> = <code>i-Pr</code> = <code>Pr-i</code></td>
        <td>
          <a lang="ru" href="https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%BE%D0%BF%D0%B8%D0%BB" target="_blank">Изопропил</a>
          <a lang="en" href="https://en.wikipedia.org/wiki/Propyl_group" target="_blank">Isopropyl</a>
        </td>
        <td><div class="echem-formula">{}-&lt;\CH3&gt;/CH3</div></td>
      </tr>
      <tr>
        <td><code>Bu</code> = <code>nBu</code> = <code>n-Bu</code> = <code>Bu-n</code></td>
        <td>
          <a lang="ru" href="https://ru.wikipedia.org/wiki/%D0%91%D1%83%D1%82%D0%B8%D0%BB" target="_blank">н-Бутил</a>
          <a lang="en" href="https://en.wikipedia.org/wiki/Butyl_group" target="_blank">n-Butyl</a>
        </td>
        <td><div class="echem-formula">{}_(x1)CH2-CH2-CH2-CH3</div></td>
      </tr>
      <tr>
        <td><code>i-Bu</code> = <code>Bu-i</code> = <code>iBu</code></td>
        <td>
          <a lang="ru" href="https://ru.wikipedia.org/wiki/%D0%91%D1%83%D1%82%D0%B8%D0%BB" target="_blank">Изобутил или 2-метилпропил</a>
          <a lang="en" href="https://en.wikipedia.org/wiki/Butyl_group" target="_blank">isobutyl or 2-methylpropyl</a>
        </td>
        <td><div class="echem-formula">{}_(x1)CH2-CH&lt;\CH3&gt;/CH3</div></td>
      </tr>
      <tr>
        <td><code>s-Bu</code> = <code>Bu-s</code> = <code>sBu</code></td>
        <td>
          <a lang="ru" href="https://ru.wikipedia.org/wiki/%D0%91%D1%83%D1%82%D0%B8%D0%BB" target="_blank">втор-бутил или 1-метилпропил</a>
          <a lang="en" href="https://en.wikipedia.org/wiki/Butyl_group" target="_blank">sec-butyl or butan-2-yl</a>
        </td>
        <td><div class="echem-formula">{}-CH&lt;/CH3&gt;\CH2-CH3</div></td>
      </tr>
      <tr>
        <td><code>t-Bu</code> = <code>Bu-t</code> = <code>tBu</code></td>
        <td>
          <a lang="ru" href="https://ru.wikipedia.org/wiki/%D0%91%D1%83%D1%82%D0%B8%D0%BB" target="_blank">Третичный бутил, трет-бутил или 1,1-диметилэтил</a>
          <a lang="en" href="https://en.wikipedia.org/wiki/Butyl_group" target="_blank">tert-butyl</a>
        </td>
        <td><div class="echem-formula">{}_(x1)C&lt;`|CH2&gt;&lt;|CH3&gt;-CH3</div></td>
      </tr>
      <tr>
        <td><code>Ph</code></td>
        <td>
          <a lang="ru" href="https://ru.wikipedia.org/wiki/%D0%A4%D0%B5%D0%BD%D0%B8%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%B3%D1%80%D1%83%D0%BF%D0%BF%D0%B0" target="_blank">Фенил</a>
          <a lang="en" href="https://en.wikipedia.org/wiki/Phenyl_group" target="_blank">Phenyl</a>
        </td>
        <td><div class="echem-formula">{}-//-\\`/`=`\</div></td>
      </tr>
      <tr>
        <td><code>Ac</code></td>
        <td>
          <a lang="ru" href="https://en.wikipedia.org/wiki/Acetyl_group" target="_blank">Ацетил</a>
          <a lang="en" href="https://en.wikipedia.org/wiki/Acetyl_group" target="_blank">Acetyl</a>
        </td>
        <td><div class="echem-formula">{}_(x1)C`|O|-CH3</div></td>
      </tr>
      <tr>
        <td><code>Tf</code></td>
        <td><a href="https://en.wikipedia.org/wiki/Triflyl_group" target="_blank">Triflyl or trifluoromethanesulfonyl</a></td>
        <td><div class="echem-formula">{}--S|O`|`|O|--C&lt;`|F&gt;&lt;|F&gt;-F</div></td>
      </tr>
      <tr>
        <td><code>CoA</code></td>
        <td>
          <a lang="ru" href="https://en.wikipedia.org/wiki/Coenzyme_A" target="_blank">Кофермент A</a>
          <a lang="en" href="https://en.wikipedia.org/wiki/Coenzyme_A" target="_blank">Coenzyme A</a>
        </td>
        <td>
          <div class="echem-formula">
            $L(.9)$color(red)SH$color()`/`\`/N&lt;_(y.5)H&gt;`\`/O/`|/`|NH`\`/O/`|&lt;`\dHO&gt;/&lt;_q4H3C&gt;&lt;_(a-30)CH3&gt;\/O_(A0)P`|O|&lt;|OH&gt;-O-P`|O|&lt;|OH&gt;-O:o;
            `-&lt;_(a-54,d+)O|P&lt;-OH&gt;|O`|`-HO&gt;_p&lt;_(a-54,w+)`/#o&gt;_pO_p&lt;_p_(a-54,d+)OH&gt;_(a-54,w+)N_(a54)_q_p6&lt;_q6NH2&gt;_pp6N_p6_pp6N_p6_p6_qN_qq_q 
            = {CoA}$color(red)SH
          </div>
        </td>
      </tr>
    </table>

  </page>

  <page id="ref-func" data-owner="ref">
    <h1>
      <span lang="ru">Список функций</span>
      <span lang="en">List of functions</span>
    </h1>
    <p lang="ru">
      Функция всегда ставится перед тем объектом, к которому она должна применяться.
    </p>
    <p lang="en">
      The function is always placed before the object to which it should be applied.
    </p>
    <p>
      <span lang="ru">См. также</span><span lang="en">See also</span>: 
      <a href="?p=rules-func"><span lang="ru">Функции CharChem</span><span lang="en">CharChem functions</span></a>,
      <a href="?p=rules-color"><span lang="ru">Цветовые функции</span><span lang="en">Color functions</span></a>,
      <a href="?p=rules-bond-funcs"><span lang="ru">Функции для химических связей</span><span lang="en">Functions for chemical bonds</span></a>.
    </p>
    <div class="two-col-table" style="grid-template-columns: 1fr 2fr 1fr 2fr; max-width: 1600px; width: 97vw;">
      <header><span lang="ru">Название</span><span lang="en">Name</span></header>
      <header><span lang="ru">Краткое описание</span><span lang="en">Brief description</span></header>
      <header><span lang="ru">Пример</span><span lang="en">Example</span></header>
      <header><span lang="ru">Код примера</span><span lang="en">Example code</span></header>

      <a href="?p=ref-func-atomColor">atomColor</a>
      <div><span lang="ru">Цвет атомов</span><span lang="en">Color of atoms</span></div>
      <span class="echem-formula">$atomColor(brown)2H2SO4 &lt;=&gt; 2H^+ + SO4^2-</span>
      <code class="chem-code">$atomColor(brown)2H2SO4 &lt;=&gt; 2H^+ + SO4^2-</code>

      <a href="?p=ref-func-atomColor1">atomColor1</a>
      <div><span lang="ru">Цвет следующего атома</span><span lang="en">Color of the next atom</span></div>
      <span class="echem-formula">H2$atomColor1(brown)SO4</span>
      <code class="chem-code">H2$atomColor1(brown)SO4</code>

      <span>
        <a href="?p=ref-func-bg">background</a>
        <span lang="ru">или</span><span lang="en">or</span>
        <code>bg</code>
      </span>
      <div><span lang="ru">Фоновая фигура</span><span lang="en">Background figure</span></div>
      <span class="echem-formula">/`|$bg(orange,round)S|\</span>
      <code class="chem-code">/`|$bg(orange,round)S|\</code>

      <a href="?p=ref-func-C">C</a>
      <div><span lang="ru">Центр формулы</span><span lang="en">Center of the formula</span></div>
      <span class="echem-formula">2/`|$C()S|\ -&gt; /`|$C()S|\/`|S|\</span>
      <code class="chem-code">2/`|$C()S|\ -&gt; /`|$C()S|\/`|S|\</code>

      <a href="?p=ref-func-color">color</a>
      <div>
        <span lang="ru">Цвет для всех частей формулы</span>
        <span lang="en">Color for all parts of the formula</span>
      </div>
      <span class="echem-formula">3$color(blue)(NH4)2$color(red)SO4</span>
      <code class="chem-code">3$color(blue)(NH4)2$color(red)SO4</code>

      <a href="?p=ref-func-dblAlign">dblAlign</a>
      <div>
        <span lang="ru">Выравнивание двойных связей</span>
        <span lang="en">Alignment of double bonds</span>
      </div>
      <span class="echem-formula">\$dblAlign(r)||\ &lt;-&gt; \$dblAlign(L)||\</span>
      <code class="chem-code">\$dblAlign(r)||\ &lt;-&gt; \$dblAlign(L)||\</code>

      <a href="?p=ref-func-dots">dots</a>
      <div>
        <span lang="en">Lewis structures</span>
        <span lang="ru">Структуры Льюиса</span>
      </div>
      <span class="echem-formula">H/$dots(LtURt)O\H</span>
      <code class="chem-code">H/$dots(LtURt)O\H</code>

      <a href="?p=ref-func-itemColor">itemColor</a>
      <div>
        <span lang="ru">Цвет <a data-ref="node-item">элементов узла</a></span>
        <span lang="en">Color of <a data-ref="node-item">node items</a></span>
      </div>
      <span class="echem-formula">$itemColor(blue)(NH4)2$itemColor(brown)SO4</span>
      <code class="chem-code">$itemColor(blue)(NH4)2$itemColor(brown)SO4</code>

      <a href="?p=ref-func-itemColor1">itemColor1</a>
      <div>
        <span lang="ru">Цвет следующего <a data-ref="node-item">элемента узла</a></span>
        <span lang="en">Color of next <a data-ref="node-item">node items</a></span>
      </div>
      <span class="echem-formula">$itemColor1(blue)Fe2(S$itemColor1(red)O4)3</span>
      <code class="chem-code">$itemColor1(blue)Fe2(S$itemColor1(red)O4)3</code>

      <a href="?p=ref-func-L">L</a>
      <div>
        <span lang="ru">Длина химических связей</span>
        <span lang="en">Length of chemical bonds</span>
      </div>
      <span class="echem-formula">\|`/$L(2)`|</span>
      <code class="chem-code">\|`/$L(2)`|</code>

      <a href="?p=ref-func-M">M</a>
      <div>
        <span lang="ru">Атомная масса изотопа</span>
        <span lang="en">Atomic mass of isotope</span>
      </div>
      <span class="echem-formula">$M(235)U</span>
      <code class="chem-code">$M(235)U</code>

      <a href="?p=ref-func-nM">nM</a>
      <div>
        <span lang="ru">Атомный номер и масса изотопа</span>
        <span lang="en">Atomic number and mass of the isotope</span>
      </div>
      <span class="echem-formula">$nM(26)Al + $nM(1,0){n} -> $nM(27)Al"*"</span>
      <code class="chem-code">$nM(26)Al + $nM(1,0){n} -> $nM(27)Al"*"</code>

      <a href="?p=ref-func-padding">padding</a>
      <div>
        <span lang="ru">Отступы внутри скобок</span>
        <span lang="en">Indentation inside brackets</span>
      </div>
      <span class="echem-formula">H\$padding(0.4,0.1)[O/`|O|]'150-300'\O/H</span>
      <code class="chem-code">H\$padding(0.4,0.1)[O/`|O|]'150-300'\O/H</code>

      <a href="?p=ref-func-pos">pos</a>
      <div>
        <span lang="ru">Положение заряда узла</span>
        <span lang="en">Node charge position</span>
      </div>
      <span class="echem-formula">$pos(LT)O^-\$pos(LB)N^+|O`|/CH3</span>
      <code class="chem-code">$pos(LT)O^-\$pos(LB)N^+|O`|/CH3</code>

      <a href="?p=ref-func-slope">slope</a>
      <div>
        <span lang="ru">Угол наклона для <a data-ref="bond-short">кратких химических связей</a></span>
        <span lang="en">Slope angle for <a data-ref="bond-short">short chemical bonds</a></span>
      </div>
      <span class="echem-formula">$slope(45)/\`/`\</span>
      <code class="chem-code">$slope(45)/\`/`\</code>

      <a href="?p=ref-func-ver">ver</a>
      <div>
        <span lang="ru">Версия CharChem</span>
        <span lang="en">CharChem version</span>
      </div>
      <span class="echem-formula">$ver(1)-_qwO_qww_qdO_qdd</span>
      <code class="chem-code">$ver(1)-_qwO_qww_qdO_qdd</code>
    </div>
  </page>

  <page id="ref-func-atomColor" data-owner="ref-func">
    <h1><span lang="ru">Цвет атомов</span><span lang="en">Color of atoms</span></h1>
    <p lang="ru">
      Позволяет указать цвет только для атомов. 
      То есть, не действует на коэффициенты, заряды, радикалы, комментарии, скобки, связи и т.п.
    </p>
    <p lang="en">
      Allows you to specify a color for atoms only.
      That is, it does not affect coefficients, charges, radicals, comments, brackets, bonds, etc.      
    </p>
    <p>
      <span lang="ru">Синтаксис</span><span lang="en">Syntax</span>: 
      <code>$atomColor(<i>color</i>)</code>
    </p>
    <p>
      <i>color</i> - <a href="?p=ref-color"><span lang="ru">описание цвета</span><span lang="en">color description</span></a>. 
      <span lang="ru">Если не указан, то будет восстановлен цвет по-умолчанию.</span>
      <span lang="en">If not specified, the default color will be restored.</span>
    </p>
    <p lang="ru">Область действия: до конца формулы. Для прекращения действия можно использовать <code>$atomColor()</code></p>
    <p lang="en">Scope: Until the end of the formula. To stop the action, you can use <code>$atomColor()</code></p>
    <div class="two-col-table" style="grid-template-columns: 3fr 1fr;">
      <code class="chem-code">$atomColor(red){R}-CO2H</code>
      <div class="echem-formula">$atomColor(red){R}-CO2H</div>
      <code class="chem-code">$atomColor(blue)H2N$atomColor()-CH&lt;|{R}&gt;-$atomColor(red)COOH</code>
      <div class="echem-formula">$atomColor(blue)H2N$atomColor()-CH&lt;|{R}&gt;-$atomColor(red)COOH</div>
      <code class="chem-code">
        $atomColor(#C0C)I|\\|&lt;\I&gt;`//`\&lt;`/I&gt;`||/
      </code>
      <div class="echem-formula">
        $atomColor(#C0C)I|\\|&lt;\I&gt;`//`\&lt;`/I&gt;`||/
      </div>
    </div>
    <p>
      <span lang="ru">Смотри также:</span>
      <span lang="en">See also:</span>
      <a href="?p=ref-func-atomColor1">$atomColor1()</a>,
      <a href="?p=rules-color"><span lang="ru">цветовые функции</span><span lang="en">color functions</span></a>.
    </p>
  </page>

  <page id="ref-func-atomColor1" data-owner="ref-func">
    <h1>
      <span lang="ru">Цвет следующего атома</span>
      <span lang="en">Color of the next atom</span>
    </h1>
    <p lang="ru">Аналог функции <a href="?p=ref-func-atomColor">atomColor</a>, но действует только на следующий атом</p>
    <p lang="en">Similar to the <a href="?p=ref-func-atomColor">atomColor</a> function, but only affects the next atom.</p>
    <p>
      <span lang="ru">Синтаксис</span><span lang="en">Syntax</span>: 
      <code>$atomColor1(<i>color</i>)</code>
    </p>
    <p>
      <i>color</i> - <a href="?p=ref-color">
        <span lang="ru">описание цвета</span>
        <span lang="en">color description</span>
      </a>.
    </p>
    <p lang="ru">Область действия: следующий за функцией атом.</p>
    <p lang="en">Scope: the atom following the function.</p>
    <div class="two-col-table">
      <code class="chem-code">{R}-$atomColor1(red)CO2H</code>
      <div class="echem-formula">{R}-$atomColor1(red)CO2H</div>
      <code class="chem-code">\\|$atomColor1(red)O`/`\$atomColor1(blue)N`||/</code>
      <div class="echem-formula">\\|$atomColor1(red)O`/`\$atomColor1(blue)N`||/</div>
    </div>
    <p>
      <span lang="ru">Смотри также</span><span lang="en">See also</span>: 
      <a href="?p=ref-func-atomColor">$atomColor()</a>,
      <a href="?p=rules-color"><span lang="ru">цветовые функции</span><span lang="en">color functions</span></a>.
    </p>
  </page>

  <page id="ref-func-bg" data-owner="ref-func">
    <h1>
      <span lang="ru">Фоновая фигура</span>
      <span lang="en">Background figure</span>
    </h1>
    <p lang="ru">Позволяет выделить какую-то часть формулы при помощи фона</p>
    <p lang="en">Allows you to highlight some part of the formula using a background</p>
    <p>
      <span lang="ru">Синтаксис</span><span lang="en">Syntax:</span>: 
      <code>$background(<i lang="ru">параметры</i><i lang="en">params</i>)</code> 
      <span lang="ru">или короче</span><span lang="en">or shorter</span>
      <code>$bg(<i lang="ru">параметры</i><i lang="en">params</i>)</code>
    </p>
    <p lang="ru">Минимальная версия CharChem: 2.0</p>
    <p lang="en">Minimum CharChem version: 2.0</p>
    <p lang="ru">Параметры могут следовать в любом порядке и не являются обязательными. 
      Но чтобы увидеть результат, нужно указать либо цвет заливки (<code>fill</code>), либо цвет линии по периметру фигуры (<code>stroke</code>).
    </p>
    <p lang="en">
      The parameters can be in any order and are not mandatory. 
      But to see the result, you need to specify either the fill color (<code>fill</code>) or the color of the line around the shape's perimeter (<code>stroke</code>).
    </p>
    <table>
      <tr>
        <th><span lang="ru">Параметр</span><span lang="en">Parameter</span></th>
        <th><span lang="ru">Описание</span><span lang="en">Description</span></th>
      </tr>
      <tr>
        <td>
          <code><i lang="ru">цвет</i><i lang="en">color</i></code><br /> 
          | <code>fill:<i lang="ru">цвет</i><i lang="en">color</i></code>&nbsp;|
          <code>f:<i lang="ru">цвет</i><i lang="en">color</i></code>
        </td>
        <td>
          <div lang="ru">
          <a href="?p=ref-color">Цвет</a> фигуры. Например, <code>orange</code> или <code>#F00</code>.<br />
          То есть, обычно указывается просто цвет. 
          Но для большей информативности можно указать что это цвет заливки при помощи префиксов 
          <code>fill:</code> или <code>f:</code>.<br />
          Если параметр не указан, то заливки не будет. Предполагается что в этом случае будет указан периметр.
          </div>
          <div lang="en">
            The <a href="?p=ref-color">color</a> of the figure. For example, <code>orange</code> or <code>#F00</code>.
            That is, usually just the color is specified. 
            But for more information, you can specify that this is the fill color using the <code>fill:</code> or <code>f:</code> prefixes.
            If the parameter is not specified, there will be no fill. It is assumed that in this case the perimeter will be specified.            
          </div>
        </td>
      </tr>
      <tr>
        <td><code>rect</code> | <code>round</code> | <code>ellipse</code></td>
        <td>
          <div lang="ru">Форма фигуры. Если не указана, то <code>rect</code></div>
          <div lang="en">The shape of the figure. If not specified, then <code>rect</code></div>
        </td>
      </tr>
      <tr>
        <td><code>*</code></td>
        <td>
          <div lang="ru">Звёздочка означает, что фигура будет применяться ко всему реагенту.</div>
          <div lang="en">The Asterisk (Star) symbol means that the shape will be applied to the entire reagent.</div>
        </td>
      </tr>
      <tr>
        <td>
          <code>to:<i>n</i></code> 
          <span lang="ru">или</span><span lang="en">or</span>
          <code>:<i>n</i></code></td>
        <td>
          <div lang="ru">
          Если не указан, то фигура применяется к тому узлу, перед которым находится функция.<br />
          В качестве <i>n</i> указывается номер узла. 
          Если значение положительное, то это порядковый номер узла от начала реагента.
          Если отрицательный - то относительно того узла, для которого указана функция.
          Но нельзя указывать те узлы, которые находятся после функции (т.к. они еще не существуют на момент обработки функции)<br />
          Можно указать несколько узлов через точку с запятой.
          Фигура будет сформирована так, чтобы захватить все указанные узлы. 
          Во втором примере жёлтый прямоугольник соединяет первый и четверый узел, но третий тоже указан, 
          т.к. он не находится с ними на одной линии.
          <br />
          Если функция стоит в конце реагента и за ней нет узлов, то нужно указать минимум два узла.
          </div>
          <div lang="en">
            If not specified, the figure is applied to the node before which the function is located.<br />
            The node number is specified as <i>n</i>. 
            If the value is positive, it is the ordinal number of the node from the beginning of the reagent. 
            If negative, it is relative to the node for which the function is specified. 
            However, you cannot specify nodes that are after the function (since they do not yet exist at the time the function is processed).<br />
            You can specify several nodes separated by a semicolon. The figure will be formed in such a way as to capture all the specified nodes. 
            In the second example, the yellow rectangle connects the first and fourth nodes, but the third is also specified, since it is not on the same line with them.
            If the function is at the end of the reagent and there are no nodes after it, then at least two nodes must be specified.            
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <code>stroke:<i lang="ru">цвет</i><i lang="en">color</i></code> | 
          <code>s:<i lang="ru">цвет</i><i lang="en">color</i></code>
        </td>
        <td>
          <span lang="ru">Цвет линии по периметру фигуры. Если не указан, то не выводится.</span>
          <span lang="en">Color of the line around the perimeter of the figure. If not specified, it is not displayed.</span>
        </td>
      </tr>
      <tr>
        <td>
          <code>width:<i lang="ru">число</i><i lang="en">number</i></code> 
          | <code>w:<i lang="ru">число</i><i lang="en">number</i></code>
        </td>
        <td lang="ru">
          Толщина линии по периметру фигуры. Имеет смысл только совместно с параметром <code>stroke</code>.<br />
          Если не указан, то будет использоваться внешняя настройка, которая обычно соответствует 1 пикселю.<br />
          Если указан, то 1 соответствует ширине одинарной химической связи.
        </td>
        <td lang="en">
          The thickness of the line around the perimeter of the figure. 
          Only makes sense in combination with the <code>stroke</code> parameter.<br />
          If not specified, the external setting will be used, which usually corresponds to 1 pixel.<br />
          If specified, 1 corresponds to the width of a single chemical bond.          
        </td>
      </tr>
      <tr>
        <td>
          <code>padding:<i lang="ru">от 1 до 4 чисел</i><i lang="en">1..4&nbsp;numbers</i></code> | 
          <code>p:<i lang="ru">от 1 до 4 чисел</i><i lang="en">1..4 numbers</i></code>
        </td>
        <td>
          <div lang="ru">
            Внутренний отступ от границы фигуры до содержимого. Концептуально соответсвует свойству padding в CSS.<br />
            Единицы измерения такие же, как для всех параметров, связанных с координатами. 
            То есть, 1 соответствует длине химической связи.<br />
            Если указывается несколько значений, то они разделяются <code>;</code> (точкой с запятой) без пробелов.<br />
            [all], [vert, horiz], [top, horiz, bottom], [top, l, bot, r]
            Указанные числа в зависимости от их количества означают отступы:
            <ol>
              <li>Со всех сторон</li>
              <li>Вертикальные и горизонтальные</li>
              <li>Сверху, горизонтальные и снизу</li>
              <li>Сверху, справа, снизу и слева</li>
            </ol>
            В последнем примере можно увидеть, как это работает.<br />
            А в предпоследнем примере можно видеть применение отрицательного отсупа. 
            Это может быть полезно для круга и эллипса, т.к. там не всегда оптимально определяются границы фигуры, которая захватывает все необходимые узлы.
          </div>
          <div lang="en">
            Inner padding from the border of the figure to the content. Conceptually corresponds to the padding property in CSS.<br />
            The units of measurement are the same as for all coordinate-related parameters. 
            That is, 1 corresponds to the length of the chemical bond.<br />
            If several values ​​are specified, they are separated by <code>;</code> (semicolon) without spaces.<br />
            [all], [vert, horiz], [top, horiz, bottom], [top, l, bot, r] 
            The specified numbers, depending on their quantity, mean padding:            
            <ol>
              <li>On all sides</li>
              <li>Vertical and horizontal</li>
              <li>Top, horizontal and bottom</li>
              <li>Top, right, bottom and left</li>
            </ol>
            In the last example you can see how it works.<br />
            And in the penultimate example you can see the use of a negative offset.
            This can be useful for a circle and an ellipse, because there the boundaries of the figure that captures all the necessary nodes are not always optimally determined.
          </div>
        </td>
      </tr>
      <tr>
        <td><code>r:<i lang="ru">число</i><i lang="en">number</i></code></td>
        <td>
          <div lang="ru">
            Радиус закругления углов. Для прямоугольной фигуры. Единицы измерения такие же как у padding.
            Если не указан, то закругление не используется.  
          </div>
          <div lang="en">
            Corner rounding radius. For a rectangular shape. Units are the same as padding.
            If not specified, rounding is not used.            
          </div>
        </td>
      </tr>
    </table>

    <h2>
      <span lang="ru">Примеры</span>
      <span lang="en">Examples</span>
    </h2>
    <div class="two-col-table">
      <code class="chem-code">$background(cyan)H2N\/`|$bg(orange,round)O|\&lt;/$bg(#FFA,ellipse,stroke:#888)COOH&gt;|`/`\`|</code>
      <div class="echem-formula">$background(cyan)H2N\/`|$bg(orange,round)O|\&lt;/$bg(#FFA,ellipse,stroke:#888)COOH&gt;|`/`\`|</div>
      <code class="chem-code">H2N-C&lt;`|H&gt;&lt;-$bg(yellow,to:1;3,padding:.2)COOH&gt;|S|C&lt;|$bg(to:3,rgba(0,255,255,0.4),p:.4;.2;.1)H&gt;&lt;-NH2&gt;`-HOOC</code>
      <div class="echem-formula">H2N-C&lt;`|H&gt;&lt;-$bg(yellow,to:1;3,padding:.2)COOH&gt;|S|C&lt;|$bg(to:3,rgba(0,255,255,0.4),p:.4;.2;.1)H&gt;&lt;-NH2&gt;`-HOOC</div>
      <code class="chem-code">`-&lt;_(a54)HO&gt;_q&lt;_(a54)H3C&gt;_q&lt;||O&gt;_q&lt;_(a54)NH2&gt;_q_(a54)$itemColor1(#C00){R}$background(#FFA,*,ellipse,p:-.5)</code>
      <div class="echem-formula">`-&lt;_(a54)HO&gt;_q&lt;_(a54)H3C&gt;_q&lt;||O&gt;_q&lt;_(a54)NH2&gt;_q_(a54)$itemColor1(#C00){R}$background(#CFC,*,ellipse,p:-.5)</div>
      <code class="chem-code">
        |$bg(#FCF,*,p:1) = |$bg(#FCF,*,p:0.2;1) = |$bg(#FCF,*,p:0.2;1;1.5) = |$bg(#FCF,*,p:0.1;1;1.5;2)
      </code>
      <div class="echem-formula">
        |$bg(#FCF,*,p:1) = |$bg(#FCF,*,p:0.2;1) = |$bg(#FCF,*,p:0.2;1;1.5) = |$bg(#FCF,*,p:0.1;1;1.5;2)
      </div>
    </div>
  </page>

  <page id="ref-func-C" data-owner="ref-func">
    <h1>
      <span lang="ru">Центр формулы</span>
      <span lang="en">Center of the formula</span>
    </h1>
    <p><span lang="ru">Синтаксис</span><span lang="en">Syntax</span>: <code>$C()</code></p>
    <p lang="ru">Область действия: следующий за функцией <a data-ref="node">узел</a>.</p>
    <p lang="en">Scope: The next <a data-ref="node">node</a> following the function.</p>
    <p lang="ru">Минимальная версия CharChem: 1.0</p>
    <p lang="en">Minimum version of CharChem: 1.0</p>
    <p lang="ru">
      Иногда в уравнениях нужно использовать структурные формулы. 
      В этом случае желательно, чтобы реагенты правильно выравнивались по высоте. 
      Довольно часто встроенный алгоритм может выполнить это автоматически. Например, здесь все выглядит хорошо.
    </p>
    <p lang="en">
      Sometimes you need to use structural formulas in your equations.
      In this case, it is desirable that the reagents are properly aligned in height.
      Quite often, the built-in algorithm can do this automatically. For example, everything looks good here.      
    </p>
    <div class="two-col-table">
      <div class="echem-formula">
        2H\N&lt;`/H&gt;_(A0)H + $slope(45)H-O\S/O`/\O`\`/O`-H -&gt; (NH4)2SO4
      </div>
      <code class="chem-code">
        2H\N&lt;`/H&gt;_(A0)H + $slope(45)H-O\S/O`/\O`\`/O`-H -&gt; (NH4)2SO4
      </code>
    </div>
    <p lang="ru">Но так происходит не всегда. Например, если немного повернуть первый реагент</a>, то внешний вид станет хуже.</p>
    <p lang="en">But this is not always the case. For example, if you turn the first <a data-ref="agent">reagent</a> a little, the appearance will become worse.</p>
    <div class="two-col-table">
      <div class="echem-formula">
        2H/N&lt;`|H&gt;\H + $slope(45)H-O\S/O`/\O`\`/O`-H -&gt; (NH4)2SO4
      </div>
      <code class="chem-code">
        2H/N&lt;`|H&gt;\H + $slope(45)H-O\S/O`/\O`\`/O`-H -&gt; (NH4)2SO4
      </code>
    </div>
    <p lang="ru">
      Так происходит от того, что при автоматическом поиске центральной оси учитывается количество <a data-ref="node">узлов</a> на одинаковой высоте. 
      Здесь два нижних атома водорода оказались на одной линии. Поэтому выравнивание произошло по нижнему краю формулы. 
      Это выглядит некрасиво. Поэтому при помощи конструкции <code>$C()</code> можно явно указать узел, по которому будет выполняться центрирование.
    </p>
    <p lang="en">
      This is because the automatic search for the central axis takes into account the number of <a data-ref="node">nodes</a> at the same height.
      Here, the two lower hydrogen atoms were on the same line. Therefore, the alignment occurred along the lower edge of the formula.
      This does not look nice. Therefore, using the <code>$C()</code> construction, you can explicitly specify the node by which the centering will be performed.      
    </p>
    <div class="two-col-table">
      <div class="echem-formula">
        2H/$C()$itemColor1(var(--select-color))N&lt;`|H&gt;\H + $slope(45)H-O\S/O`/\O`\`/O`-H -&gt; (NH4)2SO4
      </div>
      <code class="chem-code">
        2H/<em>$C()</em>N&lt;`|H&gt;\H + $slope(45)H-O\S/O`/\O`\`/O`-H -&gt; (NH4)2SO4      
      </code>
    </div>
    <p lang="ru">
      Здесь конструкция <code>$C()</code> перед атомом азота помогла значительно улучшить внешний вид. 
      Но можно использовать несколько таких конструкций в одной формуле. 
      В этом случае для них вычисляется среднее значение. 
      Например, можно обозначить центрами нижний и верхний узел формулы.
    </p>
    <p lang="en">
      Here the <code>$C()</code> construction before the nitrogen atom helped to improve the appearance considerably.
      But it is possible to use several such constructions in one formula.
      In this case, the average value is calculated for them.
      For example, the lower and upper nodes of the formula can be designated as centers.      
    </p>
    <div class="two-col-table">
      <div class="echem-formula">
        2$C()$itemColor1(var(--select-color))H/N&lt;`|$C()$itemColor1(var(--select-color))H&gt;\H + $slope(45)H-O\S/O`/\O`\`/O`-H -&gt; (NH4)2SO4
      </div>
      <code class="chem-code">
        2<em>$C()</em>H/N&lt;`|<em>$C()</em>H&gt;\H + $slope(45)H-O\S/O`/\O`\`/O`-H -&gt; (NH4)2SO4
      </code>
    </div>
    <p lang="ru">
      На следующей иллюстрации более подробно демонстрируется, как из двух центров вычисляется финальный результат.
    </p>
    <p lang="en">
      The following illustration shows in more detail how the final result is calculated from two centers.      
    </p>
    <div class="echem-formula" style="font-size: 1.5rem; text-align: center;">
      2$itemColor1(var(--select-color))$C()H/N&lt;`|$itemColor1(var(--select-color))$C()H&gt;\H; 
      $color(brown)#1_(x-.7,N0):a_(x%h:3,H)_(y#3,N0)_(x-%h,H)_(x.3,N0)_(y#1,C+)_(y#1;3,N0)$bg(round,brown,p:.13)_(x#a,N0)_(x%h,H)$color() +
    </div>
  </page>

  <page id="ref-func-color" data-owner="ref-func">
    <h1>
      <span lang="ru">Цвет конструкций формулы</span>
      <span lang="en">Color of formula parts</span>
    </h1>
    <p><span lang="ru">Синтаксис</span><span lang="en">Syntax</span>: <code>$color(<i>colorDef</i>)</code></p>
    <p><i>colorDef</i> - <a href="?p=ref-color"><span lang="ru">описание цвета</span><span lang="en">color description</span></a>.</p>
    <p lang="ru">
      Область действия: до конца формулы. Для прекращения действия можно использовать <code>$color()</code>
    </p>
    <p lang="en">
      Scope: Until the end of the formula. To stop the action, you can use <code>$color()</code>
    </p>
    <div class="two-col-table">
      <code class="chem-code">CH3-CH2$color(blue)-COOH</code>
      <div class="echem-formula">CH3-CH2$color(blue)-COOH</div>
      <code class="chem-code">$color(blue)H3N-$color()CH&lt;|CH3&gt;$color(red)-COOH</code>
      <div class="echem-formula">$color(blue)H3N-$color()CH&lt;|CH3&gt;$color(red)-COOH</div>
    </div>
    <h2>
      <span lang="ru">Цвет по-умолчанию</span>
      <span lang="en">Default color</span>
    </h2>
    <p lang="ru">Использование <code>$color()</code> (с пустыми параметрами) восстанавливает цвет по-умолчанию. 
      Этот цвет устанавливается "снаружи".
    </p>
    <p lang="en">
      Using <code>$color()</code> (with empty parameters) restores the default color.
      This color is set "outside".
    </p>
    <p lang="ru">Следующий пример показывает, как одно описание правильно отрисовывается в светлой и тёмной теме.</p>
    <p lang="en">The following example shows how a single description renders correctly in both light and dark themes.</p>
    <div class="two-col-table" style="grid-template-columns: auto auto auto;">
      <code class="chem-code">NH2`|ww$color(red)&lt;`\`/HS&gt;$color()/`|O|\OH</code>
      <div class="echem-formula">NH2`|ww$color(red)&lt;`\`/HS&gt;$color()/`|O|\OH</div>
      <div class="dark-theme">
        <div class="echem-formula">NH2`|ww$color(red)&lt;`\`/HS&gt;$color()/`|O|\OH</div>
      </div>
    </div>

    <p lang="ru">Смотри также: <a href="?p=rules-color">Цветовые функции</a></p>
    <p lang="en">See also: <a href="?p=rules-color">Color functions</a></p>
  </page>

  <page id="ref-func-dblAlign" data-owner="ref-func">
    <h1>
      <span lang="ru">Выравнивание двойных связей</span>
      <span lang="en">Alignment of double bonds</span>
    </h1>
    <p><span lang="ru">Синтаксис</span><span lang="en">Syntax</span>: <code>$dblAlign(<i>mode</i>)</code></p>
    <p>
      <i>mode</i> - 
      <span lang="ru">Режим выравнивания, который задаётся буквами</span> 
      <span lang="en">The alignment mode, which is specified by the letters</span>
      <code>r</code>, <code>R</code>, <code>m</code>, <code>M</code>, <code>l</code> <span lang="ru">или</span><span lang="en">or</span> <code>L</code>.
    </p>
    <p lang="ru">Область действия: до конца формулы. Для прекращения действия можно использовать <code>$dblAlign()</code></p>
    <p lang="en">Scope: Until the end of the formula. To stop the action, you can use <code>$dblAlign()</code></p>
    <p lang="ru">По-умолчанию, двойные связи выравниваются автоматически. Вот примеры того, как это происходит:</p>
    <p lang="en">By default, double bonds are automatically aligned. Here are examples of how this happens:</p>
    <div class="two-col-table inline-grid" style="grid-template-columns: auto auto auto;">
      <code class="chem-code">\=/</code>
      <div class="echem-formula">\=/</div>
      <div>
        <span lang="ru">Выравнивание влево</span>
        <span lang="en">Align left</span>
      </div>
      <code class="chem-code">/=\</code>
      <div class="echem-formula">/=\</div>
      <div>
        <span lang="ru">Выравнивание вправо</span>
        <span lang="en">Align right</span>
      </div>
      <code class="chem-code">\=\</code>
      <div class="echem-formula">\=\</div>
      <div>
        <span lang="ru">Выравнивание по центру</span>
        <span lang="en">Center alignment</span>
      </div>
    </div>
    <p lang="ru">Лево и право определяются относительно направления связи.</p>
    <p lang="en">Left and right are defined relative to the direction of the bond.</p>
    <table>
      <tr>
        <th><span lang="ru">Параметр</span><span lang="en">Parameter</span></th>
        <th><span lang="ru">Режим</span><span lang="en">Mode</span></th>
        <th><span lang="ru">Пример описания</span><span lang="en">Example description</span></th>
        <th><span lang="ru">Результат</span><span lang="en">Result</span></th>
      </tr>
      <tr>
        <td><code>r</code> <span lang="ru">или</span><span lang="en">or</span> <code>R</code></td>
        <td><span lang="ru">Выравнивание вправо</span><span lang="en">Align right</span></td>
        <td><code class="chem-code">$dblAlign(r)/=\ \=\ \=/</code></td>
        <td><div class="echem-formula">$dblAlign(r)/=\ \=\ \=/</div></td>
      </tr>
      <tr>
        <td><code>l</code> <span lang="ru">или</span><span lang="en">or</span> <code>L</code></td>
        <td><span lang="ru">Выравнивание влево</span><span lang="en">Align left</span></td>
        <td><code class="chem-code">$dblAlign(L)/=\ \=\ \=/</code></td>
        <td><div class="echem-formula">$dblAlign(L)/=\ \=\ \=/</div></td>
      </tr>
      <tr>
        <td><code>m</code> <span lang="ru">или</span><span lang="en">or</span> <code>M</code></td>
        <td><span lang="ru">Выравнивание по центру</span><span lang="en">Center alignment</span></td>
        <td><code class="chem-code">$dblAlign(m)/=\ \=\ \=/</code></td>
        <td><div class="echem-formula">$dblAlign(m)/=\ \=\ \=/</div></td>
      </tr>
    </table>
    <p lang="ru">
      Функция <code>dblAlign</code> действует на любые виды связей &mdash;
      <a data-ref="bond-short">краткие</a>, <a data-ref="poly">полигональные</a> и <a data-ref="uni">универсальные</a>.
      Но режим выравнивания, указанный через <a href="?p=rules-suffixes">суффикс</a> или <a href="?p=rules-uni-N">параметр</a>, 
      имеет больший приоритет чем функция.
    </p>
    <p lang="en">
      The <code>dblAlign</code> function works on any type of bonds &mdash; 
      <a data-ref="bond-short">short</a>, <a data-ref="poly">polygonal</a> and <a data-ref="uni">universal</a>. 
      But the alignment mode specified via a <a href="?p=rules-suffixes">suffix</a> or <a href="?p=rules-uni-N">parameter</a> 
      has a higher priority than the function.
    </p>
  </page>

  <page id="ref-func-dots" data-owner="ref-func">
    <h1>
      <span lang="ru">Структуры Льюиса (точки)</span>
      <span lang="en">Lewis structures (dots)</span>
    </h1>
    <p>
      <span lang="ru">Синтаксис</span><span lang="en">Syntax</span>: 
      <code>$dots(<i>params</i>)</code>
    </p>
    <p lang="ru">Область действия: следующий <a data-ref="node-item">элемент узла</a>.</p>
    <p lang="en">Scope: next <a data-ref="node-item">node item</a>.</p>
    <h2>
      <span lang="ru">Возможные параметры</span>
      <span lang="en">Possible parameters</span>
    </h2>
    <p>
      <span lang="ru">Используются первые буквы от следующих слов:</span>
      <span lang="en">The first letters of the following words are used:</span>
      Left, Right, Top, Up, Bottom, Down.<br />
      <span lang="ru">Где</span><span lang="en">Where</span>
      Top = Up, Bottom = Down.
    </p>
    <p lang="ru">Важно соблюдать регистр.</p>
    <p lang="en">It is important to respect the case of the characters.</p>
    <table>
      <tr>
        <th><span lang="ru">Параметр</span><span lang="en">Parameter</span></th>
        <th><span lang="ru">Описание</span><span lang="en">Description</span></th>
        <th><span lang="ru">Пример описания</span><span lang="en">Example description</span></th>
        <th><span lang="ru">Результат</span><span lang="en">Result</span></th>
      </tr>
      <tr>
        <td><code>L</code></td>
        <td><span lang="ru">Две точки слева</span><span lang="en">Two dots on the left</span></td>
        <td><code>$dots(L)H</code></td>
        <td><div class="echem-formula">$dots(L)H</div></td>
      </tr>
      <tr>
        <td><code>R</code></td>
        <td><span lang="ru">Две точки справа</span><span lang="en">Two dots on the right</span></td>
        <td><code>$dots(R)H</code></td>
        <td><div class="echem-formula">$dots(R)H</div></td>
      </tr>
      <tr>
        <td><code>U</code> или <code>T</code></td>
        <td><span lang="ru">Две точки сверху</span><span lang="en">Two dots on the top</span></td>
        <td><code>$dots(U)N-$dots(T)N</code></td>
        <td><div class="echem-formula">$dots(U)N-$dots(T)N</div></td>
      </tr>
      <tr>
        <td><code>B</code> <span lang="ru">или</span><span lang="en">or</span> <code>D</code></td>
        <td><span lang="ru">Две точки снизу</span><span lang="en">Two dots on the bottom</span></td>
        <td><code>$dots(B)N-$dots(D)N</code></td>
        <td><div class="echem-formula">$dots(B)N-$dots(D)N</div></td>
      </tr>
      <tr>
        <td><code>Lt</code> <span lang="ru">или</span><span lang="en">or</span> <code>Lu</code></td>
        <td><span lang="ru">Точка слева сверху</span><span lang="en">Dot on the left top</span></td>
        <td><code>$dots(Lt)H $dots(Lu)H</code></td>
        <td><div class="echem-formula">$dots(Lt)H $dots(Lu)H</div></td>
      </tr>
      <tr>
        <td><code>Lb</code> <span lang="ru">или</span><span lang="en">or</span> <code>Ld</code></td>
        <td><span lang="ru">Точка слева снизу</span><span lang="en">Dot on the left bottom</span></td>
        <td><code>$dots(Lb)H $dots(Ld)H</code></td>
        <td><div class="echem-formula">$dots(Lb)H $dots(Ld)H</div></td>
      </tr>
      <tr>
        <td><code>Rt</code> <span lang="ru">или</span><span lang="en">or</span> <code>Ru</code></td>
        <td><span lang="ru">Точка справа сверху</span><span lang="en">Dot on the right top</span></td>
        <td><code>$dots(Rt)H $dots(Ru)H</code></td>
        <td><div class="echem-formula">$dots(Rt)H $dots(Ru)H</div></td>
      </tr>
      <tr>
        <td><code>Rb</code> <span lang="ru">или</span><span lang="en">or</span> <code>Rd</code></td>
        <td><span lang="ru">Точка справа снизу</span><span lang="en">Dot on the right bottom</span></td>
        <td><code>$dots(Rb)H $dots(Rd)H</code></td>
        <td><div class="echem-formula">$dots(Rb)H $dots(Rd)H</div></td>
      </tr>

      <tr>
        <td><code>Tl</code> <span lang="ru">или</span><span lang="en">or</span> <code>Ul</code></td>
        <td><span lang="ru">Точка сверху слева</span><span lang="en">Dot on the top left</span></td>
        <td><code>$dots(Tl)H $dots(Ul)H</code></td>
        <td><div class="echem-formula">$dots(Tl)H $dots(Tl)H</div></td>
      </tr>
      <tr>
        <td><code>Tr</code> <span lang="ru">или</span><span lang="en">or</span> <code>Ur</code></td>
        <td><span lang="ru">Точка сверху справа</span><span lang="en">Dot on the top right</span></td>
        <td><code>$dots(Tr)H $dots(Ur)H</code></td>
        <td><div class="echem-formula">$dots(Tr)H $dots(Ur)H</div></td>
      </tr>
      <tr>
        <td><code>Bl</code> <span lang="ru">или</span><span lang="en">or</span> <code>Dl</code></td>
        <td><span lang="ru">Точка снизу слева</span><span lang="en">Dot on the bottom left</span></td>
        <td><code>$dots(Bl)H $dots(Dl)H</code></td>
        <td><div class="echem-formula">$dots(Bl)H $dots(Dl)H</div></td>
      </tr>
      <tr>
        <td><code>Br</code> <span lang="ru">или</span><span lang="en">or</span> <code>Dr</code></td>
        <td><span lang="ru">Точка снизу справа</span><span lang="en">Dot on the bottom right</span></td>
        <td><code>$dots(Br)H $dots(Dr)H</code></td>
        <td><div class="echem-formula">$dots(Br)H $dots(Dr)H</div></td>
      </tr>
      <tr>
        <td><code>!</code></td>
        <td>
          <span lang="ru">Меняет значения буквенных параметров на обратные.<br />Если параметров нет, то 8 точек.</span>
          <span lang="en">Changes the values ​​of letter parameters to the opposite.<br />If there are no parameters, then 8 dots.</span>
        </td>
        <td><code>$dots(!L)O $dots(!)He</code></td>
        <td><div class="echem-formula">$dots(!L)O $dots(!)He</div></td>
      </tr>
      <tr>
        <td><code>color:</code> <span lang="ru">или</span><span lang="en">or</span> <code>c:</code></td>
        <td>
          <span lang="ru"><a href="?p=ref-color">Цвет</a> следующих точек</span>
          <span lang="en"><a href="?p=ref-color">Color</a> of the following points</span>
        </td>
        <td><code>$dots(color:red,U,c:blue,D)O</code></td>
        <td><div class="echem-formula">$dots(color:red,U,c:blue,D)O</div></td>
      </tr>
      <tr>
        <td><code>margin:</code> <span lang="ru">или</span><span lang="en">or</span> <code>m:</code></td>
        <td>
          <span lang="ru">
            <a href="?p=ref-number">Числовое значение</a> отступа.<br />
            Действует на следующие за ним параметры. 1 соответствует стандартной длине связи.
          </span>
          <span lang="en">
            <a href="?p=ref-number">Numeric value</a> of the indent.<br />
            Affects the parameters that follow it. 1 corresponds to the standard bond length.            
          </span>
        </td>
        <td><code>$dots(m:0.1,!)Ar</code></td>
        <td><div class="echem-formula">$dots(m:0.1,!)Ar</div></td>
      </tr>
      <tr>
        <td><code><i lang="ru">число</i><i lang="en">number</i></code></td>
        <td>
          <span lang="ru">Угол в градусах относительно оси X по часовой стрелке.</span>
          <span lang="en">Angle in degrees relative to the X-axis clockwise.</span>
        </td>
        <td><code>$dots(0,90,-90,180)C</code></td>
        <td><div class="echem-formula">$dots(0,90,-90,180)C</div></td>
      </tr>
    </table>
    <p lang="ru">Буквенные обозначения можно совмещать даже без запятых</p>
    <p lang="en">Letter designations can be combined even without commas.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">$dots(UD)O</code>
      <div class="echem-formula">$dots(UD)O</div>
      <code class="chem-code">$dots(LbDl)O</code>
      <div class="echem-formula">$dots(LbDl)O</div>
    </div>
  </page>

  <page id="ref-func-itemColor" data-owner="ref-func">
    <h1>
      <span lang="ru">Цвет элементов узла</span>
      <span lang="en">Color of node items</span>
    </h1>
    <p lang="ru">Относится к <a href="?p=rules-color">цветовым функциям</a>.</p>
    <p lang="en">It refers to <a href="?p=rules-color">color functions</a>.</p>
    <p>
      <span lang="ru">Синтаксис</span><span lang="en">Syntax</span>: 
      <code>$itemColor(<i>colorDef</i>)</code>
    </p>
    <p><i>colorDef</i> - <a href="?p=ref-color"><span lang="ru">описание цвета</span><span lang="en">color description</span></a>.</p>
    <p lang="ru">Область действия: до конца формулы, либо до следующего $itemColor.</p>
    <p lang="en">Scope: until the end of the formula, or until the next $itemColor.</p>
    <p lang="ru">
      Действует только на <a data-ref="node-item">элементы узла</a>: атомы, радикалы, абстрактные элементы и комментарии.
      В том числе на их коэффициенты, степени окисления, точки, атомную массу, атомный номер.
    </p>
    <p lang="en">
      Affects only <a data-ref="node-item">node items</a>: atoms, radicals, abstract elements and comments.
      Including their coefficients, oxidation states, points, atomic mass, atomic number.      
    </p>
    <p lang="ru">Не действует на заряд узла, скобки, химические связи, операции.</p>
    <p lang="en">Does not affect the charge of the node, brackets, chemical bonds, operations.</p>
    <p lang="ru">Имеет больший приоритет, чем функция <a href="?p=ref-func-color">$color()</a>.</p>
    <p lang="en">Has higher priority than the <a href="?p=ref-func-color">$color()</a> function.</p>
    <div class="two-col-table">
      <code class="chem-code">$color(red)$itemColor(blue)3$nM(2)H2 + O(+2) O^2- $dots(!)O {R}-"test" (Ca,Mg)3[PO4]2</code>
      <div class="echem-formula">$color(red)$itemColor(blue)3$nM(2)H2 + O(+2) O^2- $dots(!)O {R}-"test" (Ca,Mg)3[PO4]2</div>
    </div>
  </page>

  <page id="ref-func-itemColor1" data-owner="ref-func">
    <h1>
      <span lang="ru">Цвет следующего элемента узла</span>
      <span lang="en">The color of the next node item</span>
    </h1>
    <p lang="ru">Относится к <a href="?p=rules-color">цветовым функциям</a>.</p>
    <p lang="en">It refers to <a href="?p=rules-color">color functions</a>.</p>
    <p lang="ru">
      Аналог функции <a href="?p=ref-func-itemColor">itemColor</a>, но действует только на следующий 
      <a data-ref="node-item">элемент узла</a>.
    </p>
    <p lang="en">
      Analogous to the <a href="?p=ref-func-itemColor">itemColor</a> function, 
      but only affects the next <a data-ref="node-item">node item</a>.
    </p>
    <p>
      <span lang="ru">Синтаксис</span><span lang="en">Syntax</span>: 
      <code>$itemColor1(<i>color</i>)</code>
    </p>
    <p><i>color</i> - <a href="?p=ref-color"><span lang="ru">описание цвета</span><span lang="en">color description</span></a>.</p>
    <p lang="ru">Область действия: следующий за функцией <a data-ref="node-item">элемент узла</a>.</p>
    <p lang="en">Scope: The <a data-ref="node-item">node item</a> following the function.</p>
    <p lang="ru">Имеет больший приоритет, чем $itemColor().</p>
    <p lang="en">Has higher priority than $itemColor().</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">CH3-$itemColor(blue)C$itemColor1(red)O2H</code>
      <div class="echem-formula">CH3-$itemColor(blue)C$itemColor1(red)O2H</div>
      <code class="chem-code">$itemColor1(brown)Fe(+3)2(S$itemColor1(red)O4)3</code>
      <div class="echem-formula">$itemColor1(brown)Fe(+3)2(S$itemColor1(red)O4)3</div>
    </div>
  </page>

  <page id="ref-func-L" data-owner="ref-func">
    <h1>
      <span lang="ru">Длина связей</span>
      <span lang="en">Length of chemical bonds</span>
    </h1>
    <p>
      <span lang="ru">Синтаксис</span><span lang="en">Syntax</span>: 
      <code>$L(<i lang="ru">длина</i><i lang="en">length</i>)</code>
    </p>
    <p lang="ru"><i>длина</i> - <a href="?p=ref-number">числовое значение</a> длины связи. Либо пустой параметр, чтобы восстановить дефолтное значение.</p>
    <p lang="en"><i>length</i> - <a href="?p=ref-number">numeric value</a> of the bond length. Or an empty parameter to restore the default value.</p>
    <p lang="ru">По-умолчанию длина связи равна 1.</p>
    <p lang="en">By default, the bond length is 1.</p>
    <p lang="ru">Область действия: до конца формулы, либо до следующего $L.</p>
    <p lang="en">Scope: until the end of the formula, or until the next $L.</p>
    <p lang="ru">
      Действует на <a data-ref="bond-short">краткие связи</a> и на 
      <a data-ref="uni">универсальные связи</a> с параметрами <code>A</code> или <code>a</code>, но без <code>L</code>.
    </p>
    <p lang="en">
      Affects <a data-ref="bond-short">short bonds</a> and
      <a data-ref="uni">universal bonds</a> with parameters <code>A</code> or <code>a</code>, but without <code>L</code>.      
    </p>
    <p lang="ru">Не действует на <a data-ref="poly">полигональные связи</a>, т.к. их длина копируется из предыдущей связи.</p>
    <p lang="en">Does not affect <a data-ref="poly">polygonal bonds</a>, since their length is copied from the previous bond.</p>
    <p lang="ru">Примеры</p>
    <p lang="en">Examples</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">\$L(2)/_(A30)$L()/</code>
      <div class="echem-formula">\$L(2)/_(A30)$L()/</div>
      <code class="chem-code">$L(2)|$L(4)-$L(2)`|$L()`-|$L(2)`-$L()`|`-</code>
      <div class="echem-formula">$L(2)|$L(4)-$L(2)`|$L()`-|$L(2)`-$L()`|`-</div>
    </div>
  </page>
  <page id="ref-func-M" data-owner="ref-func">
    <h1>
      <span lang="ru">Атомная масса изотопа</span>
      <span lang="en">Atomic mass of isotope</span>
    </h1>
    <p lang="ru">Синтаксис: <code>$M(<i>масса</i>)</code></p>
    <p lang="en">Syntax: <code>$M(<i>mass</i>)</code></p>
    <p lang="ru"><i>масса</i> - Целое число, соответствующее атомной массе изотопа</p>
    <p lang="en"><i>mass</i> - An integer corresponding to the atomic mass of an isotope</p>
    <p lang="ru">Область действия: следующий атом.</p>
    <p lang="en">Scope: next atom.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">$M(235)U</code>
      <div class="echem-formula">$M(235)U</div>
      <code class="chem-code">O=$M(99)Tc&lt;`||O&gt;&lt;||O&gt;-O^-</code>
      <div class="echem-formula">O=$M(99)Tc&lt;`||O&gt;&lt;||O&gt;-O^-</div>
    </div>
  </page>
  <page id="ref-func-nM" data-owner="ref-func">
    <h1>
      <span lang="ru">Атомный номер и масса изотопа</span>
      <span lang="en">Atomic number and mass of the isotope</span>
    </h1>
    <p lang="ru">Масса выводится слева сверху, а номер - слева снизу. Такое представление известно как 
      <a href="https://en.wikipedia.org/wiki/AZE_notation" target="_blank">AZE-нотация</a>
    </p>
    <p lang="en">
      The mass is displayed at the top left and the number at the bottom left. This representation is known as 
      <a href="https://en.wikipedia.org/wiki/AZE_notation" target="_blank">AZE notation</a>.
    </p>
    <p lang="ru">Минимальная версия CharChem: 1.0</p>
    <p lang="en">Minimum version of CharChem: 1.0</p>
    <p lang="ru">Синтаксис: <code>$nM(<i>масса</i>[,<i>номер</i>])</code></p>
    <p lang="en">Syntax: <code>$nM(<i>mass</i>[,<i>number</i>])</code></p>
    <p lang="ru"><i>масса</i> - Целое число, соответствующее атомной массе изотопа</p>
    <p lang="en"><i>mass</i> - An integer corresponding to the atomic mass of an isotope</p>
    <p lang="ru"><i>номер</i> - для атомов этот параметр использовать не рекомендуется, т.к. он определяется автоматически. 
      Но если используются <a data-ref="abs-item">абстрактные элементы</a>, то для них номер нужен.</p>
    <p lang="en">
      <i>number</i> - it is not recommended to use this parameter for atoms, since it is determined automatically.
      But if <a data-ref="abs-item">abstract items</a> are used, then a number is needed for them.
    </p>
    <p lang="ru">Область действия: следующий <a data-ref="node-item">элемент узла</a>.</p>
    <p lang="en">Scope: next <a data-ref="node-item">node item</a>.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">$nM(26)Al + $nM(1,0){n} -> $nM(27)Al"*"</code>
      <div class="echem-formula">$nM(26)Al + $nM(1,0){n} -> $nM(27)Al"*"</div>
    </div>
  </page>
  <page id="ref-func-padding" data-owner="ref-func">
    <h1>
      <span lang="ru">Отступы внутри скобок</span>
      <span lang="en">Indentation inside brackets</span>
    </h1>
    <p lang="ru">Синтаксис: <code>$padding(<i>параметры</i>)</code></p>
    <p lang="en">Syntax: <code>$padding(<i>parameters</i>)</code></p>
    <p lang="ru">Область действия: следующая открывающаяся скобка.</p>
    <p lang="en">Scope: next opening parenthesis.</p>
    <p lang="ru">
      Функция влияет только на внешний вид формулы в графическом представлении. 
      Не влияет на функциональность описания и на текстовое представление.
    </p>
    <p lang="en">
      The function only affects the appearance of the formula in the graphical representation.
      Does not affect the functionality of the description and the text representation.      
    </p>
    <p lang="ru">Наличие данной функции делает формулу не текстовой.</p>
    <p lang="en">The presence of this function makes the formula non-textual.</p>
    <p>
      <span lang="ru">Принцип работы заимствован из</span>
      <span lang="en">The principle of operation is borrowed from</span>
      <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/padding" target="_blank">CSS padding</a>.
    </p>
    <p lang="ru">
      <i>параметры</i> - от одного до четырёх <a href="?p=ref-number">числовых значений</a>, 
      означающих расстояние в <a href="?p=rules-coords">системе координат</a>. 
      То есть, 1 соответствует стандартной длине связи.<br />
      Параметры перечисляются через запятую, без пробелов.
    </p>
    <p lang="en">
      <i>parameters</i> - from one to four <a href="?p=ref-number">numeric values</a>,
      meaning the distance in the <a href="?p=rules-coords">coordinate system</a>.
      That is, 1 corresponds to the standard length of a chemical bond.<br />
      Parameters are listed separated by commas, without spaces.      
    </p>
    <table>
      <tr>
        <th><span lang="ru">Количество</span><span lang="en">Quantity</span></th>
        <th><span lang="ru">Описание</span><span lang="en">Description</span></th>
        <th><span lang="ru">Пример</span><span lang="en">Example</span></th>
        <th><span lang="ru">Результат</span><span lang="en">Result</span></th>
      </tr>
      <tr>
        <td><span lang="ru">Одно число</span><span lang="en">One number</span></td>
        <td><span lang="ru">Отступ со всех сторон</span><span lang="en">Indentation on all sides</span></td>
        <td><code class="chem-code">$padding(1)[C] $padding(0.1)[N]</code></td>
        <td><div class="echem-formula">$padding(1)[C] $padding(0.1)[N]</div></td>
      </tr>
      <tr>
        <td><span lang="ru">Два числа</span><span lang="en">Two numbers</span></td>
        <td>
          <ol>
            <li>
              <span lang="ru">Вертикальный отступ (сверху и снизу).</span>
              <span lang="en">Vertical indentation (top and bottom).</span>
            </li>
            <li>
              <span lang="ru">Горизонтальный отступ (слева и справа).</span>
              <span lang="en">Horizontal indentation (left and right).</span>
            </li>
          </ol>
        </td>
        <td><code class="chem-code">$padding(0.1,1)[C] $padding(1,0.1)[N]</code></td>
        <td><div class="echem-formula">$padding(0.1,1)[C] $padding(1,0.1)[N]</div></td>
      </tr>
      <tr>
        <td><span lang="ru">Три числа</span><span lang="en">Three numbers</span></td>
        <td>
          <ol>
            <li><span lang="ru">Отступ сверху.</span><span lang="en">Indentation from top.</span></li>
            <li>
              <span lang="ru">Горизонтальный отступ (слева и справа).</span>
              <span lang="en">Horizontal indentation (left and right).</span>
            </li>
            <li>
              <span lang="ru">Отступ снизу.</span>
              <span lang="en">Indentation from bottom.</span>
            </li>
          </ol>
        </td>
        <td><code class="chem-code">$padding(0.1,0.5,1)[C]</code></td>
        <td><div class="echem-formula">$padding(0.1,0.5,1)[C]</div></td>
      </tr>
      <tr>
        <td><span lang="ru">Четыре числа</span><span lang="en">Four numbers</span></td>
        <td>
          <ol>
            <li><span lang="ru">Отступ сверху.</span><span lang="en">Indentation from top.</span></li>
            <li><span lang="ru">Отступ справа.</span><span lang="en">Indentation from right.</span></li>
            <li><span lang="ru">Отступ снизу.</span><span lang="en">Indentation from bottom.</span></li>
            <li><span lang="ru">Отступ слева.</span><span lang="en">Indentation from left</span></li>
          </ol>
        </td>
        <td><code class="chem-code">$padding(0.1,0.5,1,1.5)[C]</code></td>
        <td><div class="echem-formula">$padding(0.1,0.5,1,1.5)[C]</div></td>
      </tr>
    </table>
  </page>

  <page id="ref-func-pos" data-owner="ref-func">
    <h1>
      <span lang="ru">Положение заряда узла</span>
      <span lang="en">Node charge position</span>
    </h1>
    <p>
      <span lang="ru">Синтаксис</span><span lang="en">Syntax</span>: 
      <code>$pos(<i lang="ru">положение</i><i lang="en">position</i>)</code>
    </p>
    <p lang="ru">Область действия: следующий заряд узла.</p>
    <p lang="en">Scope: Next node charge.</p>
    <p lang="ru"><i>положение</i> &mdash; указывается одним из следующих способов:</p>
    <p lang="en"><i>position</i> is indicated in one of the following ways:</p>
    <table>
      <tr>
        <th><span lang="ru">Параметр</span><span lang="en">Parameter</span></th>
        <th><span lang="ru">Описание</span><span lang="en">Description</span></th>
        <th><span lang="ru">Пример</span><span lang="en">Example</span></th>
        <th><span lang="ru">Результат</span><span lang="en">Result</span></th>
      </tr>
      <tr>
        <td><code>LT</code></td>
        <td><span lang="ru">Слева сверху</span><span lang="en">Left top</span></td>
        <td><code class="chem-code">`|$pos(LT)H^+</code></td>
        <td><div class="echem-formula">`|$pos(LT)H^+</dev></td>
      </tr>
      <tr>
        <td><code>RT</code></td>
        <td><span lang="ru">Справа сверху</span><span lang="en">Right top</span></td>
        <td><code class="chem-code">`|$pos(RT)H^+</code></td>
        <td><div class="echem-formula">`|$pos(RT)H^+</dev></td>
      </tr>
      <tr>
        <td><code>LB</code></td>
        <td><span lang="ru">Слева снизу</span><span lang="en">Left bottom</span></td>
        <td><code class="chem-code">|$pos(LB)H^+</code></td>
        <td><div class="echem-formula">|$pos(LB)H^+</dev></td>
      </tr>
      <tr>
        <td><code>RB</code></td>
        <td>Справа снизу</td>
        <td><code class="chem-code">|$pos(RB)H^+</code></td>
        <td><div class="echem-formula">|$pos(RB)H^+</dev></td>
      </tr>
      <tr>
        <td><code>CU</code></td>
        <td><span lang="ru">Сверху в центре</span><span lang="en">Top center</span></td>
        <td><code class="chem-code">`|$pos(CU)H^+</code></td>
        <td><div class="echem-formula">`|$pos(CU)H^+</dev></td>
      </tr>
      <tr>
        <td><code>CD</code></td>
        <td><span lang="ru">Снизу в центре</span><span lang="en">Bottom center</span></td>
        <td><code class="chem-code">|$pos(CD)H^+</code></td>
        <td><div class="echem-formula">|$pos(CD)H^+</dev></td>
      </tr>
      <tr>
        <td><i lang="ru">число</i><i lang="en">number</i></td>
        <td>
          <span lang="ru">Числовое значение угла</span>
          <span lang="en">Numerical value of the angle</span>
        </td>
        <td><code class="chem-code">_(x1)$pos(0)H^+</code></td>
        <td><div class="echem-formula">_(x1)$pos(0)H^+</dev></td>
      </tr>
    </table>
  </page>
  <page id="ref-func-slope" data-owner="ref-func">
    <h1>
      <span lang="ru">Угол наклона для кратких химических связей</span>
      <span lang="en">Slope angle for short chemical bonds</span>
    </h1>
    <p lang="ru">Синтаксис: <code>$slope(<i>угол</i>)</code></p>
    <p lang="en">Syntax: <code>$slope(<i>angle</i>)</code></p>
    <p lang="ru">Область действия: до конца формулы или до следующего <code>$slope</code>.</p>
    <p lang="en">Scope: until the end of the formula or until the next <code>$slope</code>.</p>
    <p lang="ru">Значение угла указывается в диапазоне от 0 до 90.</p>
    <p lang="en">The angle value is specified in the range from 0 to 90.</p>
    <p lang="ru">Указанный угол соответствует наклонным <a href="?p=rules-bonds-short">связям</a>, которые определяются символом <code>\</code></p>
    <p lang="en">The angle indicated corresponds to inclined <a href="?p=rules-bonds-short">bonds</a>, which are defined by the symbol <code>\</code></p>
    <p lang="ru">Для остальных наклонных связей углы вычисляются автоматически.</p>
    <p lang="en">For other inclined bonds, the angles are calculated automatically.</p>
    <p lang="ru">Чаще всего используются значения: 30, 45 и 60</p>
    <p lang="en">The most commonly used values ​​are: 30, 45 and 60</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">$slope(30)\/`\`/</code>
      <div class="echem-formula">$slope(30)\/`\`/</div>
      <code class="chem-code">$slope(45)\/`\`/</code>
      <div class="echem-formula">$slope(45)\/`\`/</div>
      <code class="chem-code">$slope(60)\/`\`/</code>
      <div class="echem-formula">$slope(60)\/`\`/</div>
    </div>
    <p>
      По-умолчанию для вертикальных <a href="?p=rules-hex">шестиугольников</a> используется угол наклона 30°, а для горизонтальных &mdash; 60°.
      Если использовать $slope с каким-либо <a href="?p=ref-number">числовым параметром</a>, то автоматическое определение шестиугольников отключается.
    </p>
    <p lang="en">
      By default, <a href="?p=rules-hex">vertical hexagons</a> use a slope angle of 30°, and horizontal hexagons use a slope angle of 60°. 
      Using $slope with any <a href="?p=ref-number">numeric parameter</a> disables automatic hexagon detection.
    </p>
    <p lang="ru">А чтобы восстановить поведение по-умолчанию, нужно использовать функцию без параметров: <code>$slope()</code>.</p>
    <p lang="en">And to restore the default behavior, you need to use a function without parameters: <code>$slope()</code>.</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">/\$slope(15)/\$slope(40)/\$slope(70)/\$slope()/\</code>
      <div class="echem-formula">/\$slope(15)/\$slope(40)/\$slope(70)/\$slope()/\</div>
    </div>
    <p lang="ru">Следующий пример демонстрирует разницу между определением наклона по-умолчанию и с использованием <code>$slope</code>:</p>
    <p lang="en">The following example demonstrates the difference between specifying the default slope and using <code>$slope</code>:</p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">\|`/ = /-\</code>
      <div class="echem-formula">\|`/ = /-\</div>
      <code class="chem-code">$slope(30)\|`/ = /-\</code>
      <div class="echem-formula">$slope(30)\|`/ = /-\</div>
      <code class="chem-code">$slope(60)\|`/ = /-\</code>
      <div class="echem-formula">$slope(60)\|`/ = /-\</div>
    </div>
  </page>
  <page id="ref-func-ver" data-owner="ref-func">
    <h1>
      <span lang="ru">Версия CharChem</span>
      <span lang="en">CharChem version</span>
    </h1>
    <p lang="ru">Данная функция нужна для контроля совместимости формул с испольуемой программной библиотекой.</p>
    <p lang="en">This function is needed to control the compatibility of formulas with the software library used.</p>
    <p lang="ru">У этой функции нет области действия. Но рекомендуется помещать её в самое начало формулы.</p>
    <p lang="en">This function has no scope. However, it is recommended to place it at the very beginning of the formula.</p>
    <p lang="ru">Синтаксис: <code>$ver(<i>версия</i>)</code></p>
    <p lang="en">Syntax: <code>$ver(<i>version</i>)</code></p>
    <p lang="ru"><i>версия</i> = <i>major</i>.<i>minor</i> или <i>major</i>,<i>minor</i> или только <i>major</i></p>
    <p lang="en"><i>version</i> = <i>major</i>.<i>minor</i> or <i>major</i>,<i>minor</i> or only <i>major</i></p>
    <p>
      <span lang="ru">В данном документе используется библиотека CharChem версии </span>
      <span lang="en">This document uses CharChem library version </span>
      <span id="charChemVer">_</span>.
      <span lang="ru">Это значит что </span>
      <span lang="en">This means that </span>
      <i>major</i> = <span id="verMajor"></span>
      <span lang="ru">, а </span>
      <span lang="en"> and </span>
      <i>minor</i> = <span id="verMinor"></span>.
      <span lang="ru">Третье число называется <i>patch</i> и оно не проверяется.</span>
      <span lang="en">The third number is called <i>patch</i> and it is not checked.</span>
    </p>
    <script>
      window.addEventListener("load", function() {
        try {
          document.getElementById("charChemVer").innerText = ChemSys.verStr;
          document.getElementById("verMajor").innerText = ChemSys.ver[0];
          document.getElementById("verMinor").innerText = ChemSys.ver[1];
        } catch (e) {console.error(e)}
      });
    </script>
    <p lang="ru">Некоторые возможности формул CharChem появились не сразу, а начиная с каких-то версий.
      В функции <code>$ver</code> нужно указывать самое большое значение.
      И если эту формулу попытаться вывести в системе, где используется более ранняя версия библиотеки, то формула показываться не будет.
      Но это лучше, чем если они бы возникли ошибки при обработке тех синтаксических конструкций, которые не поддерживаются библиотекой.
    </p>
    <p lang="en">
      Some features of CharChem formulas appeared not immediately, but starting with some versions.
      In the function <code>$ver</code> you need to specify the largest value.
      And if you try to display this formula in a system that uses an earlier version of the library, the formula will not be shown.
      But this is better than if errors occurred when processing those syntactic structures that are not supported by the library.
    </p>
    <div class="two-col-table inline-grid">
      <code class="chem-code">$ver(1.0)H2O</code>
      <div class="echem-formula">$ver(1.0)H2O</div>
      <code class="chem-code">$ver(1,0)H2O</code>
      <div class="echem-formula">$ver(1,0)H2O</div>
      <code class="chem-code">$ver(1)H2O</code>
      <div class="echem-formula">$ver(1)H2O</div>
      <code class="chem-code">$ver(1000)H2O</code>
      <div class="echem-formula">$ver(1000)H2O</div>
    </div>
    <p lang="ru">
      Если Вы уверены, что Ваши формулы будут использованы только в таких обстоятелствах, когда для их обработки будет использована соответствующая версия библиотеки,
      тогда использование функции <code>$ver</code> не требуется.
    </p>
    <p lang="en">
      If you are confident that your formulas will only be used in circumstances where the appropriate version of the library will be used to process them, 
      then using the <code>$ver</code> function is not required.
    </p>
  </page>

  <page id="ref-ops" data-owner="ref">
    <h1>
      <span lang="ru">Химические операции</span>
      <span lang="en">Chemical operations</span>
    </h1>
    <p lang="ru">Также см. описание <a href="?p=rules-ops">химических операций</a>.</p>
    <p lang="en">See also the description of <a href="?p=rules-ops">chemical operations</a>.</p>
    <table id="chem-ops-table">
      <tr>
        <th><span lang="ru">Код</span><span lang="en">Code</span></th>
        <th><span lang="ru">Текст</span><span lang="en">Text</span></th>
        <th>SVG</th>
      </tr>
    </table>
    <script>
      window.addEventListener("load", function() {
        var tbl = document.getElementById("chem-ops-table");
        ["+", "-->", "--|>", "->", "®", "→", "=", "↔", "<->", "<=>", "<==>", "!="].forEach(function(op) {
          var tr = createElem("tr", tbl);
          var cmd = '"comment"'+op;
          createElem("code", createElem("td", tr), {text: op});
          var d = createElem("div", createElem("td", tr), {cls: "echem-formula"});
          ChemSys.draw(d, cmd);
          var d = createElem("div", createElem("td", tr), {cls: "echem-formula"});
          ChemSys.draw(d, cmd, {nonText:true});
        })
      })
    </script>
  </page>

  <page id="ref-suffix" data-owner="ref">
    <h1>
      <span lang="ru">Суффиксы химических связей</span>
      <span lang="en">Chemical bond suffixes</span>
    </h1>
    <p lang="ru">Суффиксы могут быть использованы для модификации <a data-ref="bond-short">кратких</a> 
      и <a href="?p=rules-poly">полигональных связей</a>.
      Суффикс ставится сразу после описания связи.
    </p>
    <p lang="en">
      Suffixes can be used to modify <a data-ref="bond-short">short</a> and <a href="?p=rules-poly">polygonal</a> bonds. 
      The suffix is placed immediately after the description of the bond.
    </p>
    <p lang="ru">
      Также см. <a href="?p=rules-suffixes">описание суффиксов</a>.
    </p>
    <p lang="en">
      See also <a href="?p=rules-suffixes">description of suffixes</a>.
    </p>
    <table class="center-not2">
      <tr>
        <th><span lang="ru">Суффикс</span><span lang="en">Suffix</span></th>
        <th><span lang="ru">Описание</span><span lang="en">Description</span></th>
        <th colspan="2"><span lang="ru">Пример для кратких</span><span lang="en">Example for short</span></th>
        <th colspan="2"><span lang="ru">Пример для полигональных</span><span lang="en">Example for polygonal</span></th>
      </tr>
      <tr>
        <td><code>0</code><br /><span lang="ru">ноль</span><span lang="en">zero</span></td>
        <td>
          <span lang="ru">Прозрачная связь. Но только для кратких связей.</span>
          <span lang="en">Transparent bond. But only for short bonds.</span>
        </td>
        <td><code class="chem-code">\-0/</code></td>
        <td><div class="echem-formula">\-0/</div></td>
        <td colspan="2"><span lang="ru">нет</span><span lang="en">none</span></td>
      </tr>
      <tr>
        <td><code>o</code><br />(<span lang="ru">маленькая буква о</span><span lang="en">small letter o</span>)</td>
        <td>
          <span lang="ru">Тоже прозрачная связь, но для обоих типов.</span>
          <span lang="en">Also transparent bond, but for both types.</span>
        </td>
        <td><code class="chem-code">\-o/</code></td>
        <td><div class="echem-formula">\-0/</div></td>
        <td><code class="chem-code">-_po_p</code></td>
        <td><div class="echem-formula">-_po_p</div></td>
      </tr>
      <tr>
        <td><code>h</code></td>
        <td><span lang="ru">Водородная связь</span><span lang="en">Hydrogen bond</span></td>
        <td><code class="chem-code">-\h</code></td>
        <td><div class="echem-formula">-\h</div></td>
        <td><code class="chem-code">-_ph</code></td>
        <td><div class="echem-formula">-_ph</div></td>
      </tr>
      <tr>
        <td><code>w</code></td>
        <td>
          <span lang="ru">Исходящая клиновидная (из плоскости к наблюдателю)</span>
          <span lang="en">Outgoing wedge-shaped bond (from the plane to the observer)</span>
        </td>
        <td><code class="chem-code">-\w</code></td>
        <td><div class="echem-formula">-\w</div></td>
        <td><code class="chem-code">-_pw</code></td>
        <td><div class="echem-formula">-_pw</div></td>
      </tr>
      <tr>
        <td><code>ww</code></td>
        <td>
          <span lang="ru">Входящая клиновидная (от наблюдателя в плоскость)</span>
          <span lang="en">Incoming wedge-shaped bond (from the observer to the plane)</span>
        </td>
        <td><code class="chem-code">-\ww</code></td>
        <td><div class="echem-formula">-\ww</div></td>
        <td><code class="chem-code">-_pww</code></td>
        <td><div class="echem-formula">-_pww</div></td>
      </tr>
      <tr>
        <td><code>d</code></td>
        <td>
          <span lang="ru">Исходящая пунктирная клиновидная (из плоскости от наблюдателя)</span>
          <span lang="en">Outgoing dashed wedge-shaped bond (from the plane away from the observer)</span>
        </td>
        <td><code class="chem-code">-\d</code></td>
        <td><div class="echem-formula">-\d</div></td>
        <td><code class="chem-code">-_pd</code></td>
        <td><div class="echem-formula">-_pd</div></td>
      </tr>
      <tr>
        <td><code>dd</code></td>
        <td>
          <span lang="ru">Входящая пунктирная клиновидная (в плоскось с дальней стороны от наблюдателя)</span>
          <span lang="en">Incoming dashed wedge-shaped bond (into the plane on the far side from the observer)</span>
        </td>
        <td><code class="chem-code">-\dd</code></td>
        <td><div class="echem-formula">-\dd</div></td>
        <td><code class="chem-code">-_pdd</code></td>
        <td><div class="echem-formula">-_pdd</div></td>
      </tr>
      <tr>
        <td><code>x</code></td>
        <td>
          <span lang="ru">Перекрещенная связь (только для двойных)</span>
          <span lang="en">Crossed bond (for doubles only)</span>
        </td>
        <td><code class="chem-code">-\\x</code></td>
        <td><div class="echem-formula">-\\x</div></td>
        <td><code class="chem-code">-_ppx</code></td>
        <td><div class="echem-formula">-_ppx</div></td>
      </tr>
      <tr>
        <td><code>~</code><br />(<span lang="ru">тильда</span><span lang="en">tilde</span>)</td>
        <td>
          <span lang="ru">Волнистая связь (для рацемической смеси оптических изомеров)</span>
          <span lang="en">Wavy bond (for a racemic mixture of optical isomers)</span>
        </td>
        <td><code class="chem-code">-\~</code></td>
        <td><div class="echem-formula">-\~</div></td>
        <td><code class="chem-code">-_p~</code></td>
        <td><div class="echem-formula">-_p~</div></td>
      </tr>
      <tr>
        <td><code>r</code></td>
        <td>
          <span lang="ru">Выравнивание вправо (только для двойных)</span>
          <span lang="en">Right alignment (double only)</span>
        </td>
        <td><code class="chem-code">/=r\</code></td>
        <td><div class="echem-formula">/=r\</div></td>
        <td><code class="chem-code">-_ppr_p</code></td>
        <td><div class="echem-formula">-_ppr_p</div></td>
      </tr>
      <tr>
        <td><code>l</code><br />(<span lang="ru">маленькая</span><span lang="en">small</span> L)</td>
        <td>
          <span lang="ru">Выравнивание влево (только для двойных)</span>
          <span lang="en">Left alignment (double only)</span>
        </td>
        <td><code class="chem-code">/=l\</code></td>
        <td><div class="echem-formula">/=l\</div></td>
        <td><code class="chem-code">-_ppl_p</code></td>
        <td><div class="echem-formula">-_ppl_p</div></td>
      </tr>
      <tr>
        <td><code>m</code></td>
        <td>
          <span lang="ru">Выравнивание по центру (только для двойных)</span>
          <span lang="en">Middle alignment (double only)</span>
        </td>
        <td><code class="chem-code">/=m\</code></td>
        <td><div class="echem-formula">/=m\</div></td>
        <td><code class="chem-code">-_ppm_p</code></td>
        <td><div class="echem-formula">-_ppm_p</div></td>
      </tr>
      <tr>
        <td><code>v</code></td>
        <td>
          <span lang="ru">Стрелка в направлении связи</span>
          <span lang="en">Arrow in the direction of bond</span>
        </td>
        <td><code class="chem-code">-\v</code></td>
        <td><div class="echem-formula">-\v</div></td>
        <td><code class="chem-code">-_pv</code></td>
        <td><div class="echem-formula">-_pv</div></td>
      </tr>
      <tr>
        <td><code>vv</code></td>
        <td>
          <span lang="ru">Стрелка против направления связи</span>
          <span lang="en">Arrow against the direction of the bond</span>
        </td>
        <td><code class="chem-code">-\vv</code></td>
        <td><div class="echem-formula">-\vv</div></td>
        <td><code class="chem-code">-_pvv</code></td>
        <td><div class="echem-formula">-_pvv</div></td>
      </tr>
      <tr>
        <td><code>vvv</code></td>
        <td>
          <span lang="ru">Стрелка в оба направления</span>
          <span lang="en">Arrow in both directions</span>
        </td>
        <td><code class="chem-code">-\vvv</code></td>
        <td><div class="echem-formula">-\vvv</div></td>
        <td><code class="chem-code">-_pvvv</code></td>
        <td><div class="echem-formula">-_pvvv</div></td>
      </tr>
    </table>
  </page>

  <page id="ref-uni" data-owner="ref">
    <h1>
      <span lang="ru">Параметры универсальных связей</span>
      <span lang="en">Parameters of universal bonds</span>
    </h1>
    <p lang="ru">См. также <a href="?p=rules-uni">описание универсальных связей</a>.</p>
    <p lang="en">See also: <a href="?p=rules-uni">description of universal bonds</a>.</p>
    <p lang="ru">
      Несовместимыми являются параметры: 
      <code>p</code>, <code>P</code>, <code>a</code>, <code>A</code>. 
      (В порядке убывания приоритета.) 
      Но они сочетаются с <code>x</code> и <code>y</code>.
    </p>
    <p lang="en">
      The following parameters are incompatible:
      <code>p</code>, <code>P</code>, <code>a</code>, <code>A</code>.
      (In descending order of priority.)
      But they are compatible with <code>x</code> and <code>y</code>.      
    </p>
    <table class="center-not2">
      <tr>
        <th><span lang="ru">Параметр</span><span lang="en">Parameter</span></th>
        <th><span lang="ru">Описание</span><span lang="en">Description</span></th>
        <th colspan="2"><span lang="ru">Примеры</span><span lang="en">Examples</span></th>
      </tr>
      <tr>
        <td><code>A</code></td>
        <td>
          <div lang="ru">
            Абсолютное значение угла (т.е. относительно оси X). <a href="?p=ref-number">Числовое значение</a> в градусах. Примеры:
          </div>
          <div lang="en">
            The absolute value of the angle (i.e. relative to the X-axis). <a href="?p=ref-number">Numerical value</a> in degrees. Examples:            
          </div>
          <div class="echem-formula">{}@:d(a,b:0,d:.4)&lt;_(A&a,L1.5,&gt;){}_(a&b,N0,L&d)&quot;&a&quot;&gt;@(0)@d(45,10)@d(90,-10)@d(135,0,0.5)@d(180,0,0.7)@d(-45,-10)@d(-90)</div>
          <div lang="ru">
            Если длина связи не указана параметром <code>L</code>, то используется глобальное значение, 
            устанавливаемое функцией <a href="?p=ref-func-L">$L()</a>.
          </div>
          <div lang="en">
            If the bond length is not specified by the <code>L</code> parameter, 
            then the global value set by the <a href="?p=ref-func-L">$L()</a> function is used.            
          </div>
          <div>
            <a href="?p=rules-uni-abs"><span lang="ru">Подробнее...</span><span lang="en">Read more...</span></a>
          </div>
        </td>
        <td><code class="chem-code">_(A0)_(A45)_(A-90)</code></td>
        <td><div class="echem-formula">_(A0)_(A45)_(A-90)</div></td>
      </tr>
      <tr>
        <td><code>a</code></td>
        <td>
          <p lang="ru">
            Относительное значение угла. <a href="?p=ref-number">Числовое значение</a> в градусах.<br />
            Предполагается, что перед этой связью есть предыдущая, относительно которой указывается угол. 
            Иначе угол относительно оси X.
          </p>
          <p lang="en">
            Relative value of the angle. <a href="?p=ref-number">Numerical value</a> in degrees.<br />
            It is assumed that there is a previous chemical bond before this one, relative to which the angle is specified.
            Otherwise, the angle is relative to the X axis.            
          </p>
          <p lang="ru">Если длина связи не указана параметром <code>L</code>, то используется глобальное значение, устанавливаемое функцией <a href="?p=ref-func-L">$L()</a></p>
          <p lang="en">
            If the bond length is not specified by the <code>L</code> parameter, 
            then the global value set by the <a href="?p=ref-func-L">$L()</a> function is used.
          </p>
          <div>
            <a href="?p=rules-uni-rel"><span lang="ru">Подробнее...</span><span lang="en">Read more...</span></a>
          </div>
        </td>
        <td><code class="chem-code">\v_(a30)_(a-120)_(a-120)</code></td>
        <td><div class="echem-formula">\v_(a30)_(a-120)_(a-120)</div></td>
      </tr>
      <tr>
        <td><code>C</code></td>
        <td>
          <span lang="ru">Координационная связь. Ну или просто связь со стрелкой.<br />Есть три варианта: </span>
          <span lang="en">Coordination bond. Or simply a bond with an arrow.<br />There are three options:</span>
          <code>C</code>, <code>C-</code>, <code>C+</code>.
        </td>
        <td><code class="chem-code">_(A30,C) _(A30,C-) _(A30,C+)</code></td>
        <td><div class="echem-formula">_(A30,C) _(A30,C-) _(A30,C+)</div></td>
      </tr>
      <tr>
        <td><code>D</code></td>
        <td>
          <span lang="ru">
            Клиновидные пунктирные связи. Глобальный режим.<br />
            Есть два варианта: <code>D+</code> (включает режим) и <code>D-</code> (выключает).  
          </span>
          <span lang="en">
            Wedge-shaped dashed bonds. Global mode.<br />
            There are two options: <code>D+</code> (turns the mode on) and <code>D-</code> (turns it off).            
          </span>
          <div>
            <a href="?p=rules-uni-chiral"><span lang="ru">Подробнее...</span><span lang="en">Read more...</span></a>
          </div>
        </td>
        <td><code class="chem-code">_(A60,D+)_(A0)_(A-60,D-)_(A-120)</code></td>
        <td><div class="echem-formula">_(A60,D+)_(A0)_(A-60,D-)_(A-120)</div></td>
      </tr>
      <tr>
        <td><code>d</code></td>
        <td>
          <div lang="ru">
            Клиновидные пунктирные связи. Локально (т.е. только для текущей связи).<br />
            Варианты: <code>d+</code> (прямая), <code>d-</code> (обратная) и <code>d2</code> (равномерная).
          </div>
          <div lang="en">
            Wedge-shaped dashed bonds. Locally (i.e. only for the current bond).<br />
            Options: <code>d+</code> (direct), <code>d-</code> (reverse) and <code>d2</code> (uniform).
          </div>
          <div>
            <a href="?p=rules-uni-chiral"><span lang="ru">Подробнее...</span><span lang="en">Read more...</span></a>
          </div>
        </td>
        <td><code class="chem-code">_(A60,d+)_(A0)_(A-60,d-)_(A-120)</code></td>
        <td><div class="echem-formula">_(A60,d+)_(A0)_(A-60,d-)_(A-120)</div></td>
      </tr>
      <tr>
        <td><code>H</code></td>
        <td>
          <span lang="ru">Водородная связь. Действует только для связей с кратностью 1.</span>
          <span lang="en">Hydrogen bond. Only valid for bonds with multiplicity 1.</span>
        </td>
        <td><code class="chem-code">H`^+_(x2,H)OH^-</code></td>
        <td><div class="echem-formula">H`^+_(x2,H)OH^-</div></td>
      </tr>
      <tr>
        <td><code>h</code></td>
        <td>
          <div lang="ru">
            <a data-ref="soft-bond">Мягкая связь</a>.
            Не обязательно строго горизонтальная (в отличие от <a data-ref="bond-short">кратких связей</a>).<br />
            Существуют специальные случаи <code>h+</code> и <code>h-</code>. 
            В этом случае узлы выводятся вплотную друг к другу, как будто никакой связи между ними нет.
            Слева направо для h+ и справа налево для h-.
            <br />
            Если у связи указан параметр h, но отсутствует смещение по оси x, то это равнозначно варианту <code>h+</code>.
          </div>
          <div lang="en">
            <a data-ref="soft-bond">Soft bond</a>.
            Not necessarily strictly horizontal (unlike <a data-ref="bond-short">short bonds</a>).<br />
            There are special cases <code>h+</code> and <code>h-</code>.
            In this case, the nodes are displayed close to each other, as if there is no connection between them.
            Left to right for h+ and right to left for h-.
            <br />
            If the bond has an h parameter, but no offset along the x axis, then this is equivalent to the <code>h+</code> variant.            
          </div>
          <div>
            <a href="?p=rules-uni-soft"><span lang="ru">Подробнее...</span><span lang="en">Read more...</span></a>
          </div>
        </td>
        <td>
          <code class="chem-code">CH3_(h,A0)OCOH</code><br />
          <code class="chem-code">CH3_(h,A-15)OCOH</code><br />
          <code class="chem-code">CH3_(h+)CH&lt;|F&gt;O_(h)CH&lt;|F&gt;CH3</code>
        </td>
        <td>
          <div class="echem-formula">CH3_(h,A0)OCOH</div>
          <div class="echem-formula">CH3_(h,A-15)OCOH</div>
          <div class="echem-formula">CH3_(h+)CH&lt;|F&gt;O_(h)CH&lt;|F&gt;CH3</div>
        </td>
      </tr>
      <tr>
        <td><code>L</code></td>
        <td>
          <div lang="ru">
            Длина связи. <a href="?p=ref-number">Числовое значение</a><br />
            Используется совместно с параметрами <code>A</code> или <code>a</code>. 
            Имеет больший приоритет, чем функция <a href="?p=ref-func-L">$L()</a>.<br />
            Стандартная единичная длина подобрана так, чтобы хорошо выглядели связи между атомами из одной буквы (C, H, S, F...).
            Если используются атомы из двух букв, то рекомендуется использовать длину от 1.2 до 1.4.
          </div>
          <div lang="en">
            Bond length. <a href="?p=ref-number">Numeric value</a><br />
            Used with <code>A</code> or <code>a</code> parameters.
            Higher priority than the <a href="?p=ref-func-L">$L()</a> function.<br />
            The default unit length is chosen so that bonds between single-letter atoms (C, H, S, F...) look good.
            If two-letter atoms are used, it is recommended to use a length of 1.2 to 1.4.            
          </div>
        </td>
        <td><code class="chem-code">Ca_(A30,L1.2)O</code></td>
        <td><div class="echem-formula">Ca_(A30,L1.2)O</div></td>
      </tr>
      <tr>
        <td><code>N</code></td>
        <td>
          <div lang="ru">
            Кратность связи. Целое число от 0 до 3.<br />
            Для двойных связей возможны варианты: <code>2x</code>, <code>2r</code>, <code>2m</code> и <code>2l</code>. 
            Они соответствуют <a href="?p=ref-suffix">суффиксам</a>.
            Допускается использование верхнего регистра (<code>2L</code>), т.к. буква <code>l</code> слишком похожа на 1.   
          </div>
          <div lang="en">
            The multiplicity of the bond. An integer from 0 to 3.<br />
            For double bonds, the following options are possible: <code>2x</code>, <code>2r</code>, <code>2m</code>, and <code>2l</code>.
            They correspond to <a href="?p=ref-suffix">suffixes</a>.
            Using uppercase (<code>2L</code>) is allowed, since the letter <code>l</code> is too similar to 1.            
          </div>
          <div>
            <a href="?p=rules-uni-N"><span lang="ru">Подробнее...</span><span lang="en">Read more...</span></a>
          </div>
        </td>
        <td>
          <code class="chem-code">I_(A9,N0)I I_(A9,N1)I O_(A9,N2)O N_(A9,N3)N</code>
          <hr />
          <code class="chem-code">\_(y1,N2x) \_(y1,N2L) \_(y1,N2m) \_(y1,N2r)</code>
        </td>
        <td>
          <div class="echem-formula">I_(A9,N0)I I_(A9,N1)I O_(A9,N2)O N_(A9,N3)N</div><br />
          <div class="echem-formula">\_(y1,N2x) \_(y1,N2L) \_(y1,N2m) \_(y1,N2r)</div>
        </td>
      </tr>
      <tr>
        <td><code>P</code></td>
        <td>
          <div lang="ru">
            <a data-ref="poly">Полигональная связь</a>. Положительное или отрицательное число от 3, соответствующее числу углов полигона.
            Положительное число &mdash; по часовой стрелке, отрицательное &mdash; против часовой. Если не указано, то 5.<br />
            В большинстве случаев предпочтительнее использовать <code>_p</code> и <code>_q</code>. 
            Но может быть полезно, если нужно использовать глобальные режимы (<code>W</code>, <code>D</code>) или стили <code>S</code>.
          </div>
          <div lang="en">
            <a data-ref="poly">Polygonal bond</a>. A positive or negative number from 3, corresponding to the number of corners of the polygon.
            A positive number is clockwise, a negative number is counterclockwise. If not specified, then 5.<br />
            In most cases, it is preferable to use <code>_p</code> and <code>_q</code>.
            But it can be useful if you need to use global modes (<code>W</code>, <code>D</code>) or <code>S</code> styles.            
          </div>
          <div>
            <a href="?p=rules-uni-P"><span lang="ru">Подробнее...</span><span lang="en">Read more...</span></a>
          </div>
        </td>
        <td><code class="chem-code">-_(P3) -_(P-3) -_(P) -_(P-5)</code></td>
        <td><div class="echem-formula">-_(P3) -_(P-3) -_(P) -_(P-5)</div></td>
      </tr>
      <tr>
        <td><code>p</code></td>
        <td>
          <div lang="ru">
            Указание координат по <a href="?p=rules-refs">ссылке</a>. 
            Одна или несколько ссылок, разделённых символом <code>;</code> (точка с запятой) без пробелов и без знака #.<br />
            Можно комбинировать с параметрами <code>x</code> и <code>y</code>.<br />
            Например, конструкция <code>_(p1)</code> то же самое что <code>_#1</code>.
            Но вот для <code>_(p1,x1)</code> или <code>_(p1;2)</code> аналогов нет.
          </div>
          <div lang="en">
            Specifying coordinates by <a href="?p=rules-refs">link</a>.
            One or more links separated by the <code>;</code> symbol (semicolon) without spaces and without the # sign.<br />
            Can be combined with the <code>x</code> and <code>y</code> parameters.<br />
            For example, the <code>_(p1)</code> construction is the same as <code>_#1</code>.
            But there are no analogues for <code>_(p1,x1)</code> or <code>_(p1;2)</code>.            
          </div>
          <div>
            <a href="?p=rules-uni-ref"><span lang="ru">Подробнее...</span><span lang="en">Read more...</span></a>
          </div>
        </td>
        <td>
          <code class="chem-code">_(x2)_q3_q3_(p1;2;3)</code><hr />
          <code class="chem-code">_(x2.5)_(y1.5)_(p1,y0.8)_#1</code>
        </td>
        <td>
          <div class="echem-formula">_(x2)_q3_q3_(p1;2;3)</div>
          <div class="echem-formula">_(x2.5)_(y1.5)_(p1,y0.8)_#1</div>
        </td>
      </tr>
      <tr>
        <td><code>S</code></td>
        <td>
          <div lang="ru">
            Стиль. Определяется символами: <code>~ : | I</code><br />
            <code>~</code> &ndash; волнистая, <code>:</code> &ndash; штриховая, <code>|</code> &ndash; тонкая, <code>I</code> &ndash; толстая.<br />
            Для двойных и тройных связей эти символы можно комбинировать (кроме тильды).
            Перечислять нужно в том порядке, как будто для вертикальной линии (сверху вниз).<br />
            Стиль влияет только на внешний вид формулы и не учитывается при вычислении химических свойств.
            Параметр S не исключает использование N. При этом N влияет на вычисления, но не на внешний вид.<br />
            Если нужно явно указать выравнивание двойных связей, то для этого есть три суффикса: r, m и l (можно и верхнем регистре).
          </div>
          <div lang="en">
            Style. Defined by symbols: <code>~ : | I</code><br />
            <code>~</code> &ndash; wavy, <code>:</code> &ndash; dashed, <code>|</code> &ndash; thin, <code>I</code> &ndash; thick.<br />
            For double and triple bonds, these symbols can be combined (except for the tilde).
            They must be listed in the same order as for a vertical line (top to bottom).<br />
            The style only affects the appearance of the formula and is not taken into account when calculating chemical properties.
            The S parameter does not exclude the use of N. However, N affects the calculations, but not the appearance.<br />
            If you need to explicitly specify the alignment of double bonds, there are three suffixes for this: r, m and l (uppercase is also possible).
          </div>
          <div>
            <a href="?p=rules-uni-style"><span lang="ru">Подробнее...</span><span lang="en">Read more...</span></a>
          </div>
        </td>
        <td>
          <code class="chem-code">C_(y1,S~) C_(y1,S:) C_(y1,S|) C_(y1,SI) C_(y1,S:|) C_(y1,S|:) C_(y1,S:|:)</code><br />
          <hr />
          <code class="chem-code" style="font-size: 80%;">_(A90,S|:)_(A30,S|:)_(A-30,S|:)_(A-90,S|:)</code><br />
          <hr />
          <code class="chem-code">\_(y1,S:|r) \_(y1,S:|m) \_(y1,S:|L)</code>
        </td>
        <td>
          <div class="echem-formula">C_(y1,S~) C_(y1,S:) C_(y1,S|) C_(y1,SI) C_(y1,S:|) C_(y1,S|:) C_(y1,S:|:)</div>
          <div class="echem-formula">_(A90,S|:)_(A30,S|:)_(A-30,S|:)_(A-90,S|:)</div>
          <div class="echem-formula">\_(y1,S:|r) \_(y1,S:|m) \_(y1,S:|L)</div>
        </td>
      </tr>
      <tr>
        <td><code>T</code></td>
        <td>
          <div lang="ru">Текстовое описание связи. Не используется при выводе графической формулы, но может быть полезно для разработчиков.</div>
          <div lang="en">Text description of the bond. Not used when deriving the graphical formula, but may be useful for developers.</div>
        </td>
        <td><code class="chem-code">H_(A-30,T/)O_(A30,T\)H</code></td>
        <td><div class="echem-formula">H_(A-30,T/)O_(A30,T\)H</div></td>
      </tr>
      <tr>
        <td><code>W</code></td>
        <td>
          <div lang="ru">
            Клиновидные связи. Глобальный режим.<br />
            Есть варианты: <code>W+</code> (включает режим) и <code>W-</code> (выключает).<br />
            Так же есть вариант <code>W2</code>, когда текущая связь и следующие выводятся толстыми.
            Выключается параметром <code>W0</code> или <code>W1</code>.
          </div>
          <div lang="en">
            Wedge-shaped bonds. Global mode.<br />
            There are options: <code>W+</code> (turns the mode on) and <code>W-</code> (turns it off).<br />
            There is also an option <code>W2</code>, when the current bond and the following ones are displayed in thick.
            It is turned off by the parameter <code>W0</code> or <code>W1</code>.            
          </div>
          <div>
            <a href="?p=rules-uni-chiral"><span lang="ru">Подробнее...</span><span lang="en">Read more...</span></a>
          </div>
        </td>
        <td><code class="chem-code">_(A60,W+)_(A0)_(A-60,W-)_(A-120)</code></td>
        <td><div class="echem-formula">_(A60,W+)_(A0)_(A-60,W-)_(A-120)</div></td>
      </tr>
      <tr>
        <td><code>w</code></td>
        <td>
          <div lang="ru">
            Клиновидные связи. Локально (т.е. только для текущей связи).<br />
            Возможны варианты: <code>w+</code> (прямая), <code>w-</code> (обратная), <code>w2</code> (равномерно толстая).
          </div>
          <div lang="en">
            Wedge-shaped bonds. Locally (i.e. only for the current bond).<br />
            Possible options: <code>w+</code> (direct), <code>w-</code> (reverse), <code>w2</code> (uniformly thick).            
          </div>
          <div>
            <a href="?p=rules-uni-chiral"><span lang="ru">Подробнее...</span><span lang="en">Read more...</span></a>
          </div>
        </td>
        <td><code class="chem-code">_(A60,w+)_(A0)_(A-60,w-)_(A-120)</code></td>
        <td><div class="echem-formula">_(A60,w+)_(A0)_(A-60,w-)_(A-120)</div></td>
      </tr>
      <tr>
        <td><code>x</code></td>
        <td>
          <div lang="ru">
            Смещение по оси X. <a href="?p=ref-number">Числовое значение</a> или ссылка на x-координаты других узлов.
          </div>
          <div lang="en">
            X-axis offset. <a href="?p=ref-number">Numeric value</a> or reference to x-coordinates of other nodes.
          </div>
          <div lang="ru">
            См. также: <a href="?p=rules-uni-xy">Параметры x и y</a> и <a href="?p=rules-uni-ref">Использование ссылок</a>.
          </div>
          <div lang="en">
            See also: <a href="?p=rules-uni-xy">Parameters x and y</a> and <a href="?p=rules-uni-ref">Using Links</a>.
          </div>
        </td>
        <td>
          <code class="chem-code">_(x2)|_(x-0.75)</code><br />
          <code class="chem-code">\|_(x#1)</code>
        </td>
        <td>
          <div class="echem-formula">_(x2)|_(x-0.75)</div>
          <div class="echem-formula">\|_(x#1)</div>
        </td>
      </tr>
      <tr>
        <td><code>y</code></td>
        <td>
          <div lang="ru">
            Смещение по оси Y. <a href="?p=ref-number">Числовое значение</a> или ссылка на y-координаты других узлов.
          </div>
          <div lang="en">
            Y-axis offset. <a href="?p=ref-number">Numeric value</a> or reference to y-coordinates of other nodes.
          </div>
          <div lang="ru">
            См. также: <a href="?p=rules-uni-xy">Параметры x и y</a> и <a href="?p=rules-uni-ref">Использование ссылок</a>.
          </div>
          <div lang="en">
            See also: <a href="?p=rules-uni-xy">Parameters x and y</a> and <a href="?p=rules-uni-ref">Using Links</a>.
          </div>
        </td>
        <td><code class="chem-code">_(y2)_(x1,y-.3)_(y#1;2)</code></td>
        <td><div class="echem-formula">_(y2)_(x1,y-.3)_(y#1;2)</div></td>
      </tr>
      <tr>
        <td><code>&gt;</code></td>
        <td>
          <div lang="ru">Прямая стрелка. То же самое, что <code>C</code>.</div>
          <div lang="en">Forward arrow. Same as <code>C</code>.</div>
        </td>
        <td><code class="chem-code">_(A30,&gt;)</code></td>
        <td><div class="echem-formula">_(A30,&gt;)</div></td>
      </tr>
      <tr>
        <td><code>&lt;</code></td>
        <td>
          <div lang="ru">Обратная стрелка. То же самое, что <code>C-</code>.</div>
          <div lang="en">Backward arrow. Same as <code>C-</code>.</div>
        </td>
        <td><code class="chem-code">_(A30,&lt;)</code></td>
        <td><div class="echem-formula">_(A30,&lt;)</div></td>
      </tr>
      <tr>
        <td><code>~</code></td>
        <td>
          <div lang="ru">
            Волнистая линия. Обычно используется для рацемической смеси оптических изомеров.
          </div>
          <div lang="en">
            Wavy line. Usually used for a racemic mixture of optical isomers.
          </div>
        </td>
        <td><code class="chem-code">_(x2,y1,~)OH</code></td>
        <td><div class="echem-formula">_(x2,y1,~)OH</div></td>
      </tr>
    </table>
  </page>

  <page id="ref-greek" data-owner="ref">
    <h1>
      <span lang="ru">Греческие буквы</span>
      <span lang="en">Greek letters</span>
    </h1>
    <p lang="ru">
      В комментариях и в <a data-ref="abs-item">абстрактных элементах</a> можно использовать греческие буквы. 
      Для этого нужно ввести название буквы в квадратных скобках.
    </p>
    <p lang="en">
      Greek letters can be used in comments and <a data-ref="abs-item">abstract items</a>.
      To do this, enter the name of the letter in square brackets.
    </p>
    <table>
      <tr><td><code>[Alpha] [alpha]</code></td><td>Α α</td></tr>
      <tr><td><code>[Beta] [beta]</code></td><td>Β β</td></tr>
      <tr><td><code>[Gamma] [gamma]</code></td><td>Γ γ</td></tr>
      <tr><td><code>[Delta] [delta]</code></td><td>Δ δ</td></tr>
      <tr><td><code>[Epsilon] [epsilon]</code></td><td>Ε ε</td></tr>
      <tr><td><code>[Zeta] [zeta]</code></td><td>Ζ ζ</td></tr>
      <tr><td><code>[Eta] [eta]</code></td><td>Η η</td></tr>
      <tr><td><code>[Theta] [theta]</code></td><td>Θ θ</td></tr>
      <tr><td><code>[Iota] [iota]</code></td><td>Ι ι</td></tr>
      <tr><td><code>[Kappa] [kappa]</code></td><td>Κ κ</td></tr>
      <tr><td><code>[Lambda] [lambda]</code></td><td>Λ λ</td></tr>
      <tr><td><code>[Mu] [mu]</code></td><td>Μ μ</td></tr>
      <tr><td><code>[Nu] [nu]</code></td><td>Ν ν</td></tr>
      <tr><td><code>[Xi] [xi]</code></td><td>Ξ ξ</td></tr>
      <tr><td><code>[Omicron] [omicron]</code></td><td>Ο ο</td></tr>
      <tr><td><code>[Pi] [pi]</code></td><td>Π π</td></tr>
      <tr><td><code>[Rho] [rho]</code></td><td>Ρ ρ</td></tr>
      <tr><td><code>[Sigma] [sigma]</code></td><td>Σ σ</td></tr>
      <tr><td><code>[Tau] [tau]</code></td><td>Τ τ</td></tr>
      <tr><td><code>[Upsilon] [upsilon]</code></td><td>Υ υ</td></tr>
      <tr><td><code>[Phi] [phi]</code></td><td>Φ φ</td></tr>
      <tr><td><code>[Chi] [chi]</code></td><td>Χ χ</td></tr>
      <tr><td><code>[Psi] [psi]</code></td><td>Ψ ψ</td></tr>
      <tr><td><code>[Omega] [omega]</code></td><td>Ω ω</td></tr>
    </table>
    <p lang="ru">Примеры</p>
    <p lang="en">Examples</p>
    <div class="two-col-table" style="display: inline-grid;">
      <code class="chem-code">$nM(27)Al + {[gamma]} -&gt; $nM(27)Al"*"</code>
      <div class="echem-formula">$nM(27)Al + {[gamma]} -&gt; $nM(27)Al"*"</div>
      <code class="chem-code">C + O2 -> CO2"; [Delta]_RH=-393,51 kJ/mol"</code>
      <div class="echem-formula">C + O2 -> CO2"; [Delta]_RH=-393,51 kJ/mol"</div>
    </div>
  </page>

  <page id="ref-grave" data-owner="ref">
    <h1>
      <span lang="ru">Символ обратного апострофа</span>
      <span lang="en">Backtick symbol</span>
    </h1>
    <p lang="ru"><a href="https://ru.wikipedia.org/wiki/%D0%9C%D0%B0%D1%88%D0%B8%D0%BD%D0%BE%D0%BF%D0%B8%D1%81%D0%BD%D1%8B%D0%B9_%D0%BE%D0%B1%D1%80%D0%B0%D1%82%D0%BD%D1%8B%D0%B9_%D0%B0%D0%BF%D0%BE%D1%81%D1%82%D1%80%D0%BE%D1%84" target="_blank">Обратный апостроф</a> 
      <code>`</code> располагается на клавиатуре в верхнем левом углу под <b>Esc</b>.</p>
    <p lang="en">
      <code>`</code> <a href="https://en.wikipedia.org/wiki/Backtick" target="_blank">Backtick</a>.
      It is also known as backquote, grave, or grave accent.
      It is located on the keyboard in the upper left corner under the <b>Esc</b> key.
    </p>
    <p lang="ru">В CharChem он используется для разных целей. Обычно он служит для изменения поведения следующей за ним конструкции.</p>
    <p lang="en">In CharChem it is used for different purposes. Usually it serves to change the behavior of the construct following it.</p>
    <p lang="ru">Ниже представлены все случаи использования:</p>
    <p lang="en">Below are all the use cases:</p>
    <table style="max-width: 90%;">
      <tr>
        <th><span lang="ru">Место</span><span lang="en">Location</span></th>
        <th><span lang="ru">Назначение</span><span lang="en">Purpose</span></th>
        <th><span lang="ru">Примеры</span><span lang="en">Examples</span></th>
      </tr>
      <tr>
        <td>
          <span lang="ru">Перед <a data-ref="bond-short">краткой связью</a></span>
          <span lang="en">Before a <a data-ref="bond-short">short bond</a></span>
        </td>
        <td>
          <span lang="ru">Изменение направления на противоположное</span>
          <span lang="en">Reversal of direction</span>
        </td>
        <td>
          <div class="two-col-table" style="display: inline-grid;">
            <code class="chem-code">-v `-v |v `|v \v `\v</code>
            <div class="echem-formula">-v `-v |v `|v \v `\v</div>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <span lang="ru">Перед <a href="?p=rules-node-charge">зарядом узла</a></span>
          <span lang="en">Before a <a href="?p=rules-node-charge">node charge</a></span>
        </td>
        <td>
          <span lang="ru">Заряд выводится не справа, а слева</span>
          <span lang="en">The charge is discharged not from the right, but from the left</span>
        </td>
        <td>
          <div class="two-col-table" style="display: inline-grid;">
            <code class="chem-code">Mg^2+ Mg`^+2</code>
            <div class="echem-formula">Mg^2+ Mg`^+2</div>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <span lang="ru">Перед <a data-ref="node-item">элементом узла</a></span>
          <span lang="en">Before a <a data-ref="node-item">node item</a></span>
        </td>
        <td>
          <span lang="ru">Для указания <a href="?p=rules-node-center">центрального элемента</a> узла</span>
          <span lang="en">To indicate the <a href="?p=rules-node-center">central node item</a></span>
        </td>
        <td>
          <div class="two-col-table" style="display: inline-grid;">
            <code class="chem-code">|SCH3 |`SCH3</code>
            <div class="echem-formula">|SCH3 |`SCH3</div>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <span lang="ru">Внутри комментария</span>
          <span lang="en">Inside the comment</span>
        </td>
        <td>
          <span lang="ru">Если нужно вставить фразу из словаря, которая должна переводиться на разные языки, то она заключается в обратные апострофы.</span>
          <span lang="en">If you need to insert a phrase from a dictionary that needs to be translated into different languages, it is enclosed in backticks.</span>
        </td>
        <td>
          <div class="two-col-table" style="display: inline-grid;">
            <code class="chem-code">H-Br|h"`Br`"</code>
            <div class="echem-formula">H-Br|h"`Br`"</div>
            <code class="chem-code">2Na"`(s)`" + Cl2"`(g)`"</code>
            <div class="echem-formula">2Na"`(s)`" + Cl2"`(g)`"</div>
          </div>
        </td>
      </tr>
    </table>
  </page>

  <page id="ref-norm" data-owner="ref">
    <h1><span lang="ru">Нормали</span><span lang="en">Normals</span></h1>
    <p lang="ru">
      Обычно нормали используются для боковых ответвлений от правильных полигонов при помощи <a href="?p=rules-uni-rel">относительных углов</a>.
    </p>
    <p lang="en">
      Normals are typically used to branch off from regular polygons using <a href="?p=rules-uni-rel">relative angles</a>.
    </p>
    <p lang="ru">Общая формула относительного угла нормали: <code>90 - 180/n</code>, где <i>n</i> &mdash; это количество углов полигона.</p>
    <p lang="en">The general formula for the relative normal angle is <code>90 - 180/n</code>, where <i>n</i> is the number of angles of the polygon.</p>
    <p>
      <span lang="ru"><b>Калькулятор</b>. Число углов полигона (от 3): </span>
      <span lang="en"><b>Calculator</b>. Number of polygon angles (from 3): </span>
      <input id="calcNormN" type="number" min="3" value="3" style="width: 4rem;"/>
      <span lang="ru">Относительный угол: </span>
      <span lang="en">Relative angle: </span>
      <input id="calcNormA" type="text" readonly />
      <script>
        window.addEventListener("load", function() {
          var elemN = document.getElementById("calcNormN");
          var elemA = document.getElementById("calcNormA");
          function calc() {
            var n = parseInt(elemN.value);
            if (!n || n < 3) {
              elemA.value = "";
            } else {
              elemA.value = Math.floor(1000*(90 - 180/n))/1000;
            }
          }
          elemN.addEventListener("input", calc);
          calc();
        })
      </script>
    </p>
    <p lang="ru">
      Чаще нужны <i>исходящие</i> нормали, которые исходят из углов полигона.
      А если нужно к концу связи присоединить полигон, то это <i>входящая нормаль</i>.
      Но угол у них одинаковый.
    </p>
    <p lang="en">
      More often, <i>outgoing</i> normals are needed, which come from the corners of the polygon.
      And if you need to attach a polygon to the end of a bond, then this is an <i>incoming normal</i>.
      But their angle is the same.
    </p>
    <table>
      <tr>
        <th rowspan="2">
          <span lang="ru">Число<br />углов</span>
          <span lang="en">Number <br />of angles</span>
        </th>
        <th rowspan="2">
          <span lang="ru">Относительный<br />угол</span>
          <span lang="en">Relative<br />angle</span>
        </th>
        <th colspan="2">Исходящая нормаль</th>
        <th colspan="2">Входящая нормаль</th>
      </tr>
      <tr>
        <th><span lang="ru">Код примера</span><span lang="en">Example code</span></th>
        <th><span lang="ru">Результат</span><span lang="en">Result</span></th>
        <th><span lang="ru">Код примера</span><span lang="en">Example code</span></th>
        <th><span lang="ru">Результат</span><span lang="en">Result</span></th>
      </tr>
      <tr>
        <td>3</td>
        <td>30°</td>
        <td><code class="chem-code">-&lt;_(a30,C)&gt;_q3&lt;_(a30,C)&gt;_q3_(a30,C)</code></td>
        <td><div class="echem-formula">-&lt;_(a30,C)&gt;_q3&lt;_(a30,C)&gt;_q3_(a30,C)</div></td>
        <td><code class="chem-code">-v_(a30)_q3_q3</code></td>
        <td><div class="echem-formula">-v_(a30)_q3_q3</div></td>
      </tr>
      <tr>
        <td>4</td>
        <td>45°</td>
        <td><code class="chem-code">|&lt;_(a45,C)&gt;-&lt;_(a45,C)&gt;`|</code></td>
        <td><div class="echem-formula">|&lt;_(a45,C)&gt;-&lt;_(a45,C)&gt;`|</div></td>
        <td><code class="chem-code">-v_(a45)_q4_q4_q4</code></td>
        <td><div class="echem-formula">-v_(a45)_q4_q4_q4</div></td>
      </tr>
      <tr>
        <td>5</td>
        <td>54°</td>
        <td><code class="chem-code">-&lt;_(a54,C)&gt;_q&lt;_(a54,C)&gt;_q_q_q</code></td>
        <td><div class="echem-formula">-&lt;_(a54,C)&gt;_q&lt;_(a54,C)&gt;_q_q_q</div></td>
        <td><code class="chem-code">-v_(a54)_q_q_q_q</code></td>
        <td><div class="echem-formula">-v_(a54)_q_q_q_q</div></td>
      </tr>
      <tr>
        <td>6</td>
        <td>60°</td>
        <td><code class="chem-code">|&lt;_(a60,C)&gt;\&lt;_(a60,C)&gt;/&lt;_(a60,C)&gt;`|</code></td>
        <td><div class="echem-formula">|&lt;_(a60,C)&gt;\&lt;_(a60,C)&gt;/&lt;_(a60,C)&gt;`|</div></td>
        <td><code class="chem-code">_(A-20,C)_(a60)_q6_q6_q6_q6_q6</code></td>
        <td><div class="echem-formula">_(A-20,C)_(a60)_q6_q6_q6_q6_q6</div></td>
      </tr>
      <tr>
        <td>7</td>
        <td>64.3°</td>
        <td><code class="chem-code">-&lt;_(a64.3,C)&gt;_q7&lt;_(a64.3,C)&gt;_q7_q7_q7_q7_q7</code></td>
        <td><div class="echem-formula">-&lt;_(a64.3,C)&gt;_q7&lt;_(a64.3,C)&gt;_q7_q7_q7_q7_q7</div></td>
        <td><code class="chem-code">-v_(a64.3)_q7_q7_q7_q7_q7_q7</code></td>
        <td><div class="echem-formula">-v_(a64.3)_q7_q7_q7_q7_q7_q7</div></td>
      </tr>
      <tr>
        <td>8</td>
        <td>67.5°</td>
        <td><code class="chem-code">|_q8&lt;_(a67.5,C)&gt;-&lt;_(a67.5,C)&gt;_q8`|</code></td>
        <td><div class="echem-formula">|_q8&lt;_(a67.5,C)&gt;-&lt;_(a67.5,C)&gt;_q8`|</div></td>
        <td><code class="chem-code">-v_(a67.5)_q8_q8_q8_q8_q8_q8_q8</code></td>
        <td><div class="echem-formula">-v_(a67.5)_q8_q8_q8_q8_q8_q8_q8</div></td>
      </tr>
    </table>
  </page>

  <!-- Dictionary -->
  <page id="dict" data-owner="home">
    <h1>
      <span lang="ru">Словарь терминов</span>
      <span lang="en">Glossary of Terms</span>
    </h1>
    <dl>
      <dt><a id="d-abs-formula">
        <span lang="ru">Абстрактная формула</span>
        <span lang="en">Abstract formula</span>
      </a></dt>
      <dd>
        <p lang="ru">
          Содержит в себе либо <a data-ref="abs-item">абстрактные элементы</a> (<span class="echem-formula">R-OH</span>), 
          либо <a data-ref="abs-coeff">абстрактные коэффициенты</a> (<span class="echem-formula">(C2H4)'n'</span>),
          либо формулы минералов с непостоянным составом (<span class="echem-formula">(Ca,Na2,K2)3Al6Si10O32*12H2O</span>).
        </p>
        <p lang="en">
          Contains either <a data-ref="abs-item">abstract items</a> (<span class="echem-formula">R-OH</span>), 
          or <a data-ref="abs-coeff">abstract coefficients</a> (<span class="echem-formula">(C2H4)'n'</span>), 
          or formulas of minerals with variable composition (<span class="echem-formula">(Ca,Na2,K2)3Al6Si10O32*12H2O</span>).
        </p>
        <p lang="ru">
          Функциональность абстрактной формулы снижается. Например, для неё нельзя вычислить атомную массу.
        </p>
        <p lang="en">
          The functionality of an abstract formula is reduced. For example, it is impossible to calculate the atomic mass for it.
        </p>
      </dd>
    </dl>
    <dl>
      <dt><a id="d-abs-item">
        <span lang="ru">Абстрактный элемент узла</span>
        <span lang="en">Abstract node item</span>
      </a></dt>
      <dd>
        <p lang="ru">
          используется для тех случаев, когда нужно обозначить не какой-то определённый элемент, а обобщающую конструкцию.
          Например, щелочной металл или галоген. Или спирт: <span class="echem-formula">{R}-OH</span>
        </p>
        <p lang="en">
          is used for those cases when it is necessary to designate not some specific element, but a general construction. 
          For example, an alkali metal or a halogen. Or alcohol: <span class="echem-formula">{R}-OH</span>
        </p>
      </dd>
    </dl>
    <dl>
      <dt><a id="d-abs-coeff">
        <span lang="ru">Абстрактный коэффициент</span>
        <span lang="en">Abstract coefficient</span>
      </a></dt>
      <dd>
        <p lang="ru">
          Бывают вещества, где точно не известно количество атомов. 
          Например, полиэтилен: <span class="echem-formula">(C2H4)'n'</span>. 
          Или <span class="echem-formula">Fe2O3*'n'H2O</span>
        </p>
        <p lang="en">
          There are substances where the exact number of atoms is not known. 
          For example, polyethylene: <span class="echem-formula">(C2H4)'n'</span>.
          Or <span class="echem-formula">Fe2O3*'n'H2O</span>
        </p>
      </dd>
    </dl>
    <dl>
      <dt><a id="d-auto-node">
        <span lang="ru">Автоузел</span>
        <span lang="en">Autonode</span>
      </a></dt>
      <dd>
        <p lang="ru">
          <a data-ref="node">Узлы</a> скелетных формул. Хотя они и не видны, но в системе они автоматически преобразуются. 
          То есть, добавляется один атом углерода и нужное количество атомов водорода.
        </p>
        <p lang="en">
          Skeletal formula <a data-ref="node">nodes</a>. 
          Although they are not visible, they are automatically converted in the system. 
          That is, one carbon atom and the required number of hydrogen atoms are added.
        </p>
        <div class="two-col-table inline-grid">
          <header>
            <span lang="ru">Исходная формула с автоузлами</span>
            <span lang="en">Original formula with autonodes</span>
          </header>
          <header>
            <span lang="ru">Аналог во внутреннем представлении</span>
            <span lang="en">Analogue in internal representation</span>
          </header>
          <div class="echem-formula">/\&lt;|&gt;/`|c|\</div>
          <div class="echem-formula">H3C/C&lt;_(y-.5)H2&gt;\C&lt;_(y-.5)H&gt;&lt;|CH3&gt;/C`|CH2|\CH3</div>
        </div>
      </dd>
    </dl>
    <dl>
      <dt><a id="d-bond-short">
        <span lang="ru">Краткая химическая связь</span>
        <span lang="en">Short chemical bond</span>
      </a></dt>
      <dd>
        <p lang="ru">
          Способ описания химических связей при помощи символов <code>/ \ | - = %</code><br />
          <a href="?p=rules-bonds-short">Основная статья</a>.
        </p>
        <p lang="en">
          A method of describing chemical bonds using symbols <code>/ \ | - = %</code><br />
          <a href="?p=rules-bonds-short">Main atricle</a>
        </p>
      </dd>
    </dl>
    <dl>
      <dt><a id="d-soft-bond">
        <span lang="ru">Мягкие связи</span>
        <span lang="en">Soft bonds</span>
      </a></dt>
      <dd>
        <p lang="ru">
          Используются для соединения краёв узлов, а не центров (как у остальных связей).<br />
          Например: <span class="echem-formula">H2N-CH2-COOH</span>.<br />
          <a href="?p=rules-soft">Основная статья</a>
        </p>
        <p lang="en">
          are used to connect the edges of nodes, rather than the centers (like other bonds).<br />
          For example: <span class="echem-formula">H2N-CH2-COOH</span>.<br />
          <a href="?p=rules-soft">Main article</a>
        </p>
      </dd>
    </dl>
    <dl>
      <dt><a id="d-op">
        <span lang="ru">Операция</span>
        <span lang="en">Operation</span>
      </a></dt>
      <dd>
        <p lang="ru">
          Часть формулы CharChem. Служит для соединения <a data-ref="agent">реагентов</a>.<br />
          <a href="?p=rules-ops">Основная статья</a>, <a href="?p=ref-ops">Список операций</a>
        </p>
        <p lang="en">
          Part of the CharChem formula. Serves to connect <a data-ref="agent">reagents</a>.<br />
          <a href="?p=rules-ops">Maint article</a>, <a href="?p=ref-ops">List of operations</a>
        </p>
      </dd>
    </dl>
    <dl>
      <dt><a id="d-poly">
        <span lang="ru">Полигональная связь</span>
        <span lang="en">Polygonal bond</span>
      </a></dt>
      <dd>
        <p lang="ru">
          Способ описания химических связей для образования правильных многоугольников (полигонов) 
          при помощи конструкций <code>_p</code> и <code>_q</code>.<br />
          Например: <span class="echem-formula">-_q3_q3</span> или <span class="echem-formula">-_q_q_q_q</span><br />
          <a href="?p=rules-poly">Основная статья</a>.
        </p>
        <p lang="en">
          A method for describing chemical bonds to form regular polygons
          using the <code>_p</code> and <code>_q</code> constructions.<br />
          For example: <span class="echem-formula">-_q3_q3</span> or <span class="echem-formula">-_q_q_q_q</span><br />
          <a href="?p=rules-poly">Main article</a>          
        </p>
      </dd>
    </dl>
    <dl>
      <dt><a id="d-agent">
        <span lang="ru">Реагент</span>
        <span lang="en">Reagent</span>
      </a></dt>
      <dd>
        <p lang="ru">Часть формулы CharChem. Представляет отдельное вещество, ион, радикал (и т.п.)</p>
        <p lang="en">Part of the CharChem formula. Represents a single substance, ion, radical (etc.)</p>
        <div class="echem-formula">
          "2"H2:n1_(x1.1,N0)"+"_(x.7,N0)O2:n2_(x1.1,N0)"="_(x1.2,N0)"2"`H2O:n3_(y2,x#n2,N0)"`Reagent`"$color(#888)@:ar(n)(*_(C,p&n,y.55)$bg(to:&n,s:#DDD,p:.2;.2;0)*)@(n1)@ar(n2)@ar(n3)
        </div>
      </dd>
    </dl>
    <dl>
      <dt><a id="d-skeletal-formula">
        <span lang="ru">Скелетная формула</span>
        <span lang="en">Skeletal formula</span>
      </a></dt>
      <dd>
        <p lang="ru">
          Это общепринятая разновидность химических формул. 
          Отличается тем, что углы и пустые концы соответствуют атомам углерода, а количество атомов водорода вычисляется автоматически.<br />
          <a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%BA%D0%B5%D0%BB%D0%B5%D1%82%D0%BD%D0%B0%D1%8F_%D1%84%D0%BE%D1%80%D0%BC%D1%83%D0%BB%D0%B0" target="_blank">Статья в википедии</a>
        </p>
        <p lang="en">
          This is a common type of chemical formula.
          It differs in that the angles and empty ends correspond to carbon atoms, and the number of hydrogen atoms is calculated automatically.<br />
          <a href="https://en.wikipedia.org/wiki/Skeletal_formula" target="_blank">Wikipedia article</a>
        </p>
      </dd>
    </dl>
    <dl>
      <dt><a id="d-uni">
        <span lang="ru">Универсальная связь</span>
        <span lang="en">Universal bond</span>
      </a></dt>
      <dd>
        <p lang="ru">
          Способ описания химической связи при помощи конструкции <code>_(<i>параметры</i>)</code>.
          Является наиболее мощным способом, но и самым сложным.<br />
          <a href="?p=rules-uni">Основная статья</a>
        </p>
        <p lang="en">
          A method of describing a chemical bond using the <code>_(<i>parameters</i>)</code> construction.
          It is the most powerful method, but also the most complex.<br />
          <a href="?p=rules-uni">Main article</a>          
        </p>
      </dd>
    </dl>
    <dl>
      <dt><a id="d-node">
        <span lang="ru">Узел</span>
        <span lang="en">Node</span>
      </a></dt>
      <dd>
        <p lang="ru">Узлы входят в состав <a data-ref="agent">реагентов</a></p>
        <p lang="en">Nodes are part of <a data-ref="agent">reagents</a></p>
        <div class="echem-formula">COOH|CH2|NH2$color(#BBB)_(x-2,y#2,C-){}(*_(C)#2*)(*_(C)#1*)_(h-)$color()"`Node`"</div>
      </dd>
    </dl>
    <dl>
      <dt><a id="d-bond">
        <p lang="ru">Химическая связь</p>
        <p lang="en">Chemical bond</p>
      </a></dt>
      <dd>
        <p lang="ru">
          Химические связи входят в состав <a data-ref="agent">реагентов</a> и служат для связи <a data-ref="node">узлов</a>.
        </p>
        <p lang="en">
          Chemical bonds are part of <a data-ref="agent">reagents</a> and serve to connect <a data-ref="node">nodes</a>.
        </p>
        <p lang="ru">
          Виды химических связей в CharChem: <a href="?p=rules-bonds-short">краткие</a>, 
          <a href="?p=rules-poly">полигональные</a>, <a href="?p=rules-uni">универсальные</a> и <a href="?p=rules-multi">распределённые</a>.
        </p>
        <p lang="en">
          Types of chemical bonds in CharChem: <a href="?p=rules-bonds-short">short</a>, 
          <a href="?p=rules-poly">polygonal</a>, <a href="?p=rules-uni">universal</a> and <a href="?p=rules-multi">delocalized</a>.
        </p>
      </dd>
    </dl>
    <dl>
      <dt><a id="d-node-item">
        <span lang="ru">Элемент узла</span>
        <span lang="en">Node item</span>
      </a></dt>
      <dd>
        <p lang="ru">
          Не путать с химическим элементом! Составная часть <a data-ref="node">узла</a>. Обычно это атом, который может иметь подстрочный коэффициент.
          Например, здесь узел состоит из 4 элементов: <span class="echem-formula">NH4OH</span>. 
          Но элементами узла так же могут быть радикалы и комментарии.<br />
          <a href="?p=rules-node-item">Основная статья</a>
        </p>
        <p lang="en">
          A component of a <a data-ref="node">node</a>. Usually it is an atom, which can have a subscript coefficient. 
          For example, here the node consists of 4 items: <span class="echem-formula">NH4OH</span>.
          But the items of a node can also be radicals and comments.<br />
          <a href="?p=rules-node-item">Main article</a>
        </p>
      </dd>
    </dl>
  </page>
  <div class="lang-switcher">
    <button id="setEn">en</button>
    <button id="setRu">ru</button>
  </div>
</body>
</html>